(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{511:function(e,t,n){},512:function(e,t,n){"use strict";n.r(t);var r=n(287),c=n.n(r),i=n(0),a=n.n(i),o=n(21),s=n.n(o),l=n(98),d=n(35),u=n(66),j=n(585),b=n(33),h=n(10),f=n(48),p=(n(269),n(14)),x=n(165),O={apiKey:"AIzaSyB8jzc6Gck2Rt-rrw-ZbACudr5VqESRNRY",authDomain:"reusing-intent.firebaseapp.com",projectId:"reusing-intent",storageBucket:"reusing-intent.appspot.com",messagingSenderId:"290275127628",appId:"1:290275127628:web:e332ddfe7bada09cff5fe9",measurementId:"G-K9KB7W1VM3"};function m(e,t){var n=e.root,r=t[t.length-1],c={};return c[e.root]=e.nodes[e.root],t.forEach((function(t,r,i){var a=e.nodes[t];if(Object(b.isChildNode)(a))if(0===r)a.parent=n,c[n].children=[],c[n].children.push(t);else{var o=i[r-1];a.parent=o,c[o].children=[],c[o].children.push(t)}c[t]=a})),{current:r,root:n,nodes:c}}var v=n(22),y=n(49),g=function(){function e(t){Object(f.a)(this,e),this.rootStore=void 0,this.updatedActions=void 0,this.rootStore=t,Object(p.makeAutoObservable)(this)}return Object(y.a)(e,[{key:"compDataset",get:function(){return this.rootStore.projectStore.comparisonDataset}},{key:"selectedPointsComparison",get:function(){return[]}},{key:"updatedFilterPoints",get:function(){return[]}},{key:"isBelowCurrent",value:function(e,t){var n=this.rootStore.exploreStore.provenance.graph;if(0===n.nodes[t].children.length||e===t)return!1;if(n.nodes[t].children.includes(e))return!0;var r,c=!1,i=Object(v.a)(n.nodes[t].children);try{for(i.s();!(r=i.n()).done;){var a=r.value;c||(c=this.isBelowCurrent(e,a))}}catch(o){i.e(o)}finally{i.f()}return c}}]),e}(),k=n(27),w=n(56),S=n.n(w);var C=function(e){return JSON.parse(JSON.stringify(e))};function N(){return"plot".concat((new Date).getTime().toString())}var D="https://reusing.sci.utah.edu";var M=function(){function e(t){var n=this;Object(f.a)(this,e),this.rootStore=void 0,this.isLoadingData=!1,this.isLoadingPredictions=!1,this.hoveredPrediction=null,this.multiBrushBehaviour="Union",this.showCategories=!1,this.brushType="Rectangular",this.stateRecord={},this.predictions=[],this.currBrushed=[],this.workflows={},this.currentWorkflow=null,this.workflowSyncStatus={},this.isImporting=!1,this.updateBrushed=function(e){n.currBrushed=e},this.addWorkflow=function(e){var t=Object.values(n.workflows).filter((function(e){return e.name.startsWith("Workflow #")})),r=1;if(t.length>0){var c=t[t.length-1].name.split("#");r=parseInt(c[c.length-1])+1}var i={id:"workflow".concat((new Date).getTime().toString()),project:n.currentProject.key,name:e||"Workflow #".concat(r),graph:[]};n.workflows[i.id]=i,n.currentWorkflow=i.id},this.renameWorkflow=function(e,t){n.workflows[e].name=t},this.removeWorkflow=function(e){if(delete n.workflows[e],n.currentWorkflow===e&&Object.values(n.workflows).length>0){var t=Object.values(n.workflows);n.currentWorkflow=t[t.length-1].id}else n.workflows[e]||(n.currentWorkflow=null)},this.setCurrentWorkflow=function(e){n.currentWorkflow=e},this.addToWorkflow=function(e){if(n.currentWorkflow&&n.workflows[n.currentWorkflow]){var t=n.workflows[n.currentWorkflow].graph;if(!t.includes(e)){for(var r=n.provenance.graph.nodes[e];"Root"!==r.label&&Object(b.isChildNode)(r);)t.includes(r.id)||t.push(r.id),r=n.provenance.graph.nodes[r.parent];t.sort((function(e,t){return(n.provenance.graph.nodes[e].metadata.createdOn||-1)-(n.provenance.graph.nodes[t].metadata.createdOn||-1)})),n.workflows[n.currentWorkflow].graph=Object(k.a)(t)}}},this.removeFromWorkflow=function(e){n.currentWorkflow&&(n.workflows[n.currentWorkflow].graph=n.workflows[n.currentWorkflow].graph.filter((function(t){return t!==e})))},this.setSyncStatus=function(e,t){n.workflowSyncStatus[e]=t},this.addPlot=function(e){if(n.currentDatasetKey){var t=n.rootStore.actions.addPlotAction;t.setLabel("Add Plot");var r=n.state;n.provenance.apply(t(e)),r.plots[e.id]=e,n.stateRecord[n.currentNode]=r,n.rootStore.currentNodes.push(n.provenance.graph.current)}},this.removePlot=function(e){var t=n.rootStore.actions.removePlotAction;t.setLabel("Remove plot: ".concat(e.x," - ").concat(e.y));var r=n.state;n.provenance.apply(t(e)),delete r.plots[e.id],e.id in r.brushes&&delete r.brushes[e.id],e.id in r.pointSelection&&delete r.pointSelection[e.id],n.stateRecord[n.currentNode]=r,n.rootStore.currentNodes.push(n.provenance.graph.current)},this.filter=function(e){var t=n.rootStore.actions.filterAction;t.setLabel("Filter: ".concat(e));var r=n.state,c={type:e,points:n.selectedPoints};n.provenance.apply(t(e)),r.brushes={},r.brushSelections={},r.pointSelection={},r.prediction=null,r.filter=c,n.stateRecord[n.currentNode]=r,n.rootStore.currentNodes.push(n.provenance.graph.current)},this.switchBrush=function(e){n.brushType=e},this.setFreeformSelection=function(e,t){n.addPointSelection(e,t,!0)},this.addPointSelection=function(e,t){var r,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0!==t.length){var i=n.state,a=n.rootStore.actions.pointSelectionAction;a.setLabel(c?"P. Brush: ".concat(t.length):"Add Point Selection"),n.provenance.apply(a(e,t)),e.id in i.pointSelection||(i.pointSelection[e.id]=[]),(r=i.pointSelection[e.id]).push.apply(r,Object(k.a)(t)),n.stateRecord[n.currentNode]=i,n.rootStore.currentNodes.push(n.provenance.graph.current),n.addPredictions()}},this.setBrushSelection=function(e,t,r,c){var i=n.rootStore.actions,a=i.addBrushAction,o=i.updateBrushAction,s=i.removeBrushAction,l=n.state;switch(r){case"Add":a.setLabel("Added brush to: ".concat(e.x,"-").concat(e.y)),n.provenance.apply(a(e,t[c])),l.brushSelections[c]=t[c].points,l.brushes[e.id]=t;break;case"Update":o.setLabel("Updated brush in: ".concat(e.x,"-").concat(e.y)),n.provenance.apply(o(e,t[c])),l.brushSelections[c]=t[c].points,l.brushes[e.id]=t;break;case"Remove":s.setLabel("Removed brush in: ".concat(e.x,"-").concat(e.y)),n.provenance.apply(s(e,c)),delete l.brushSelections[c],delete t[c],l.brushes[e.id]=t}n.stateRecord[n.currentNode]=l,n.addPredictions()},this.setPredictionSelection=function(e){var t=n.rootStore.actions.predictionSelectionAction,r=n.state;e.original_id=n.currentDatasetKey||"",t.setLabel("".concat(e.intent," Selection")),n.provenance.apply(t(e)),r.brushes={},r.brushSelections={},r.pointSelection={},r.prediction=e,n.stateRecord[n.currentNode]=r,n.addPredictions()},this.setHoveredPrediction=function(e){n.hoveredPrediction=e},this.addPredictions=function(){n.hoveredPrediction=null;var e=[];0!==n.selectedPoints.length&&(n.isLoadingPredictions=!0,Object.values(n.state.plots).forEach((function(t){e.push.apply(e,[t.x,t.y])})),S.a.post("".concat(D,"/").concat(n.currentProject.key,"/dataset/predict/").concat(n.currentDatasetKey),{selections:n.selectedPoints,dimensions:e}).then(Object(p.action)((function(e){var t=e.data,r=void 0===t?[]:t;n.predictions=r,n.isLoadingPredictions=!1}))))},this.goToNode=function(e){n.provenance.goToNode(e)},this.rootStore=t,Object(p.makeAutoObservable)(this),Object(p.reaction)((function(){return n.state}),(function(){n.addPredictions()})),Object(p.reaction)((function(){return Object.values(n.provenance.graph.nodes).length}),(function(e,t){if(!n.isImporting&&(1!==t||2===e)){var r={};n.currentProject.datasets.forEach((function(e){r[e.key]=n.currentDatasetKey===e.key?"Accepted":"Unknown"})),n.provenance.addArtifact({original_dataset:n.currentDatasetKey,status_record:r})}}))}return Object(y.a)(e,[{key:"state",get:function(){return this.currentNode&&this.currentNode in this.stateRecord?C(this.stateRecord[this.currentNode]):{plots:{},brushes:{},brushSelections:{},pointSelection:{},prediction:null,filter:null}}},{key:"currentNode",get:function(){return this.provenance.current.id}},{key:"currentDatasetKey",get:function(){return this.rootStore.projectStore.currentDatasetKey}},{key:"currentDataset",get:function(){var e=this.rootStore.projectStore.loadedDataset;if(!e)throw new Error("Dataset not loaded");return e}},{key:"showSkylineLegend",get:function(){return this.hoveredPrediction&&"Skyline"===this.hoveredPrediction.intent}},{key:"showMatchesLegend",get:function(){return!!this.hoveredPrediction}},{key:"provenance",get:function(){return this.rootStore.provenance}},{key:"currentProject",get:function(){var e=this.rootStore.projectStore.currentProject;if(!e)throw new Error;return e}},{key:"n_plots",get:function(){return this.plots.length}},{key:"plots",get:function(){return Object.values(this.state.plots)}},{key:"selectedPoints",get:function(){var e=[],t=this.state.brushSelections;return Object.values(t).forEach((function(t){e.push.apply(e,Object(k.a)(t))})),Object.values(this.state.pointSelection).forEach((function(t){return e.push.apply(e,Object(k.a)(t))})),this.state.prediction&&e.push.apply(e,Object(k.a)(this.state.prediction.memberIds)),C(Array.from(new Set(e)))}},{key:"workingValues",get:function(){var e=this.state.filter;if(!e)return this.loadedDataset.values;var t=e.type,n=e.points;return"In"===t?this.loadedDataset.values.filter((function(e){return n.includes(e.id)})):this.loadedDataset.values.filter((function(e){return!n.includes(e.id)}))}},{key:"artifact",get:function(){var e=this.provenance.getLatestArtifact();return e?e.artifact:{original_dataset:null,status_record:{}}}},{key:"loadedDataset",get:function(){var e=this.rootStore.projectStore.loadedDataset;if(!e){var t=window.localStorage.getItem("dataset");if(!t)throw new Error("Dataset not loaded");return e=JSON.parse(t)}return window.localStorage.setItem("dataset",JSON.stringify(e)),e}},{key:"compDataset",get:function(){var e=this.rootStore.projectStore.comparisonDataset;if(!e){var t=window.localStorage.getItem("dataset");if(!t)throw new Error("Dataset not loaded");return e=JSON.parse(t)}return window.localStorage.setItem("dataset",JSON.stringify(e)),e}}]),e}(),P=n(8),z=n(24),A=function(){function e(t){var n=this;Object(f.a)(this,e),this.rootStore=void 0,this.currentProject=null,this.projects=[],this.comparisonDatasetKey=null,this.loadedDataset=null,this.workingDataset=null,this.comparisonDataset=null,this.currentDatasetKey=null,this.isReapplying=!1,this.versionFromDatasetKey=function(e){var t="";if(n.currentProject&&e){var r=n.currentProject.datasets.find((function(t){return t.key===e}));r&&(t=r.version)}return t},this.projectByKey=function(e){return n.projects.find((function(t){return t.key===e}))},this.fetchCurrentDataset=function(){n.currentProject&&n.currentDatasetKey&&S.a.get("".concat(D,"/").concat(n.currentProject.key,"/dataset/").concat(n.currentDatasetKey)).then(Object(p.action)((function(e){n.loadedDataset=e.data,n.workingDataset=e.data})))},this.approveNode=function(e){var t=(n.provenance.getLatestArtifact(e)||{}).artifact,r=void 0===t?null:t;r&&((r=C(r)).status_record[n.currentDatasetKey||""]="Accepted",n.provenance.addArtifact(r,e))},this.rejectNode=function(e){if(n.currentDatasetKey){var t=(n.provenance.getLatestArtifact(e)||{}).artifact,r=void 0===t?null:t;r&&((r=C(r)).status_record[n.currentDatasetKey||""]="Rejected",n.provenance.addArtifact(r,e),n.loadDatasetWithReapply(n.currentDatasetKey))}},this.loadProjects=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;S.a.get("".concat(D,"/project")).then(Object(p.action)((function(t){if(n.projects=t.data,!e&&n.rootStore.debug)n.loadProjectByKey(n.rootStore.defaultProject);else if(e){var r=n.projects.find((function(t){return t.key===e}));r&&n.loadProjectByKey(r.key)}})))},this.loadProjectByKey=function(e){var t=n.projectByKey(e);t&&(n.loadedDataset=null,n.rootStore.exploreStore=new M(n.rootStore),S.a.get("".concat(D,"/").concat(e,"/dataset")).then(Object(p.action)((function(e){if(n.currentProject=Object(z.a)(Object(z.a)({},t),{},{datasets:e.data}),n.rootStore.debug&&n.rootStore.loadDefaultDataset){var r=n.rootStore.defaultDatasetKey;r&&n.currentProject.datasets.map((function(e){return e.key})).includes(r)?n.loadDataset(r):n.loadDataset(n.currentProject.datasets[0].key)}}))).then((function(){n.rootStore.loadedWorkflowId?n.loadFromWorkflow():n.rootStore.loadSavedProject&&n.loadSavedProject()})))},this.loadComparisonDataset=function(e){n.currentProject&&S.a.get("".concat(D,"/").concat(n.currentProject.key,"/dataset/").concat(e)).then(Object(p.action)((function(t){n.comparisonDatasetKey=e,n.comparisonDataset=t.data})))},this.loadComparisonFilter=function(e){var t,r=null===(t=n.workingDataset)||void 0===t?void 0:t.values.filter((function(t){return e.includes(t.id)})),c=[];if(n.workingDataset&&r){n.workingDataset.values=r;var i,a=Object(v.a)(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;c.push(o.id)}}catch(s){a.e(s)}finally{a.f()}}return c},this.loadOnlyFilter=function(e){var t,r=(null===(t=n.workingDataset)||void 0===t?void 0:t.values.filter((function(t){return!e.includes(t.id)})))||[],c=[];if(n.workingDataset&&r){n.workingDataset.values=r;var i,a=Object(v.a)(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;c.push(o.id)}}catch(s){a.e(s)}finally{a.f()}}return c},this.loadDataset=function(e){n.currentDatasetKey=e},this.loadDatasetWithReapply=function(e){if(n.currentProject&&n.currentDatasetKey){n.isReapplying=!0;var t=n.provenance.graph;Object.entries(t.nodes).forEach((function(e){var r=Object(P.a)(e,2),c=r[0],i=r[1];Object(b.isChildNode)(i)&&(i.state=n.provenance.getState(i)),t.nodes[c]=i})),S.a.post("".concat(D,"/project/").concat(n.currentProject.key,"/reapply"),{base:n.currentDatasetKey,target:e,provenance:t}).then(Object(p.action)((function(t){n.currentDatasetKey=e,n.rootStore.exploreStore.stateRecord=t.data,setTimeout(Object(p.action)((function(){return n.isReapplying=!1})),200)})))}},this.rootStore=t,Object(p.makeAutoObservable)(this),this.loadProjects(),Object(p.reaction)((function(){return n.currentDatasetKey}),(function(){return n.fetchCurrentDataset()}))}return Object(y.a)(e,[{key:"loadFromWorkflow",value:function(){var e=this,t=this.rootStore.loadedWorkflowId;t&&function(e,t){return e.ref(t).once("value")}(this.rootStore.db,t).then(Object(p.action)((function(t){var n=t.val();if(e.rootStore.exploreStore.isImporting=!0,e.currentProject&&e.currentDatasetKey){var r=n.graph,c=Object(z.a)(Object(z.a)({},n),{},{graph:[]});for(var i in e.rootStore.exploreStore.workflows[c.id]=c,e.rootStore.exploreStore.setCurrentWorkflow(c.id),r.nodes)r.nodes[i].children||(r.nodes[i].children=[]);for(var a in e.provenance.importProvenanceGraph(r),e.loadDatasetWithReapply(e.currentDatasetKey),r.nodes)Object(b.isChildNode)(r.nodes[a])&&e.rootStore.exploreStore.addToWorkflow(a)}e.rootStore.exploreStore.isImporting=!1})))}},{key:"loadSavedProject",value:function(){var e=this,t=this.rootStore.loadSavedProject,n=this.currentDatasetKey;t&&n&&function(e,t){return e.ref(t).once("value")}(this.rootStore.provDb,t).then(Object(p.action)((function(t){var r=t.val(),c=r.graph,i=r.wf;for(var a in c.nodes)c.nodes[a].children||(c.nodes[a].children=[]);e.provenance.importProvenanceGraph(c),e.loadDatasetWithReapply(n),e.rootStore.exploreStore.workflows=i,Object.values(i).length>0&&(e.rootStore.exploreStore.currentWorkflow=Object.values(i)[0].id)})))}},{key:"provenance",get:function(){return this.rootStore.provenance}},{key:"loadedDatasetKey",get:function(){return this.currentDatasetKey||""}},{key:"nodeCreationMap",get:function(){var e=this,t={};return Object.values(this.provenance.graph.nodes).forEach((function(n){var r=e.provenance.getLatestArtifact(n.id);if(r){var c=r.artifact,i=c.original_dataset,a={createdIn:e.versionFromDatasetKey(i),approvedIn:Object.entries(c.status_record).filter((function(e){return"Accepted"===e[1]})).map((function(t){return e.versionFromDatasetKey(t[0])})),rejectedIn:Object.entries(c.status_record).filter((function(e){return"Rejected"===e[1]})).map((function(t){return e.versionFromDatasetKey(t[0])}))};t[n.id]=a}})),t}},{key:"compDatasetValues",get:function(){var e,t=this;return(null===(e=this.comparisonDataset)||void 0===e?void 0:e.values.filter((function(e){return!t.rootStore.compareStore.updatedFilterPoints.includes(e.id)})))||[]}}]),e}(),L=Object(b.createAction)((function(e,t){e.interaction={type:"AddPlot",plot:t}})).saveStateMode("Complete").setEventType("Add Plot"),W=Object(b.createAction)((function(e,t){e.interaction={type:"RemovePlot",plot:t.id}})).saveStateMode("Complete").setEventType("Add Plot"),B=Object(b.createAction)((function(e,t,n){e.interaction={type:"PointSelection",action:"Add",plot:t.id,selected:n}})).saveStateMode("Complete").setEventType("Point Selection"),F=Object(b.createAction)((function(e,t,n){e.interaction={type:"Brush",action:"Add",plot:t.id,brush:n}})).saveStateMode("Complete").setEventType("Add Brush"),E=Object(b.createAction)((function(e,t,n){e.interaction={type:"Brush",action:"Update",plot:t.id,brush:n}})).saveStateMode("Complete").setEventType("Update Brush"),G=Object(b.createAction)((function(e,t,n){e.interaction={type:"Brush",action:"Remove",plot:t.id,brush:n}})).saveStateMode("Complete").setEventType("Remove Brush"),R=Object(b.createAction)((function(e,t){e.interaction={type:"SelectPrediction",prediction:t}})).saveStateMode("Complete").setEventType("Prediction Selection"),I={addPlotAction:L,removePlotAction:W,filterAction:Object(b.createAction)((function(e,t){e.interaction={type:"Filter",filterType:t}})).saveStateMode("Complete").setEventType("Filter"),pointSelectionAction:B,predictionSelectionAction:R,addBrushAction:F,updateBrushAction:E,removeBrushAction:G},T=Object(i.createContext)(new function e(){var t=this;Object(f.a)(this,e),this.debug=!0,this.search="",this.defaultProject="cluster",this.loadDefaultDataset=!1,this.loadSavedProject=null,this.defaultDatasetKey=null,this.redirectPath=null,this.loadedWorkflowId=null,this.db=void 0,this.provDb=void 0,this.projectStore=void 0,this.exploreStore=void 0,this.compareStore=void 0,this.provenance=void 0,this.actions=I,this.currentNodes=void 0,this.bundledNodes=void 0,this.setQueryParams=function(e){if(t.search!==e){t.search=e;var n=new URLSearchParams(e),r=n.get("debug"),c=n.get("project"),i=n.get("data"),a=n.get("demo"),o=n.get("redirect"),s=n.get("workflow");t.debug=!!r||(!!s||!!a),t.defaultProject=c||(a||"cluster"),t.loadDefaultDataset=!(!i&&!a),t.defaultDatasetKey="true"!==i?i:null,t.loadSavedProject=a||null,t.loadedWorkflowId=s,t.redirectPath=s||a?"explore":o}},this.provenance=Object(b.initProvenance)({interaction:{type:"Root"}},{loadFromUrl:!1}),this.provenance.done(),this.projectStore=new A(this),this.exploreStore=new M(this),this.compareStore=new g(this),this.currentNodes=[],this.bundledNodes=[];var n=function(){var e=0===x.a.apps.length?x.a.initializeApp(O):x.a.app(),t=x.a.database(e),n=e.database("https://reusing-demos.firebaseio.com/");return{config:O,app:e,db:t,provDb:n}}(),r=n.db,c=n.provDb;this.db=r,this.provDb=c,Object(p.makeAutoObservable)(this,{actions:!1,provenance:!1})}),K=n(286),_=n(36),H=n(517),U=n(584),Y=n(166),V=n(128),X=n(77),J=n.n(X),Z=n(20);function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return"translate(".concat(e,", ").concat(t,")")}var Q=n(4),$=n(1),ee=Object(u.a)((function(){return Object(K.a)({base:{fill:"green",opacity:.1,stroke:"black",strokeWidth:2,cursor:"move","&:hover":{strokeWidth:5}},closeIconText:{fontWeight:"bolder",fontFamily:"FontAwesome",fontSize:"1.5rem",fill:"red"},closeIconBackground:{cursor:"pointer",fill:"#777",opacity:"0.1"},resizeBase:{pointerEvents:"all",fill:"none",stroke:"none"},ns:{cursor:"ns-resize"},ew:{cursor:"ew-resize"},nwse:{cursor:"nwse-resize"},nesw:{cursor:"nesw-resize"}})})),te=function(e){var t=e.id,n=e.x,r=e.y,c=e.height,a=e.width,o=e.onMouseDown,s=e.onResizeStart,l=e.closeHandler,d=e.resizeHandlerSize,u=void 0===d?10:d,j=Object(i.useState)(!1),b=Object(P.a)(j,2),h=b[0],f=b[1],p=Object(i.useState)(-1),x=Object(P.a)(p,2),O=x[0],m=x[1],v=ee(),y=v.base,g=v.resizeBase,k=v.ns,w=v.ew,S=v.nwse,C=v.nesw,N=v.closeIconText,D=v.closeIconBackground;Object(i.useEffect)((function(){return function(){return clearInterval(O)}}));var M=Object($.jsx)("rect",{className:y,height:c,width:a,onMouseDown:function(e){o(e,t)},onMouseEnter:function(){clearInterval(O),f(!0)},onMouseLeave:function(){var e=setTimeout((function(){f(!1)}),900);m(e)}}),z=Object($.jsx)("rect",{className:Object(Q.a)(g,k),height:u,width:a-u,x:u/2,y:-u/2,onMouseDown:function(){return s(t,"N")}}),A=Object($.jsx)("rect",{className:Object(Q.a)(g,k),height:u,width:a-u,x:u/2,y:c-u/2,onMouseDown:function(){return s(t,"S")}}),L=Object($.jsx)("rect",{className:Object(Q.a)(g,w),height:c-u,width:u,x:-u/2,y:u/2,onMouseDown:function(){return s(t,"W")}}),W=Object($.jsx)("rect",{className:Object(Q.a)(g,w),height:c-u,width:u,x:a-u/2,y:u/2,onMouseDown:function(){return s(t,"E")}}),B=Object($.jsx)("rect",{className:Object(Q.a)(g,S),height:u,width:u,x:-u/2,y:-u/2,onMouseDown:function(){return s(t,"NW")}}),F=Object($.jsx)("rect",{className:Object(Q.a)(g,C),height:u,width:u,x:a-u/2,y:-u/2,onMouseDown:function(){return s(t,"NE")}}),E=Object($.jsx)("rect",{className:Object(Q.a)(g,C),height:u,width:u,x:-u/2,y:c-u/2,onMouseDown:function(){return s(t,"SW")}}),G=Object($.jsx)("rect",{className:Object(Q.a)(g,S),height:u,width:u,x:a-u/2,y:c-u/2,onMouseDown:function(){return s(t,"SE")}});return Object($.jsxs)("g",{transform:q(n,r),children:[M,z,A,L,W,B,F,E,G,Object($.jsxs)("g",{display:h?"visible":"none",transform:q(a,-10),children:[Object($.jsx)("text",{className:N,dominantBaseline:"middle",dy:"1",textAnchor:"middle",children:"\uf05e"}),Object($.jsx)("circle",{className:D,fill:"none",r:"10",stroke:"black",onClick:function(){return l(t)}})]})]})};var ne=function(e){var t=e.left,n=e.right,r=e.top,c=e.bottom,a=e.brushes,o=e.xScale,s=e.yScale,l=e.data,d=e.onBrushHandler,u=e.disableBrush,j=void 0!==u&&u,b=Object(i.useRef)(null),h=Object(i.useState)(!1),f=Object(P.a)(h,2),p=f[0],x=f[1],O=Object(i.useState)(!1),m=Object(P.a)(O,2),v=m[0],y=m[1],g=Object(i.useState)(!1),k=Object(P.a)(g,2),w=k[0],S=k[1],C=Object(i.useState)(null),N=Object(P.a)(C,2),D=N[0],M=N[1],A=Object(i.useState)(null),L=Object(P.a)(A,2),W=L[0],B=L[1],F=Object(i.useState)(null),E=Object(P.a)(F,2),G=E[0],R=E[1],I=[Math.abs(r-c),Math.abs(t-n)],T=I[0],K=I[1],_=Object(i.useMemo)((function(){var e=s.copy().domain(s.domain()).range(s.range()),t=function(e){return o(e)},n=function(t){return e(t)},r=function(e){return o.invert(e)},c=function(t){return e.invert(t)};return{dataX:r,dataY:c,pixelX:t,pixelY:n,extentToPixel:function(e){var r=e.x1,c=e.x2,i=e.y1,a=e.y2;return{x1:t(r),x2:t(c),y1:n(i),y2:n(a)}},extentToData:function(e){var t=e.x1,n=e.y1,i=e.x2,a=e.y2;return{x1:r(t),x2:r(i),y1:c(n),y2:c(a)}}}}),[o,s]),H=_.pixelX,U=_.pixelY,Y=_.extentToData,V=_.extentToPixel,X=function(e,t,n,r){var c=e.left,a=e.top,o=e.right,s=e.bottom,l=Object(i.useMemo)((function(){return Object(Z.g)().extent([[c-1,a-1],[o+1,s+1]]).x((function(e){return n(e.x)})).y((function(e){return r(e.y)})).addAll(t)}),[c,a,o,s,t,n,r]);return{search:function(e,t,c,i){var a=[];return l.visit((function(o,s,l,d,u){var j,b,h,f;if(b=[[s,l],[d,u]],!((j=[[e,t],[c,i]])[0][0]<=b[1][0]&&b[0][0]<=j[1][0]&&j[0][1]<=b[1][1]&&b[0][1]<=j[1][1]))return!0;if(!o.length){var p=o;do{var x=p.data;f=[n(x.x),r(x.y)],(h=[[e,t],[c,i]])[0][0]<=f[0]&&f[0]<=h[1][0]&&h[0][1]<=f[1]&&f[1]<=h[1][1]&&a.push(x.id)}while(p=p.next)}return!1})),a}}}({left:t,top:r,right:n,bottom:c},l,o,s).search,J=Object(i.useCallback)((function(e,t,n){if(!j){var r={};Object.values(e).forEach((function(e){var t=e.extents,n=t.x1,c=t.x2,i=t.y1,a=t.y2,o=X(H(n),U(a),H(c),U(i));r[e.id]=o})),d(r,e,t,n)}}),[d,X,j,H,U]),q=Object(i.useCallback)((function(e){if(!a[e])throw new Error("Brush does not exist");delete a[e],J(Object(z.a)({},a),"Remove",e)}),[a,J]),Q=Object(i.useCallback)((function(e){var t=e.currentTarget.getBoundingClientRect(),n=Y({x1:e.clientX-t.left,x2:e.clientX-t.left,y1:e.clientY-t.top,y2:e.clientY-t.top}),r={id:"brush".concat((new Date).getTime().toString()),extents:n};x(!0),B(r)}),[Y]),ee=Object(i.useCallback)((function(e){var t=b.current;if(t&&W){var n=t.getBoundingClientRect(),r=n.left,c=n.top,i=V(W.extents),a=i.x1,o=i.y2,s=e.clientX-r,l=e.clientY-c;W.extents=Y({x1:a,x2:s,y1:l,y2:o}),B(Object(z.a)({},W))}}),[W,Y,V]),ne=Object(i.useCallback)((function(){if(W){var e=W.extents,t=e.x1,n=e.x2,r=e.y1,c=e.y2;if(!(Math.abs(t-n)<1e-5||Math.abs(r-c)<1e-5)){if(t>n){var i=[n,t];t=i[0],n=i[1]}if(r>c){var o=[c,r];r=o[0],c=o[1]}W.extents=re({x1:t,x2:n,y1:r,y2:c}),a[W.id]=W,J(Object(z.a)({},a),"Add",W.id)}B(null),x(!1)}}),[W,a,J]),ce=Object(i.useCallback)((function(e,t){var n=b.current;if(n&&!p){var r=a[t];if(!r)throw new Error("Something went wrong! Brush does not exist.");var c=n.getBoundingClientRect(),i=c.left,o=c.top,s=V(r.extents),l=s.x1,d=s.y2,u=e.clientX-i,j=e.clientY-o,h=[Math.abs(u-l),Math.abs(j-d)];R({x:h[0],y:h[1]}),B(r),y(!0)}}),[a,p,V]),ie=Object(i.useCallback)((function(e){var t=b.current;if(t&&W&&G){var n=V(W.extents),r=n.x1,c=n.x2,i=n.y1,a=n.y2,o=[Math.abs(a-i),Math.abs(c-r)],s=o[0],l=o[1],d=G.x,u=G.y,j=t.getBoundingClientRect(),h=j.left,f=j.top,p=e.clientX-h-d,x=e.clientY-f-u;p<0&&(p=0),p+l>K&&(p=K-l),x<0&&(x=0),x+s>T&&(x=T-s),r=p,c=p+l,a=x,i=x+s,B(Object(z.a)(Object(z.a)({},W),{},{extents:Y({x1:r,x2:c,y1:i,y2:a})}))}}),[W,G,V,Y,T,K]),ae=Object(i.useCallback)((function(){W&&(a[W.id]=W,J(Object(z.a)({},a),"Update",W.id),B(null),y(!1))}),[W,a,J]),oe=Object(i.useCallback)((function(e,t){var n=a[e];if(!n)throw new Error("Something went wrong! Brush does not exist.");B(n),S(!0),M(t)}),[a]),se=Object(i.useCallback)((function(e){var t=b.current;if(t&&W&&D){var n=t.getBoundingClientRect(),r=n.left,c=n.top,i=V(W.extents),a=i.x1,o=i.x2,s=i.y1,l=i.y2;switch(D){case"N":l=e.clientY-c;break;case"S":s=e.clientY-c;break;case"W":a=e.clientX-r;break;case"E":o=e.clientX-r;break;case"NW":a=e.clientX-r,l=e.clientY-c;break;case"NE":l=e.clientY-c,o=e.clientX-r;break;case"SW":a=e.clientX-r,s=e.clientY-c;break;case"SE":s=e.clientY-c,o=e.clientX-r;break;default:throw new Error("Wrong Resize Direction")}W.extents=Y({x1:a,x2:o,y1:s,y2:l}),B(Object(z.a)({},W))}}),[W,D,V,Y]),le=Object(i.useCallback)((function(){W&&(W.extents=re(W.extents),a[W.id]=W,J(Object(z.a)({},a),"Update",W.id),B(null),M(null),S(!1))}),[W,a,J]);Object(i.useEffect)((function(){if(p||v||w)return p&&(window.addEventListener("mousemove",ee),window.addEventListener("mouseup",ne)),v&&(window.addEventListener("mousemove",ie),window.addEventListener("mouseup",ae)),w&&(window.addEventListener("mousemove",se),window.addEventListener("mouseup",le)),function(){p&&(window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",ne)),v&&(window.removeEventListener("mousemove",ie),window.removeEventListener("mouseup",ae)),w&&(window.removeEventListener("mousemove",se),window.removeEventListener("mouseup",le))}}),[p,ee,ne,v,ie,ae,w,le,se]);var de=Object(i.useCallback)((function(){if(!W)return Object($.jsx)("g",{});var e=re(V(W.extents)),t=e.x1,n=e.x2,r=e.y1,c=e.y2;return Object($.jsx)(te,{closeHandler:q,height:c-r,id:W.id,width:n-t,x:t,y:r,onMouseDown:ce,onResizeStart:oe})}),[W,ce,oe,q,V]),ue=Object($.jsx)("rect",{ref:b,cursor:j?"default":"crosshair",fill:"none",height:T,pointerEvents:j?"none":"all",width:K,onMouseDown:Q}),je=Object.values(a);W&&(je=je.filter((function(e){return e.id!==W.id})));var be=Object($.jsxs)("g",{children:[de(),Object.values(je).map((function(e){var t=V(e.extents),n=t.x1,r=t.x2,c=t.y1,i=t.y2;return Object($.jsx)(te,{closeHandler:q,height:c-i,id:e.id,width:r-n,x:n,y:i,onMouseDown:ce,onResizeStart:oe},e.id)}))]}),he=p?[be,ue]:[ue,be],fe=Object(P.a)(he,2),pe=fe[0],xe=fe[1];return Object($.jsxs)("g",{id:"brush-component",children:[pe,xe]})};function re(e){var t=e.x1,n=e.x2,r=e.y1,c=e.y2;if(n<t){var i=[n,t];t=i[0],n=i[1]}if(c<r){var a=[c,r];r=a[0],c=a[1]}return{x1:t,x2:n,y1:r,y2:c}}var ce=n(238),ie="rgb(254, 95, 85)",ae="rgb(89, 205, 144)",oe="rgb(250, 192, 94)",se="rgb(244,106,15)",le=Object(u.a)({newColor:{stroke:"blue !important",fill:"blue !important"},removedColor:{stroke:"red !important"},newMark:{strokeWidth:"1",fill:"black"},removedMark:{stroke:"black",strokeWidth:"3",strokeLinecap:"round",fill:"black"},movedLine:{opacity:"0.2 !important",stroke:"black",fill:"black",strokeWidth:"1",strokeLinecap:"round"},movedPoint:{fill:"gray !important"},regularMark:{fill:"black"},nonUnionMark:{fill:"rgb(44, 127, 184)"},unionMark:{fill:se,stroke:se},regularForceMark:{fill:"black !important",opacity:.2},intermittentHighlight:{fill:"red"},matches:{fill:"".concat(ie," !important"),opacity:1},isnp:{fill:"".concat(oe," !important"),opacity:1},ipns:{fill:"".concat(ae," !important"),opacity:1}});function de(e,t,n,r){var c=Math.atan((e-t)/(n-r)),i=4.5*Math.cos(c),a=4.5*Math.sin(c);return"M ".concat(t+i," ").concat(r-a," \n  L ").concat(e," ").concat(n," \n  L ").concat(t-i," ").concat(r+a,"\n  z")}var ue=Object(h.a)((function(e){var t=e.points,n=e.selectedPoints,r=e.xScale,c=e.yScale,a=e.compPoints,o=e.dataDisplay,s=le(),l=Object(i.useContext)(T).compareStore.updatedFilterPoints;return a&&"Original"!==o?"AddedOnly"===o?Object($.jsx)($.Fragment,{children:a.filter((function(e){return 0===t.filter((function(t){return t.label===e.label})).length&&!l.includes(e.id)})).map((function(e){return Object($.jsx)("g",{className:"marks ".concat(s.newMark," ").concat(n.includes(e.id)?s.unionMark:s.regularMark," ").concat(0===n.length?s.newColor:""),id:"mark".concat(e.id),opacity:"0.5",transform:"translate(".concat(r(e.x)-5,", ").concat(c(e.y)-5,")"),children:Object($.jsx)("polygon",{points:"0 0, 5 10, 10 0"})},e.label)}))}):"ChangedOnly"===o?Object($.jsx)($.Fragment,{children:t.map((function(e){if(null!==a){var t=a.filter((function(t){return t.label===e.label&&(t.x!==e.x||t.y!==e.y)}));if(t.length>0)return Object($.jsxs)("g",{children:[Object($.jsx)("path",{className:"marks ".concat(s.movedLine," ").concat(n.includes(e.id)?s.unionMark:s.regularMark),d:de(r(e.x),r(t[0].x),c(e.y),c(t[0].y)),style:{opacity:"0.4"}}),Object($.jsx)("circle",{className:"marks ".concat(s.movedPoint," ").concat(n.includes(e.id)?s.unionMark:s.regularMark),cx:r(e.x),cy:c(e.y),id:"mark".concat(e.id),opacity:".2",r:"5"},e.label),Object($.jsx)("circle",{className:"marks ".concat(s.movedPoint," ").concat(n.includes(t[0].id)?s.unionMark:s.regularMark),cx:r(t[0].x),cy:c(t[0].y),id:"mark".concat(e.id),opacity:"1",r:"5"},t[0].label+"2")]})}return null}))}):"RemovedOnly"===o?Object($.jsx)($.Fragment,{children:t.map((function(e){return null!==a&&0===a.filter((function(t){return t.label===e.label})).length?Object($.jsxs)("g",{className:"marks ".concat(s.removedMark," ").concat(n.includes(e.id)?s.unionMark:s.regularMark," ").concat(0===n.length?s.removedColor:""),id:"mark".concat(e.id),opacity:"0.5",transform:"translate(".concat(r(e.x)-3,", ").concat(c(e.y)-3,")"),children:[Object($.jsx)("line",{x2:"6",y2:"6"}),Object($.jsx)("line",{x1:"6",y2:"6"})]},e.id):Object($.jsx)("g",{},e.id)}))}):"Comparison"===o?Object($.jsx)($.Fragment,{children:a.map((function(e){return Object($.jsx)("circle",{className:"marks ".concat(n.includes(e.id)?s.unionMark:s.regularMark),cx:r(e.x),cy:c(e.y),id:"mark".concat(e.id),opacity:"0.5",r:"5"},e.label)}))}):"Diff"===o?Object($.jsxs)($.Fragment,{children:[t.map((function(e){if(null!==a&&0===a.filter((function(t){return t.label===e.label})).length)return Object($.jsxs)("g",{className:"marks ".concat(s.removedMark," ").concat(n.includes(e.id)?s.unionMark:s.regularMark," ").concat(0===n.length?s.removedColor:""),id:"mark".concat(e.id),opacity:"0.5",transform:"translate(".concat(r(e.x)-3,", ").concat(c(e.y)-3,")"),children:[Object($.jsx)("line",{x2:"6",y2:"6"}),Object($.jsx)("line",{x1:"6",y2:"6"})]},e.label);if(null!==a){var t=a.filter((function(t){return t.label===e.label&&(t.x!==e.x||t.y!==e.y)}));if(t.length>0)return Object($.jsxs)("g",{children:[Object($.jsx)("path",{className:"marks ".concat(s.movedLine," ").concat(n.includes(e.id)?s.unionMark:s.regularMark),d:de(r(e.x),r(t[0].x),c(e.y),c(t[0].y)),style:{opacity:"0.4"}}),Object($.jsx)("g",{className:"marks ".concat(s.movedPoint," ").concat(n.includes(e.id)?s.unionMark:s.regularMark),id:"mark".concat(e.id),opacity:"0.5",transform:"translate(".concat(r(e.x)-5,", ").concat(c(e.y)-5,")"),children:Object($.jsx)("polygon",{points:"0 5, 5 10, 10 5, 5 0"})},e.label),Object($.jsx)("g",{className:"marks ".concat(s.movedPoint," ").concat(n.includes(e.id)?s.unionMark:s.regularMark),id:"mark".concat(t[0].id),opacity:"0.5",transform:"translate(".concat(r(t[0].x)-5,", ").concat(c(t[0].y)-5,")"),children:Object($.jsx)("polygon",{points:"0 5, 5 10, 10 5, 5 0"})},t[0].label+"2")]})}return Object($.jsx)("circle",{className:"marks ".concat(n.includes(e.id)?s.unionMark:s.regularMark),cx:r(e.x),cy:c(e.y),id:"mark".concat(e.id),opacity:"0.1",r:"5"},e.label)})),a.filter((function(e){return 0===t.filter((function(t){return t.label===e.label})).length&&!l.includes(e.id)})).map((function(e){return Object($.jsx)("g",{className:"marks ".concat(s.newMark," ").concat(n.includes(e.id)?s.unionMark:s.regularMark," ").concat(0===n.length?s.newColor:""),id:"mark".concat(e.id),opacity:"0.5",transform:"translate(".concat(r(e.x)-5,", ").concat(c(e.y)-5,")"),children:Object($.jsx)("polygon",{points:"0 0, 5 10, 10 0"})},e.label)}))]}):Object($.jsxs)($.Fragment,{children:[t.map((function(e){if(null!==a&&0===a.filter((function(t){return t.label===e.label})).length)return Object($.jsx)(ce.a,{title:Object($.jsx)("pre",{children:JSON.stringify(e,null,2)}),children:Object($.jsxs)("g",{className:"marks ".concat(s.removedMark," ").concat(n.includes(e.id)?s.unionMark:s.regularMark," ").concat(0===n.length?s.removedColor:""),id:"mark".concat(e.id),opacity:"0.5",transform:"translate(".concat(r(e.x)-3,", ").concat(c(e.y)-3,")"),children:[Object($.jsx)("line",{x2:"6",y2:"6"}),Object($.jsx)("line",{x1:"6",y2:"6"})]},e.label)},e.label);if(null!==a){var t=a.filter((function(t){return t.label===e.label&&(t.x!==e.x||t.y!==e.y)}));if(t.length>0)return Object($.jsx)(ce.a,{title:Object($.jsx)("pre",{children:JSON.stringify(e,null,2)}),children:Object($.jsxs)("g",{children:[Object($.jsx)("path",{className:"marks ".concat(s.movedLine," ").concat(n.includes(e.id)?s.unionMark:s.regularMark),d:de(r(e.x),r(t[0].x),c(e.y),c(t[0].y)),style:{opacity:"0.4"}}),Object($.jsx)("circle",{className:"marks ".concat(s.movedPoint," ").concat(n.includes(e.id)?s.unionMark:s.regularMark),cx:r(e.x),cy:c(e.y),id:"mark".concat(e.id),opacity:".2",r:"5"},e.label),Object($.jsx)("circle",{className:"marks ".concat(s.movedPoint," ").concat(n.includes(t[0].id)?s.unionMark:s.regularMark),cx:r(t[0].x),cy:c(t[0].y),id:"mark".concat(e.id),opacity:"1",r:"5"},t[0].label+"2")]})},e.label)}return Object($.jsx)(ce.a,{title:Object($.jsx)("pre",{children:JSON.stringify(e,null,2)}),children:Object($.jsx)("circle",{className:"marks ".concat(n.includes(e.id)?s.unionMark:s.regularMark),cx:r(e.x),cy:c(e.y),id:"mark".concat(e.id),opacity:"0.5",r:"5"},e.label)},e.label)})),a.filter((function(e){return 0===t.filter((function(t){return t.label===e.label})).length&&!l.includes(e.id)})).map((function(e){return Object($.jsx)(ce.a,{title:Object($.jsx)("pre",{children:JSON.stringify(e,null,2)}),children:Object($.jsx)("g",{className:"marks ".concat(s.newMark," ").concat(n.includes(e.id)?s.unionMark:s.regularMark," ").concat(0===n.length?s.newColor:""),id:"mark".concat(e.id),opacity:"0.5",transform:"translate(".concat(r(e.x)-5,", ").concat(c(e.y)-5,")"),children:Object($.jsx)("polygon",{points:"0 0, 5 10, 10 0"})},e.label)},e.label)}))]}):Object($.jsx)($.Fragment,{children:t.map((function(e){return Object($.jsx)(ce.a,{title:Object($.jsx)("pre",{children:JSON.stringify(e,null,2)}),children:Object($.jsx)("circle",{className:"marks ".concat(n.includes(e.id)?s.unionMark:s.regularMark," "),cx:r(e.x),cy:c(e.y),id:"mark".concat(e.id),opacity:"0.5",r:"5"},e.label)},e.id)}))})})),je=Object(u.a)((function(){return{brushStyle:{cursor:"grabbing",stroke:"gray",opacity:1,transition:"opacity 0.5s"},brushDown:{stroke:"rgb(244, 106, 15)"},brushHide:{opacity:0,transition:"opacity 0.5s"}}}));function be(e,t,n){var r=Math.pow(n.x-e.x,2),c=Math.pow(n.y-e.y,2);return Math.sqrt(r+c)<=t}var he=Object(h.a)((function(e){var t=e.left,n=void 0===t?0:t,r=e.right,c=void 0===r?0:r,a=e.top,o=void 0===a?0:a,s=e.bottom,l=void 0===s?0:s,d=e.extentPadding,u=void 0===d?0:d,j=e.onBrush,b=e.xScale,h=e.yScale,f=e.brushSize,p=void 0===f?20:f,x=e.data,O=void 0===x?[]:x,m=je(),v=m.brushStyle,y=m.brushDown,g=m.brushHide,w=Object(i.useRef)(null),S=Object(i.useRef)(null),C=Object(i.useRef)([]),N=p||20,D=Object(i.useState)(!1),M=Object(P.a)(D,2),z=M[0],A=M[1],L=Object(i.useState)(!1),W=Object(P.a)(L,2),B=W[0],F=W[1],E=[Math.abs(l+u-(o-u)),Math.abs(n-u-(c+u))],G=E[0],R=E[1],I=function(e,t,n,r){var c=e.left,a=e.top,o=e.width,s=e.height,l=Object(i.useMemo)((function(){return Object(Z.g)().extent([[c-1,a-1],[o+1,s+1]]).x((function(e){return n(e.x)})).y((function(e){return r(e.y)})).addAll(t)}),[c,a,o,s,t,n,r]);return{search:function(e,t,c){var i=e-c,a=e+c,o=t-c,s=t+c,d=[];return l.visit((function(l,u,j,b,h){if(!l.length){var f=l;do{var p=f,x=p.data,O=p.data,m=O.x,v=O.y;be({x:e,y:t},c,{x:n(m),y:r(v)})&&d.push(x.id)}while(f=f.next)}return u>=a||j>=s||b<i||h<o})),d}}}({left:n,top:o,width:R,height:G},O,b,h).search;function T(){S.current&&(j(Array.from(new Set(C.current)),"End","Selection"),C.current=[]),F(!1)}function K(e){if(z){var t=w.current,n=S.current;if(t&&n){var r=n.getBoundingClientRect(),c=e.clientX-r.left,i=e.clientY-r.top,a=Object(Z.i)(t),o=i+N>=G+10||i-N<=-10;if(c+N>=R+10||c-N<=-10||a.attr("cx",c),o||a.attr("cy",i),B){var s,l=I(c,i,N);(s=C.current).push.apply(s,Object(k.a)(l)),j(l,"Brushing","Selection")}}}}function _(){window.removeEventListener("mousemove",K),window.removeEventListener("mouseup",T)}return Object(i.useEffect)((function(){return window.addEventListener("mousemove",K),window.addEventListener("mouseup",T),_})),Object($.jsxs)("g",{transform:q(-u,-u),onMouseDown:function(e){var t=S.current;if(t){var n=t.getBoundingClientRect(),r=e.clientX-n.left,c=e.clientY-n.top,i=I(r,c,N);C.current=i,j(i,"Start","Selection")}F(!0)},onMouseEnter:function(){return A(!0)},onMouseLeave:function(){B||A(!1)},children:[Object($.jsx)("rect",{ref:S,fill:"none",height:G,pointerEvents:"all",width:R}),Object($.jsx)("circle",{ref:w,className:"".concat(v," ").concat(B?y:""," ").concat(z?"":g),fill:"none",pointerEvents:B?"all":"initial",r:N,strokeWidth:"2"})]})}));function fe(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Object(P.a)(e,2),c=r[0],a=r[1],o=Object(P.a)(t,2),s=o[0],l=o[1],d=Object(i.useMemo)((function(){var e=Object(Z.h)().domain([c,a]).range([s,l]).clamp(!0);return n&&e.nice(),e}),[c,a,s,l,n]);return d}function pe(e,t,n,r){var c=Object(i.useContext)(T).exploreStore,a=c.compDataset,o=c.loadedDataset,s=c.workingValues,l=Object(i.useContext)(T).projectStore.compDatasetValues;return Object(i.useMemo)((function(){var c,i;return r?(c=l.map((function(r){return{id:r.id,x:r[e],y:r[t],label:r[n]}}))||[],i=(null===a||void 0===a?void 0:a.values.map((function(r){return{id:r.id,x:r[e],y:r[t],label:r[n]}})))||[]):(c=s.map((function(r){return{id:r.id,x:r[e],y:r[t],label:r[n]}}))||[],i=o.values.map((function(r){return{id:r.id,x:r[e],y:r[t],label:r[n]}}))||[]),{points:c,x_extents:Object(Z.e)(i.map((function(e){return e.x}))),y_extents:Object(Z.e)(i.map((function(e){return e.y})))}}),[l,r,e,t,n,s,o,a])}var xe=Object(h.a)((function(e){var t=e.scale,n=e.transform,r=void 0===n?"":n,c=e.type,a=e.columnName,o=Object(i.useRef)(null),s=Object(i.useContext)(T).exploreStore.loadedDataset.columnInfo,l=Object(i.useMemo)((function(){var e=null;switch(c){case"left":e=Object(Z.b)(t);break;case"right":e=Object(Z.c)(t);break;case"bottom":e=Object(Z.a)(t);break;case"top":e=Object(Z.d)(t)}return e.tickFormat((function(e){return e>=1e6?"".concat(e.toString()[0],"e").concat(e.toString().length-1):e>=5e5?"".concat(e/1e5,"M"):e>=1e3?"".concat(e/1e3,"K"):e.toString()})),e}),[t,c]);Object(i.useEffect)((function(){var e=o.current;e&&Object(Z.i)(e).call(l)}),[l]);var d=Object(i.useMemo)((function(){switch(c){case"bottom":return q(Math.max.apply(Math,Object(k.a)(t.range()))/2,35);case"top":return q(Math.max.apply(Math,Object(k.a)(t.range()))/2,-35);case"left":return"".concat(q(-40,Math.max.apply(Math,Object(k.a)(t.range()))/2),"rotate(270)");case"right":return"".concat(q(40,Math.max.apply(Math,Object(k.a)(t.range()))/2),"rotate(90)")}}),[t,c]),u=s[a];return Object($.jsxs)("g",{transform:r,children:[Object($.jsx)("g",{ref:o}),Object($.jsxs)("text",{dominantBaseline:"middle",textAnchor:"middle",transform:d,children:[Object($.jsx)("tspan",{children:u.short})," ",Object($.jsx)("tspan",{children:"|"})," ",Object($.jsx)("tspan",{children:u.fullname})," ",u.unit&&Object($.jsxs)("tspan",{children:["(",u.unit,")"]})]})]})})),Oe=Object(h.a)((function(e){var t=e.offset,n=void 0===t?0:t;return Object($.jsxs)("g",{transform:q(n,-10),children:[Object($.jsxs)("g",{transform:q(0,20),children:[Object($.jsx)("circle",{fill:ie,r:"5"}),Object($.jsx)("text",{dominantBaseline:"middle",dx:"10",children:"Matches"})]}),Object($.jsxs)("g",{transform:q(0,40),children:[Object($.jsx)("circle",{fill:ae,r:"5"}),Object($.jsx)("text",{dominantBaseline:"middle",dx:"10",children:"Not Selected"})]}),Object($.jsxs)("g",{transform:q(0,60),children:[Object($.jsx)("circle",{fill:oe,r:"5"}),Object($.jsx)("text",{dominantBaseline:"middle",dx:"10",children:"Not Predicted"})]})]})})),me=n(29),ve=Object(h.a)((function(e){var t=e.points,n=e.selectedPoints,r=e.xScale,c=e.yScale,a=Object(i.useContext)(T).exploreStore.hoveredPrediction,o=le(),s=(null===a||void 0===a?void 0:a.membership)||{},l=s.matches,d=void 0===l?[]:l,u=s.isnp,j=void 0===u?[]:u,b=s.ipns,h=void 0===b?[]:b;return Object($.jsx)($.Fragment,{children:t.map((function(e){var t;return Object($.jsx)(ce.a,{title:Object($.jsx)("pre",{children:JSON.stringify(e,null,2)}),children:Object($.jsx)("circle",{className:Object(Q.a)("marks",(t={},Object(me.a)(t,o.unionMark,n.includes(e.id)),Object(me.a)(t,o.regularMark,!n.includes(e.id)),Object(me.a)(t,o.regularForceMark,!!a),Object(me.a)(t,o.matches,d.includes(e.id)),Object(me.a)(t,o.isnp,j.includes(e.id)),Object(me.a)(t,o.ipns,h.includes(e.id)),t)),cx:r(e.x),cy:c(e.y),id:"mark".concat(e.id),opacity:"0.5",r:"5"},e.label)},e.id)}))})})),ye=Object(h.a)((function(e){var t=e.info,n=e.xScale,r=e.yScale,c=Object(i.useMemo)((function(){return Object(Z.f)().x((function(e){return n(e[0])})).y((function(e){return r(e[1])}))}),[n,r]);return Object($.jsx)("g",{children:Object($.jsx)("path",{d:c(t.hull)||"",fill:"gray",opacity:"0.3",stroke:"black"})})})),ge=Object(h.a)((function(e){var t=e.info,n=e.xScale,r=e.yScale,c=t.selected_center,a=Object(Z.k)().type(Z.r).size(64),o=Object(i.useMemo)((function(){return Object(Z.f)().x((function(e){return n(e[0])})).y((function(e){return r(e[1])}))}),[n,r]);return Object($.jsxs)("g",{children:[Object($.jsx)("path",{d:a()||"",fill:"blue",opacity:"0.8",transform:q(n(c[0]),r(c[1]))}),Object($.jsx)("path",{d:o(t.hull)||"",fill:"gray",opacity:"0.3",stroke:"black"})]})})),ke=Object(h.a)((function(e){var t=e.info,n=e.xScale,r=e.yScale,c=Object(i.useMemo)((function(){var e=t.coeff,c=t.intercept,i=t.threshold,a=n.copy().clamp(!1),o=r.copy().clamp(!1),s=n.domain(),l=Object(P.a)(s,2),d=l[0],u=l[1],j=n.domain().map((function(t){return t*e[0]+c})),b=Object(P.a)(j,2),h=b[0],f=b[1],p=n.domain().map((function(t){return t*e[0]+c-5*i})),x=Object(P.a)(p,2),O=x[0],m=x[1],v=n.domain().map((function(t){return t*e[0]+c+5*i})),y=Object(P.a)(v,2),g=y[0],k=y[1],w=[a(d),a(u),o(h),o(f),o(O),o(m),o(g),o(k)];return{x1:d=w[0],x2:u=w[1],y1:h=w[2],y2:f=w[3],oy1:O=w[4],oy2:m=w[5],ooy1:g=w[6],ooy2:k=w[7]}}),[n,r,t]),a=c.x1,o=c.x2,s=c.y1,l=c.y2,d=c.oy1,u=c.oy2,j=c.ooy1,b=c.ooy2;return Object($.jsxs)("g",{clipPath:"url(#clip)",children:[Object($.jsx)("line",{opacity:"0.4",stroke:"black",strokeWidth:"5px",x1:a,x2:o,y1:s,y2:l}),Object($.jsx)("line",{opacity:"0.2",stroke:"black",strokeWidth:"2px",x1:a,x2:o,y1:d,y2:u}),Object($.jsx)("line",{opacity:"0.2",stroke:"black",strokeWidth:"2px",x1:a,x2:o,y1:j,y2:b})]})})),we=function(){return Object($.jsx)("defs",{children:Object($.jsx)("pattern",{height:"4",id:"pattern",patternTransform:"rotate(45)",patternUnits:"userSpaceOnUse",width:"4",children:Object($.jsx)("rect",{fill:"black",height:"4",opacity:"0.5",transform:"translate(0,0)",width:"2"})})})},Se=Object(u.a)((function(){return{lineBase:{strokeWidth:2,strokeOpacity:.3},line:{stroke:"black"},hatch:{strokeWidth:5,stroke:"url(#pattern)"}}})),Ce=Object(h.a)((function(e){var t=e.info,n=e.xScale,r=e.yScale,c=Se(),a=t.frontier,o=Object(P.a)(t.sense,2),s=o[0],l=o[1],d=Object(i.useMemo)((function(){return{scaled_frontier:a.map((function(e){return{x:n(e[0]),y:r(e[1])}}))}}),[n,r,a]).scaled_frontier,u=Object(i.useMemo)((function(){return{x_lines:Object($.jsx)("g",{className:"frontier-x",children:Object(k.a)(d).sort((function(e,t){return"max"===s?e.x-t.x:t.x-e.x})).map((function(e,t,r){var a="".concat(e.x,"-").concat(e.y),o=0,l=0,d=0,u=0;0===t?(o="max"===s?n.range()[0]:e.x,l="max"===s?e.x:n.range()[1],d=e.y,u=e.y):(o=r[t-1].x,l=e.x,d=e.y,u=e.y);return Object($.jsxs)(i.Fragment,{children:[Object($.jsx)("line",{className:Object(Q.a)(c.lineBase,c.line),x1:o,x2:l,y1:d,y2:u}),Object($.jsx)("line",{className:Object(Q.a)(c.lineBase,c.hatch),transform:q(0,5),x1:o,x2:l,y1:d,y2:u})]},a)}))}),y_lines:Object($.jsx)("g",{children:Object(k.a)(d).sort((function(e,t){return"max"===l?e.y-t.y:t.y-e.y})).map((function(e,t,n){var a="".concat(e.x,"-").concat(e.y),o=0,s=0,d=0,u=0;if(t===n.length-1)o=e.x,s=e.x,d="max"===l?e.y:r.range()[1],u="max"===l?r.range()[0]:e.y;else{var j=n[t+1];o=e.x,s=e.x,d=e.y,u=j.y}return Object($.jsxs)(i.Fragment,{children:[Object($.jsx)("line",{className:Object(Q.a)(c.lineBase,c.line),x1:o,x2:s,y1:d,y2:u}),Object($.jsx)("line",{className:Object(Q.a)(c.lineBase,c.hatch),transform:q(-5,0),x1:o,x2:s,y1:d,y2:u})]},a)}))})}}),[d,s,l,n,r,c]),j=u.x_lines,b=u.y_lines;return Object($.jsxs)("g",{children:[Object($.jsx)(we,{}),j,b]})})),Ne=Object(h.a)((function(e){var t=e.prediction,n=e.xScale,r=e.yScale,c=t.info;switch(t.algorithm){case"DBScan":switch(t.intent){case"Cluster":return Object($.jsx)(ye,{info:c,xScale:n,yScale:r})}break;case"KMeans":return Object($.jsx)(ge,{info:c,xScale:n,yScale:r});case"BNL":return Object($.jsx)(Ce,{info:c,xScale:n,yScale:r});case"LR":return Object($.jsx)(ke,{info:c,xScale:n,yScale:r})}return Object($.jsx)($.Fragment,{})})),De=n(127),Me=Object(u.a)((function(){return{lineBase:{strokeWidth:2,strokeOpacity:.3},line:{stroke:"black"},hatch:{strokeWidth:5,stroke:"url(#pattern)"}}})),Pe=Object(h.a)((function(e){var t=e.height,n=void 0===t?25:t,r=e.lineHeight,c=void 0===r?n:r,i=e.width,a=void 0===i?150:i,o=e.transform,s=void 0===o?q(0):o,l=Me(),d=c;return Object($.jsx)("g",{transform:s,children:Object($.jsxs)("g",{transform:q(a/2,0),children:[Object($.jsx)("line",{className:Object(Q.a)(l.lineBase,l.line),x1:0,x2:0,y1:0,y2:d}),Object($.jsx)("line",{className:Object(Q.a)(l.lineBase,l.hatch),transform:q(5,0),x1:0,x2:0,y1:0,y2:d}),Object($.jsxs)(De.a,{component:"text",transform:q(10,n/2),variant:"button",children:[Object($.jsx)("tspan",{x:"0",children:"Dominated"}),Object($.jsx)("tspan",{dy:"1em",x:"0",children:"Region"})]})]})})})),ze=Object(u.a)((function(){return Object(K.a)({root:function(e){return{width:e.dimension,height:e.dimension}}})})),Ae=Object(h.a)((function(e){var t=e.plot,n=e.size,r=e.originalMarks,c=void 0===r||r,a=e.dataDisplay,o=void 0===a?"Original":a,s=Object(_.a)(),l=n-2*s.spacing(1),d=ze({dimension:l}).root,u=Object(i.useContext)(T).exploreStore,j=u.loadedDataset.labelColumn,b=u.setFreeformSelection,h=u.selectedPoints,f=u.showMatchesLegend,p=u.setBrushSelection,x=u.brushType,O=u.hoveredPrediction,m=u.showSkylineLegend,v=u.state,y=Object(i.useContext)(T).compareStore.selectedPointsComparison,g=t.x,k=t.y,w=le(),S=pe(g,k,j,!1),C=S.points,N=S.x_extents,D=S.y_extents,M=pe(g,k,j,!0).points,A=s.spacing(10),L=l-2*A,W=fe(N,[0,L]),B=fe(D,[L,0]),F=Object(i.useCallback)((function(e,n,r){if(0!==e.length){var c=e.map((function(e){return"#mark".concat(e)})).join(",");switch(n){case"Start":case"Brushing":Object(Z.i)("#".concat(t.id)).selectAll(c).filter((function(){return Object(Z.i)(this).classed(w.regularMark)})).classed(w.intermittentHighlight,!0);break;case"End":Object(Z.i)("#".concat(t.id)).selectAll(".marks").classed(w.intermittentHighlight,!1),b(t,e)}}}),[t,b,w]),E=Object(i.useCallback)((function(e,n,r,c){var i={};Object.entries(n).forEach((function(t){var n=Object(P.a)(t,2),r=n[0],c=n[1];i[r]=Object(z.a)(Object(z.a)({},c),{},{points:e[r]})})),p(t,i,r,c)}),[t,p]),G=null;switch(x){case"Freeform Small":G=20;break;case"Freeform Medium":G=35;break;case"Freeform Large":G=50;break;default:G=null}return Object($.jsxs)("svg",{className:d,id:t.id,children:[Object($.jsx)("defs",{children:Object($.jsx)("clipPath",{id:"clip",width:L,children:Object($.jsx)("rect",{fill:"none",height:L,width:L})})}),Object($.jsxs)("g",{transform:q(A),children:[Object($.jsx)(xe,{columnName:g,scale:W,transform:q(0,L),type:"bottom"}),Object($.jsx)(xe,{columnName:k,scale:B,type:"left"}),f&&Object($.jsx)(Oe,{offset:L-110}),m&&Object($.jsx)(Pe,{transform:q(L-150,100)}),Object($.jsx)(ne,{bottom:L,brushes:v.brushes[t.id]||{},data:C,disableBrush:"Rectangular"!==x||!c,left:0,right:L,top:0,xScale:W,yScale:B,onBrushHandler:E}),G&&c&&Object($.jsx)(he,{bottom:L,brushSize:G,data:C,left:0,right:L,top:0,xScale:W,yScale:B,onBrush:F}),c?Object($.jsx)(ve,{points:C,selectedPoints:h,xScale:W,yScale:B}):Object($.jsx)(ue,{compPoints:M,dataDisplay:o,points:C,selectedPoints:y,xScale:W,yScale:B}),O&&Object($.jsx)(Ne,{prediction:O,xScale:W,yScale:B}),v.prediction&&Object($.jsx)(Ne,{prediction:v.prediction,xScale:W,yScale:B})]})]})})),Le=Object(h.a)((function(e){var t=e.setDataDisplay,n=e.dataDisplay,r=e.selectedPoints,c=void 0!==r&&r,i=le();return Object($.jsx)("svg",{height:30,width:700,children:Object($.jsxs)("g",{children:[Object($.jsxs)("g",{transform:q(0,10),onMouseDown:function(){t("Original"===n?"All":"Original")},children:[Object($.jsx)("circle",{className:"marks ".concat(i.regularMark),cx:12.5,cy:5,opacity:".5",r:"5"}),"Original"===n?Object($.jsx)("rect",{height:25,opacity:".2",rx:20,transform:q(0,-8),width:100}):null,Object($.jsx)("text",{dominantBaseline:"middle",dx:"25",dy:"5","font-weight":"Original"===n?"bold":"normal",children:"v1"})]}),Object($.jsxs)("g",{transform:q(100,10),onMouseDown:function(){t("Comparison"===n?"All":"Comparison")},children:[Object($.jsx)("circle",{className:"marks ".concat(i.regularMark),cx:12.5,cy:5,opacity:".5",r:"5"}),"Comparison"===n?Object($.jsx)("rect",{height:25,opacity:".2",rx:20,transform:q(0,-8),width:100}):null,Object($.jsx)("text",{dominantBaseline:"middle",dx:"25",dy:"5",children:"v2"})]}),Object($.jsxs)("g",{transform:q(200,10),onMouseDown:function(){t("RemovedOnly"===n?"All":"RemovedOnly")},children:[Object($.jsxs)("g",{className:"marks ".concat(i.removedMark," ").concat(c?"":i.removedColor),opacity:"0.5",transform:q(10,0),children:[Object($.jsx)("line",{x2:"6",y2:"6"}),Object($.jsx)("line",{x1:"6",y2:"6"})]}),"RemovedOnly"===n?Object($.jsx)("rect",{height:25,opacity:".2",rx:20,transform:q(0,-8),width:100}):null,Object($.jsx)("text",{dominantBaseline:"middle",dx:"25",dy:"5",children:"Removed"})]}),Object($.jsxs)("g",{transform:q(300,10),onMouseDown:function(){t("AddedOnly"===n?"All":"AddedOnly")},children:[Object($.jsxs)("g",{className:"marks ".concat(i.newMark," ").concat(c?"":i.newColor),opacity:"0.5",transform:q(10,0),children:["AddedOnly"===n?Object($.jsx)("rect",{height:25,opacity:".2",rx:20,transform:q(-10,-8),width:100}):null,Object($.jsx)("polygon",{points:"0 0, 5 10, 10 0"})]}),Object($.jsx)("text",{dominantBaseline:"middle",dx:"32",dy:"5",children:"Added"})]}),Object($.jsxs)("g",{transform:q(400,10),onMouseDown:function(){t("ChangedOnly"===n?"All":"ChangedOnly")},children:[Object($.jsx)("path",{className:"marks ".concat(i.movedLine),d:de(5,25,5,5),style:{opacity:"0.4"}}),"ChangedOnly"===n?Object($.jsx)("rect",{height:25,opacity:".2",rx:20,transform:q(-10,-8),width:130}):null,Object($.jsx)("circle",{className:"marks ".concat(i.movedPoint),cx:5,cy:5,opacity:".2",r:"5"}),Object($.jsx)("circle",{className:"marks ".concat(i.movedPoint),cx:25,cy:5,opacity:"1",r:"5"}),Object($.jsx)("text",{dominantBaseline:"middle",dx:"32",dy:"5",children:"Point Moved"})]}),Object($.jsxs)("g",{transform:q(510,10),onMouseDown:function(){t("Diff"===n?"All":"Diff")},children:["Diff"===n?Object($.jsx)("rect",{height:25,opacity:".2",rx:20,transform:q(14,-8),width:130}):null,Object($.jsx)("text",{dominantBaseline:"middle",dx:"32",dy:"5",children:"All Changed Data"})]})]})})})),We=Object(u.a)((function(e){return Object(K.a)({root:{flexGrow:1,padding:e.spacing(2),overflow:"auto"},grid:{height:"100%"},closeIcon:{position:"absolute"}})})),Be=Object(h.a)((function(){var e=Object(i.useContext)(T).exploreStore,t=e.plots,n=e.removePlot,r=e.isLoadingData,c=e.n_plots,a=Object(i.useContext)(T).projectStore.currentProject,o=(null===a||void 0===a||a.datasets.map((function(e){return{key:e.key,desc:e.version}})),Object(i.useContext)(T).exploreStore.selectedPoints),s=1===c?800:500,l=Object(i.useState)("All"),d=Object(P.a)(l,2),u=d[0],j=d[1],b=We(),h=Object(_.a)(),f=1===c?"auto":6,p=Object($.jsx)(H.a,{}),x=t.map((function(e){return Object($.jsxs)(U.a,{xs:f,item:!0,children:[Object($.jsx)(Le,{dataDisplay:u,offset:s-2*h.spacing(1)-110,selectedPoints:o.length>0,setDataDisplay:j}),Object($.jsxs)(Y.a,{elevation:3,children:[c>1&&Object($.jsx)(V.a,{className:b.closeIcon,onClick:function(){return n(e)},children:Object($.jsx)(J.a,{})}),Object($.jsx)("div",{}),Object($.jsx)(Ae,{dataDisplay:u,originalMarks:!1,plot:e,size:s-2*h.spacing(1)})]})]},e.id)}));return Object($.jsx)("div",{className:b.root,children:Object($.jsx)(U.a,{alignItems:"center",className:b.grid,justify:"center",spacing:2,container:!0,children:r?p:x})})})),Fe=Object(u.a)((function(){return{root:{".red":{backgroundColor:"#ff8080"},".green":{backgroundColor:"#90EE90"},".yellow":{backgroundColor:"#ffff8b"},display:"grid",height:"100vh",width:"100vw",gridTemplateRows:"min-content 1fr",overflow:"hidden"},layout:{display:"grid",gridTemplateColumns:"5fr 2fr",overflow:"hidden"}}})),Ee=Object(h.a)((function(e){var t=e.location,n=Object(i.useContext)(T),r=n.exploreStore,c=r.n_plots,a=r.addPlot,o=n.projectStore,s=o.loadedDataset,l=o.comparisonDataset,u=n.provenance,h=n.setQueryParams,f=n.loadedWorkflowId,p=n.loadSavedProject;Object(i.useEffect)((function(){h(t.search)}),[t.search,h]),Object(i.useEffect)((function(){var e=u.current;if(!(Object(b.isChildNode)(e)&&e.children.length>0)&&!(c>0||!s||f||p)){var t=s.numericColumns,n={id:N(),x:t[0],y:t[1]};a(n)}}));var x=Fe();return l?Object($.jsxs)("div",{className:x.root,children:[Object($.jsx)(j.a,{}),Object($.jsx)("div",{className:x.layout,children:Object($.jsx)(Be,{})})]}):Object($.jsx)(d.a,{to:{pathname:"/project",search:t.search}})})),Ge=n(84),Re=n(610),Ie=n(611),Te=n(123);function Ke(e,t){var n=[];for(var r in t)t[r].bunchedNodes.includes(e)&&n.push(r);return n}function _e(e,t){return"translate(".concat(e,", ").concat(t,")")}function He(e,t,n){var r=function(e,t,n){var r=[];return Ue(e,t,n,r),[t].concat(Object(k.a)(r.reverse()))}(e,n,t);return function(e,t,n,r){var c=new Set,i=[],a=0;i.push(e[t]);for(;i.length>0;){var o=i.pop();c.has(o.id)?o.width=n[o.id]:(o.width=a,n[o.id]=o.width,c.add(o.id)),o.children?i.push.apply(i,Object(k.a)(o.children.sort((function(e,t){return(r.includes(e.id)?1:0)-(r.includes(t.id)?1:0)})))):a+=1}}(e,n,{},r),r}function Ue(e,t,n,r){if(!e[t])return!1;if(t===n)return r.push(t),!0;var c,i=e[t].children||[],a=Object(v.a)(i);try{for(a.s();!(c=a.n()).done;){var o=c.value;if(Ue(e,o.id,n,r))return r.push(o.id),!0}}catch(s){a.e(s)}finally{a.f()}return!1}var Ye=n(612),Ve=n(153),Xe=function(e){return Object(Te.a)({fill:e?"rgb(33, 133, 208)":"white",stroke:"rgb(33, 133, 208)"})};var Je=function(e){var t,n,r=e.prov,c=e.first,a=e.iconOnly,o=e.current,s=e.node,l=e.duration,d=e.radius,u=e.strokeWidth,j=e.addToWorkflow,b=e.textSize,h=e.nodeMap,f=e.annotationOpen,p=e.bookmark,x=e.setAnnotationOpen,O=e.exemptList,m=e.setExemptList,v=e.bundleMap,y=e.eventConfig,g=e.popupContent,k=e.editAnnotations,w=e.annotationContent,S=e.approvedFunction,C=e.rejectedFunction,N=e.currentDataset,D=e.nodeCreationMap,M=e.expandedClusterList,z={cursor:"pointer"},A=Object(i.useState)(s.artifacts&&s.artifacts.annotations&&(null===(t=r.getLatestAnnotation(s.id))||void 0===t?void 0:t.annotation)?null===(n=r.getLatestAnnotation(s.id))||void 0===n?void 0:n.annotation:""),L=Object(P.a)(A,2),W=L[0],B=L[1],F=function(){var e=r.getLatestAnnotation(s.id);(null===e||void 0===e?void 0:e.annotation)!==W.trim()&&(r.addAnnotation(W,s.id),x(-1))},E=function(){var e;B(null===(e=r.getLatestAnnotation(s.id))||void 0===e?void 0:e.annotation),x(-1)},G=function(){},R=Object($.jsx)("circle",{className:Xe(o),r:d,strokeWidth:u,style:z}),I=!1;if(y){var T=s.metadata.eventType;if(T&&T in y&&"Root"!==T){var K=y[T],_=K.bundleGlyph,H=K.currentGlyph,U=K.backboneGlyph;v&&Object.keys(v).includes(s.id)&&(I=!0,R=Object($.jsx)("g",{fontWeight:"none",style:z,children:_})),o?R=Object($.jsx)("g",{fontWeight:"none",style:z,children:H}):I||(R=Object($.jsx)("g",{fontWeight:"none",style:z,children:U}))}}var Y="",V="";if(Y=v&&Object.keys(v).includes(s.id)&&"Ephemeral"===s.actionType&&M&&!M.includes(s.id)?s.metadata&&s.metadata.eventType?"[".concat(v[s.id].bunchedNodes.length,"] ").concat(s.metadata.eventType):"[".concat(v[s.id].bunchedNodes.length,"]"):s.label,s.artifacts&&s.artifacts.annotations&&s.artifacts.annotations.length>0&&f!==h[s.id].depth&&(V=s.artifacts.annotations[0].annotation),!h[s.id])return null;V.length>20&&(V="".concat(V.substr(0,20),"..")),Y.length>20&&(Y="".concat(Y.substr(0,20),".."));var X=Object($.jsxs)("g",{style:{opacity:1},transform:_e(25,0),children:[D[s.id]?Object($.jsxs)("g",{children:[Object($.jsxs)("g",{transform:_e(-10,-10),children:[Object($.jsx)("circle",{fill:"white",opacity:"1",r:"7"}),Object($.jsx)("text",{alignmentBaseline:"middle",fill:D[s.id]&&D[s.id].createdIn===N?"green":"grey",fontSize:10,fontWeight:"bold",style:z,textAnchor:"middle",x:0,y:0,children:D[s.id]?D[s.id].createdIn:""})]}),Object($.jsxs)("g",{transform:_e(-10,10),children:[Object($.jsx)("circle",{fill:"white",opacity:"1",r:"7"}),Object($.jsx)("text",{alignmentBaseline:"middle",fill:D[s.id]&&D[s.id].approvedIn.includes(N)?"green":D[s.id].rejectedIn.includes(N)?"red":"black",fontFamily:"Icons",fontSize:10,style:z,textAnchor:"middle",x:0,y:0,children:D[s.id]&&D[s.id].approvedIn.includes(N)?"\uf00c":D[s.id].rejectedIn.includes(N)?"\uf00d":"\uf128"})]})]}):null,!D[s.id]||D[s.id].rejectedIn.includes(N)||D[s.id].approvedIn.includes(N)?"Root"!==s.label&&!D[s.id].rejectedIn.includes(N)&&Object($.jsx)("g",{transform:_e(-10,10),children:Object($.jsx)("foreignObject",{height:"100",width:"50",x:"-45",y:"-20",children:Object($.jsx)("div",{style:{maxWidth:"20"},children:Object($.jsx)(Ye.a,{style:{margin:"1px",padding:"1px",maxHeight:"20px",maxWidth:"20px"},onClick:function(e){e.stopPropagation(),j(s.id)},children:Object($.jsx)(Ve.a,{color:"green",name:"add",size:"small",style:{margin:"0px"}})})})})}):Object($.jsx)("g",{transform:_e(-10,10),children:Object($.jsxs)("foreignObject",{height:"100",width:"50",x:"-45",y:"-30",children:[Object($.jsx)("div",{style:{maxWidth:"20"},children:Object($.jsx)(Ye.a,{style:{margin:"1px",padding:"1px",maxHeight:"15px",maxWidth:"15px"},onClick:function(e){e.stopPropagation(),S(s.id)},children:Object($.jsx)(Ve.a,{color:"green",name:"check",size:"small",style:{margin:"0px"}})})}),Object($.jsx)("div",{style:{maxWidth:"20"},children:Object($.jsx)(Ye.a,{style:{margin:"1px",padding:"1px",maxHeight:"15px",maxWidth:"15px"},onClick:function(e){e.stopPropagation(),C(s.id)},children:Object($.jsx)(Ve.a,{color:"red",name:"close",size:"small",style:{margin:"0px"}})})})]})}),a?Object($.jsx)("g",{children:I?Object($.jsx)("text",{alignmentBaseline:"middle",fill:"rgb(248, 191, 132)",fontFamily:"Icons",fontSize:17,style:z,textAnchor:"middle",x:1,y:0,onClick:function(e){return Z(s,e)},children:M&&M.includes(s.id)?"\uf0d8":"\uf0d7"}):Object($.jsx)("g",{})}):Object($.jsxs)("g",{children:[I?Object($.jsx)("text",{alignmentBaseline:"middle",fill:"rgb(248, 191, 132)",fontFamily:"Icons",fontSize:17,style:z,textAnchor:"middle",x:1,y:0,onClick:function(e){return Z(s,e)},children:M&&M.includes(s.id)?"\uf0d8":"\uf0d7"}):Object($.jsx)("g",{}),k?Object($.jsxs)("button",{children:[Object($.jsx)("i",{className:"fas fa-undo marginRight"}),"Undo"]}):Object($.jsx)("g",{}),Object($.jsx)("text",{dominantBaseline:"middle",fill:"black",fontSize:b,fontWeight:"bold",textAnchor:"start",x:I?10:0,y:0===V.length?0:-7,onClick:function(){return J(s)},children:Y}),",",Object($.jsx)("text",{dominantBaseline:"middle",fill:"black",fontSize:b,fontWeight:"regular",textAnchor:"start",x:I?10:0,y:7,onClick:function(){return J(s)},children:V}),",",Object($.jsx)("text",{alignmentBaseline:"middle",className:"fas fa",fill:r.getBookmark(s.id)?"#2185d0":"#cccccc",fontFamily:"Icons",fontSize:17,opacity:p===s.id||r.getBookmark(s.id)?1:0,style:z,textAnchor:"middle",x:175,y:0,onClick:function(e){r.setBookmark(s.id,!r.getBookmark(s.id)),e.stopPropagation()},children:"\uf02e"}),",",Object($.jsx)("text",{alignmentBaseline:"middle",fill:f===h[s.id].depth?"#2185d0":"#cccccc",fontFamily:"Icons",fontSize:17,opacity:p===s.id||f===h[s.id].depth?1:0,style:z,textAnchor:"middle",x:210,y:0,onClick:function(){-1===f||h[s.id].depth!==f?x(h[s.id].depth):x(-1)},children:"\uf044"})]})]});return Object($.jsx)(Ge.a,{enter:{opacity:[1],timing:{duration:100,delay:c?0:l}},start:{opacity:0},children:function(){return Object($.jsxs)($.Fragment,{children:[void 0!==g&&h[s.id].depth>0?Object($.jsx)(Re.a,{content:g(s),trigger:R}):R,void 0!==g&&h[s.id].depth>0?Object($.jsx)(Re.a,{content:g(s),trigger:X}):X,-1!==f&&h[s.id].depth===f?Object($.jsx)("g",{transform:"translate(15, 25)",children:Object($.jsx)("foreignObject",{height:"80",width:"175",x:"0",y:"0",children:Object($.jsxs)("div",{children:[Object($.jsx)("textarea",{style:{maxWidth:130,resize:"none"},value:W,onChange:G}),Object($.jsx)("button",{onClick:F,children:"Annotate"}),Object($.jsx)("button",{onClick:E,children:"Close"})]})})}):Object($.jsx)("g",{})]})}});function J(e){f===h[e.id].depth&&w?x(-1):w&&x(h[e.id].depth)}function Z(e,t){if(v&&Object.keys(v).includes(e.id)){var n=Array.from(O);n.includes(e.id)?n.splice(n.findIndex((function(t){return t===e.id})),1):n.push(e.id),m(n)}t.stopPropagation()}};var Ze=function(e){var t=e.current,n=e.node,r=e.eventConfig,c={cursor:"pointer"},i=Object($.jsx)("circle",{className:Xe(t),r:5,strokeWidth:2,style:c}),a=n.metadata.eventType;if(r){var o=r[a],s=o.currentGlyph,l=o.backboneGlyph;i=t?Object($.jsx)("g",{fontWeight:"none",style:c,children:s}):Object($.jsx)("g",{fontWeight:"none",style:c,children:l})}var d="",u="";return n.artifacts&&n.artifacts.annotations.length>0&&n.artifacts.annotations[0].annotation.length>0&&(u=n.artifacts.annotations[0].annotation),d=n.label,u.length>20&&(u="".concat(u.substr(0,20),"..")),d.length>20&&(d="".concat(d.substr(0,20),"..")),Object($.jsx)(Ge.a,{enter:{opacity:[1]},start:{opacity:0},children:function(){return Object($.jsx)($.Fragment,{children:Object($.jsxs)("g",{style:{opacity:1},children:[i,Object($.jsx)("text",{dominantBaseline:"middle",fontSize:15,fontWeight:"bold",textAnchor:"start",x:20,y:0,children:d}),Object($.jsx)("text",{dominantBaseline:"middle",fontSize:15,fontWeight:"regular",textAnchor:"start",x:0,y:20,children:u})]})})}})};var qe=function(e){var t=e.graph,n=e.eventConfig,r=e.currentNode;if(void 0===t)return null;var c=[];for(var i in t.nodes)t.nodes[i].bookmarked&&c.push(t.nodes[i]);return Object($.jsx)(Ge.b,Object(z.a)(Object(z.a)({data:c,keyAccessor:function(e){return e.label}},function(e,t,n){e=-e;var r=function(e){return{x:0,y:40*n.findIndex((function(t){return t.id===e.id}))-t,opacity:0}};return{enter:function(e){return{x:[0],y:[40*n.findIndex((function(t){return t.id===e.id}))],opactiy:1}},leave:r,update:function(e){return{x:[0],y:[40*n.findIndex((function(t){return t.id===e.id}))],opactiy:1}},start:r}}(15,50,c)),{},{children:function(e){return Object($.jsx)($.Fragment,{children:e.map((function(t){var c=t.data,i=t.key,a=t.state;return Object($.jsx)("g",{transform:_e(a.x,a.y),children:Object($.jsx)(Ze,{current:r===c.id,editAnnotations:!1,eventConfig:n,node:c,nodeMap:e})},i)}))})}}))};function Qe(e,t,n,r){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:500,i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;e=-e,r=-r;var o=function(){return{x1:0,x2:0,y1:0,y2:0,opacity:0}},s=function(o){var s=0;s=0===s?s:s-1;var l=o.source,d=o.target,u=$e(l.width,e,r),j=$e(d.width,e,r),b=t*l.depth-(t-n)*s,h=t*d.depth-(t-n)*s;return-1!==i&&l.depth>i&&0===l.width&&(b+=a),-1!==i&&d.depth>i&&0===d.width&&(h+=a),{x1:u,x2:j,y1:b,y2:h,opacity:1,timing:{duration:c}}},l=function(o){var s=0;s=0===s?s:s-1;var l=o.source,d=o.target,u=$e(l.width,e,r),j=$e(d.width,e,r),b=t*l.depth-(t-n)*s,h=t*d.depth-(t-n)*s;return-1!==i&&l.depth>i&&0===l.width&&(b+=a),-1!==i&&d.depth>i&&0===d.width&&(h+=a),{x1:[u],y1:[b],x2:[j],y2:[h],opacity:1,timing:{duration:c}}};return{enter:s,leave:o,update:l,start:o}}function $e(e,t,n){return e>1?(t+n)*e-n:(t+n)*e}function et(e,t,n,r){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:500,i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,o=arguments.length>8?arguments[8]:void 0,s=arguments.length>9?arguments[9]:void 0,l=arguments.length>10?arguments[10]:void 0;e=-e,r=-r;var d=function(){return{x:0,y:0,opacity:0}},u=function(d){var u=$e(a[d].width,e,r),j=a[d].depth,b=a[d].depth;if(l&&i.includes(d))for(var h=0;h<l[d].bunchedNodes.length;h++)a[l[d].bunchedNodes[h]]&&a[l[d].bunchedNodes[h]].depth<j&&(j=a[l[d].bunchedNodes[h]].depth),a[l[d].bunchedNodes[h]]&&a[l[d].bunchedNodes[h]].depth>b&&(b=a[l[d].bunchedNodes[h]].depth);var f=t*j;-1!==o&&j>o&&(f+=s);var p=0;for(var x in l[d].bunchedNodes)a[l[d].bunchedNodes[x]]&&p++;return p*=n,i.includes(d)||(p=10),-1!==o&&o>=j&&o<=b&&(p+=s),{x:[u],y:[f],opacity:[i.includes(d)?1:0],timing:{duration:c},validity:!0,height:p}},j=function(d){var u=$e(a[d].width,e,r),j=a[d].depth,b=a[d].depth;if(l&&i.includes(d))for(var h=0;h<l[d].bunchedNodes.length;h++)a[l[d].bunchedNodes[h]]&&a[l[d].bunchedNodes[h]].depth<j&&(j=a[l[d].bunchedNodes[h]].depth),a[l[d].bunchedNodes[h]]&&a[l[d].bunchedNodes[h]].depth>b&&(b=a[l[d].bunchedNodes[h]].depth);var f=t*j;-1!==o&&j>o&&(f+=s);var p=0;for(var x in l[d].bunchedNodes)a[l[d].bunchedNodes[x]]&&p++;return p*=n,i.includes(d)||(p=10),-1!==o&&o>=j&&o<=b&&(p+=s),{x:[u],y:[f],opacity:[i.includes(d)?1:0],timing:{duration:c},validity:!0,height:[p]}};return{enter:u,leave:d,update:j,start:d}}var tt=function(e){return Object($.jsx)("line",Object(z.a)({},e))};function nt(e,t,n,r){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:500,i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;e=-e,r=-r;var o=function(c){var o=0,s=$e(c.width,e,r);o=0===o?o:o-1;var l=t*c.depth-(t-n)*o;return-1!==i&&c.depth>i&&0===c.width&&(l+=a),{x:s,y:l-t,opacity:0}},s=function(o){var s=0,l=$e(o.width,e,r);s=0===s?s:s-1;var d=t*o.depth-(t-n)*s;return-1!==i&&o.depth>i&&0===o.width&&(d+=a),{x:[l],y:[d],opactiy:1,timing:{duration:c}}},l=function(o){var s=0,l=$e(o.width,e,r);s=0===s?s:s-1;var d=t*o.depth-(t-n)*s;return-1!==i&&o.depth>i&&0===o.width&&(d+=a),{x:[l],y:[d],opactiy:1,timing:{duration:c}}};return{enter:s,leave:o,update:l,start:o}}var rt=Object(Te.a)({marginTop:"2px",borderRadius:"2px",display:"inline-block",cursor:"pointer",fontFamily:"Lato,Helvetica Neue,Arial,Helvetica,sans-serif",fontSize:"14px",marginRight:"1px",$nest:{"&:hover":{backgroundColor:"#6c7c7c"},"&:active":{backgroundColor:"#6c7c7c"}}}),ct=Object(Te.a)({marginTop:"2px",borderRadius:"2px",display:"inline-block",cursor:"pointer",fontFamily:"Lato,Helvetica Neue,Arial,Helvetica,sans-serif",fontSize:"14px",$nest:{"&:hover":{backgroundColor:"#6c7c7c"},"&:active":{backgroundColor:"#6c7c7c"}}});var it=function(e){var t=e.graph,n=e.undoCallback,r=e.redoCallback;if(void 0===t)return null;var c=t.root===t.current,i=0===t.nodes[t.current].children.length,a={marginRight:"3px"};return Object($.jsxs)("div",{children:[Object($.jsxs)(Ye.a,{className:rt,disabled:c,variant:"outlined",onClick:n,children:[Object($.jsx)("i",{className:"fas fa-undo marginRight",style:a}),"Undo"]}),Object($.jsxs)(Ye.a,{className:ct,disabled:i,variant:"outlined",onClick:r,children:[Object($.jsx)("i",{className:"fas fa-redo marginRight",style:a}),"Redo"]})]})},at=Object(Te.a)({alignItems:"center",justifyContent:"center",overflow:"auto"});var ot=Object(h.a)((function(e){var t=e.nodeMap,n=e.root,r=e.current,c=e.changeCurrent,a=e.width,o=void 0===a?400:a,s=e.height,l=void 0===s?800:s,d=e.iconOnly,u=void 0!==d&&d,j=e.gutter,h=void 0===j?15:j,f=e.backboneGutter,p=void 0===f?20:f,x=e.verticalSpace,O=void 0===x?50:x,m=e.annotationHeight,y=void 0===m?100:m,g=e.clusterVerticalSpace,k=void 0===g?50:g,w=e.regularCircleRadius,S=void 0===w?4:w,C=e.backboneCircleRadius,N=void 0===C?5:C,D=e.regularCircleStroke,M=void 0===D?3:D,A=e.backboneCircleStroke,L=void 0===A?3:A,W=e.sideOffset,B=void 0===W?200:W,F=e.topOffset,E=void 0===F?30:F,G=e.textSize,R=void 0===G?15:G,I=e.linkWidth,T=void 0===I?4:I,K=e.duration,_=void 0===K?600:K,H=e.clusterLabels,U=void 0===H||H,Y=e.bundleMap,V=void 0===Y?{}:Y,X=e.eventConfig,J=(e.brushCallback,e.popupContent),q=e.annotationContent,Q=e.approvedFunction,ee=e.rejectedFunction,te=e.addToWorkflow,ne=e.currentDataset,re=e.nodeCreationMap,ce=e.editAnnotations,ie=void 0!==ce&&ce,ae=e.prov,oe=e.ephemeralUndo,se=void 0!==oe&&oe,le=Object(i.useState)(!0),de=Object(P.a)(le,2),ue=de[0],je=de[1],be=Object(i.useState)(null),he=Object(P.a)(be,2),fe=he[0],pe=he[1],xe=Object(i.useState)(-1),Oe=Object(P.a)(xe,2),me=Oe[0],ve=Oe[1],ye=[],ge=new Set;for(var ke in t){var we=t[ke];if(Object(b.isChildNode)(we)&&(we.metadata.eventType&&ge.add(we.metadata.eventType),"Ephemeral"===we.actionType&&1===we.children.length&&("Ephemeral"!==t[we.parent].actionType||t[we.parent].children.length>1))){for(var Se=[],Ce=we;"Ephemeral"===Ce.actionType&&(Se.push(Ce.id),1===Ce.children.length&&"Ephemeral"===t[Ce.children[0]].actionType);)Ce=t[Ce.children[0]];V[we.id]={metadata:"",bundleLabel:"",bunchedNodes:Se}}}V&&(ye=ye.concat(Object.keys(V)));var Ne=Object(i.useState)(Object.keys(V)),De=Object(P.a)(Ne,2),Me=De[0],Pe=De[1];!X&&ge.size>0&&ge.size<8&&(X=function(e){var t,n=[Z.k().type(Z.p).size(50),Z.k().type(Z.n),Z.k().type(Z.q),Z.k().type(Z.l),Z.k().type(Z.m),Z.k().type(Z.o),Z.k().type(Z.r)],r={},c=0,i=Object(v.a)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;r[a]={},r[a].backboneGlyph=Object($.jsx)("path",{className:Xe(!1),d:n[c](),strokeWidth:2}),r[a].bundleGlyph=Object($.jsx)("path",{className:Xe(!1),d:n[c](),strokeWidth:2}),r[a].currentGlyph=Object($.jsx)("path",{className:Xe(!0),d:n[c](),strokeWidth:2}),r[a].regularGlyph=Object($.jsx)("path",{className:Xe(!1),d:n[c](),strokeWidth:2}),c+=1}}catch(o){i.e(o)}finally{i.f()}return r}(ge)),Object(i.useEffect)((function(){je(!1)}),[]);var ze=Object.values(t).filter((function(){return!0})),Ae=Array.from(ze),Le=V?Object.keys(V):[],We=[];if(V){var Be,Fe=Object(v.a)(Le);try{for(Fe.s();!(Be=Fe.n()).done;){var Ee=Be.value;(We=We.concat(V[Ee].bunchedNodes)).push(Ee)}}catch(vt){Fe.e(vt)}finally{Fe.f()}}for(var Te=Z.j().id((function(e){return e.id})).parentId((function(e){if(e.id===n)return null;if(Object(b.isChildNode)(e)){if(V&&Object.keys(V).includes(e.id)&&!Me.includes(e.id))for(var t=e,r=function(){var e=t;if(!We.includes(e.parent)||Object.keys(V).includes(e.parent))return{v:e.parent};var n=Ae.filter((function(t){return t.id===e.parent}))[0];Object(b.isChildNode)(n)&&(t=n)};;){var c=r();if("object"===typeof c)return c.v}var i,a=Ke(e.parent,V),o=!0;for(var s in a)if(!Me.includes(a[s])){o=!1,i=a[s];break}return We.includes(e.parent)&&V&&!Object.keys(V).includes(e.parent)&&!o?i:e.parent}return null})),Ue=0;Ue<ze.length;Ue++){var Ye=Ke(ze[Ue].id,V),Ve=!0;for(var Ze in Ye)if(!Me.includes(Ye[Ze])){Ve=!1;break}We.includes(ze[Ue].id)&&!Ve&&V&&!Object.keys(V).includes(ze[Ue].id)&&(ze.splice(Ue,1),Ue--)}var $e=Te(ze),rt=$e.descendants(),ct={};rt.forEach((function(e){ct[e.id]=e})),He(ct,r,n);var ot=0,st=0;for(var lt in rt)rt[lt].depth>ot&&(ot=rt[lt].depth),rt[lt].width>st&&(st=rt[lt].width);var dt=$e.links(),ut=h,jt=O;function bt(e){if(X){var t=e.metadata.eventType;if(t&&t in X&&"Root"!==t&&X[t].regularGlyph)return X[t].regularGlyph}return Object($.jsx)("circle",{className:Xe(!1),r:S,strokeWidth:M})}function ht(e){if(X){var t=e.metadata.eventType;if(t&&t in X&&"Root"!==t)return X[t].bundleGlyph}return Object($.jsx)("circle",{className:Xe(!1),r:S,strokeWidth:M})}var ft=0;0===st?ft=30:1===st?ft=52:st>1&&(ft=74);var pt=o,xt=Object($.jsx)("svg",{height:ot<l?l:ot,id:"bookmarkView",style:{overflow:"visible"},width:pt,children:Object($.jsx)("g",{id:"globalG",transform:_e(ft,E),children:Object($.jsx)(qe,{currentNode:r,eventConfig:X,graph:ae?ae.graph:void 0})})}),Ot=Object($.jsxs)("div",{children:[Object($.jsx)("div",{id:"undoRedoDiv",children:Object($.jsx)(it,{graph:ae?ae.graph:void 0,redoCallback:function(){ae&&(se?ae.goForwardToNonEphemeral():ae.goForwardOneStep())},undoCallback:function(){ae&&(se?ae.goBackToNonEphemeral():ae.goBackOneStep())}})}),Object($.jsxs)("svg",{height:ot<l?l:ot,id:"topSvg",style:{overflow:"visible"},width:pt,children:[Object($.jsx)("rect",{fill:"none",height:l,stroke:"none",width:o}),Object($.jsxs)("g",{id:"globalG",transform:_e(ft,E),children:[Object($.jsx)(Ge.b,Object(z.a)(Object(z.a)({data:dt,keyAccessor:function(e){return"".concat(e.source.id).concat(e.target.id)}},Qe(ut,jt,k,p-h,_,me,y)),{},{children:function(e){return Object($.jsx)($.Fragment,{children:e.map((function(e){var t=e.key,n=e.state;return Object($.jsx)("g",{children:Object($.jsx)(tt,Object(z.a)(Object(z.a)({},n),{},{fill:"#ccc",stroke:"#ccc",strokeWidth:T}))},t)}))})}})),Object($.jsx)(Ge.b,Object(z.a)(Object(z.a)({data:rt,keyAccessor:function(e){return e.id}},nt(ut,jt,k,p-h,_,me,y)),{},{children:function(e){return Object($.jsx)($.Fragment,{children:e.map((function(e){var t=e.data,n=e.key,i=e.state;return Object($.jsx)("g",{transform:(t.width,_e(i.x,i.y)),onClick:function(){c&&c(t.id)},onMouseOut:function(){pe(null)},onMouseOver:function(){pe(t.id)},children:0===t.width&&ae?Object($.jsxs)("g",{children:[Object($.jsx)("rect",{height:"25",opacity:"0",transform:"translate(0, -12.5)",width:"200"}),",",Object($.jsx)(Je,{addToWorkflow:te,annotationContent:q,annotationOpen:me,approvedFunction:Q,bookmark:fe,bundleMap:V,clusterLabels:U,current:r===t.id,currentDataset:ne,duration:_,editAnnotations:ie,eventConfig:X,exemptList:Me,expandedClusterList:Me,first:ue,iconOnly:u,node:t.data,nodeCreationMap:re,nodeMap:ct,popupContent:J,prov:ae,radius:N,rejectedFunction:ee,setAnnotationOpen:ve,setBookmark:pe,setExemptList:Pe,strokeWidth:L,textSize:R})]}):void 0!==J?Object($.jsx)(Re.a,{content:J(t.data),trigger:Object($.jsx)("g",{onClick:function(){ve(-1)},children:Le.includes(t.id)?ht(t.data):bt(t.data)})}):Object($.jsx)("g",{onClick:function(){ve(-1)},children:bt(t.data)})},n)}))})}})),Object($.jsx)(Ge.b,Object(z.a)(Object(z.a)({data:Le,keyAccessor:function(e){return"".concat(e)}},et(ut,O,k,p-h,_,Me,ct,rt,me,y,V)),{},{children:function(e){return Object($.jsx)($.Fragment,{children:e.map((function(e){var t=e.key,n=e.state;return void 0===V||0!==ct[e.key].width||!1===n.validity?null:Object($.jsx)("g",{transform:_e(n.x-h+5,n.y-k/2),children:Object($.jsx)("rect",{fill:"none",height:n.height,rx:"10",ry:"10",stroke:"rgb(248, 191, 132)",strokeWidth:"2px",style:{opacity:n.opacity},width:u?42:B-15})},t)}))})}}))]})]})]}),mt=[{menuItem:{key:"Graph",icon:"share alternate",content:"Graph"},render:function(){return Object($.jsx)(Ie.a.Pane,{attached:!1,children:Ot})}},{menuItem:{key:"Bookmarks/Annotations",icon:"bookmark",content:"Bookmarks/Annotations"},render:function(){return Object($.jsx)(Ie.a.Pane,{attached:!1,children:xt})}}];return Object($.jsx)("div",{className:at,id:"prov-vis",style:{overflowX:"auto",overflowY:"auto"},children:Object($.jsx)(Ie.a,{menu:{secondary:!0,pointing:!0},panes:mt})})}));function st(e){var t=e.size,n=void 0===t?15:t,r=e.fill,c=void 0===r?"#ccc":r;return Object($.jsxs)("g",{children:[Object($.jsx)("circle",{fill:"white",r:n-n/4}),Object($.jsx)("g",{transform:q(-n/2,-n/2),children:Object($.jsx)("svg",{height:n,viewBox:"0 0 141.75 141.75",width:n,children:Object($.jsxs)("g",{id:"Layer 1",children:[Object($.jsx)("path",{d:"M0+141.75L141.069+0.305731",fill:"none",opacity:"1",stroke:c,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),Object($.jsx)("path",{d:"M76.2578+103.486L90.5601+114.114C90.5601+114.114+99.8156+137.498+74.2147+137.498C53.7829+137.498+48.8808+110.711+49.6965+109.863C49.6965+109.863+60.7858+122.325+61.9556+116.24C63.9988+105.611+76.2578+103.486+76.2578+103.486ZM127.585+49.613C127.308+49.6166+127.031+49.6388+126.751+49.6794C124.356+50.0268+121.717+51.7745+118.137+55.3776L84.3591+88.0407C84.3585+88.0411+84.3578+88.0402+84.3573+88.0407C82.4109+89.8348+81.776+93.0922+82.5535+96.6415C83.3425+100.243+85.4619+103.608+88.3851+105.635C91.2896+107.65+95.1882+108.221+99.2129+107.403C103.001+106.633+106.521+104.693+108.654+102.179C108.654+102.179+108.653+102.178+108.654+102.177C108.654+102.177+108.655+102.178+108.655+102.177L134.486+66.7279C134.487+66.7273+134.486+66.7266+134.486+66.726C136.375+63.9384+137.395+61.4407+137.462+59.166C137.537+56.6101+136.4+54.3632+133.911+52.4215C131.424+50.4808+129.522+49.5881+127.585+49.613Z",fill:"none",opacity:"1",stroke:c,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),Object($.jsx)("path",{d:"M17.5647+7.49443L61.7224+7.49443C66.5892+7.49443+70.5345+12.5807+70.5345+18.8549L70.5345+50.7774C70.5345+57.0516+66.5892+62.1379+61.7224+62.1379L17.5647+62.1379C12.6979+62.1379+8.75258+57.0516+8.75258+50.7774L8.75258+18.8549C8.75258+12.5807+12.6979+7.49443+17.5647+7.49443Z",fill:"none",opacity:"1",stroke:c,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"})]})})})]})}function lt(e){var t=e.size,n=void 0===t?15:t,r=e.fill,c=void 0===r?"#ccc":r;return Object($.jsxs)("g",{children:[Object($.jsx)("circle",{fill:"white",r:n-n/4}),Object($.jsx)("g",{children:Object($.jsx)("text",{dominantBaseline:"middle",fill:c,fontFamily:"FontAwesome",fontSize:n,textAnchor:"middle",children:"\uf2ed"})})]})}function dt(e){var t=e.size,n=void 0===t?15:t,r=e.fill,c=void 0===r?"#ccc":r;return Object($.jsxs)("g",{children:[Object($.jsx)("circle",{fill:"white",r:n-n/4}),Object($.jsx)("g",{children:Object($.jsx)("text",{dominantBaseline:"middle",fill:c,fontFamily:"FontAwesome",fontSize:n,textAnchor:"middle",children:"\uf057"})})]})}function ut(e){var t=e.size,n=void 0===t?15:t,r=e.fill,c=void 0===r?"#ccc":r;return Object($.jsxs)("g",{children:[Object($.jsx)("circle",{fill:"white",r:n-n/4}),Object($.jsx)("g",{children:Object($.jsx)("text",{dominantBaseline:"middle",fill:c,fontFamily:"FontAwesome",fontSize:n,textAnchor:"middle",children:"\uf044"})})]})}function jt(e){var t=e.size,n=void 0===t?15:t,r=e.fill,c=void 0===r?"#ccc":r;return Object($.jsxs)("g",{children:[Object($.jsx)("circle",{fill:"white",r:n-n/4}),Object($.jsx)("g",{children:Object($.jsx)("text",{dominantBaseline:"middle",fill:c,fontFamily:"FontAwesome",fontSize:n,textAnchor:"middle",children:"\uf042"})})]})}function bt(e){var t=e.size,n=void 0===t?15:t,r=e.fill,c=void 0===r?"#ccc":r;return Object($.jsxs)("g",{children:[Object($.jsx)("circle",{fill:"white",r:n-n/4}),Object($.jsx)("g",{transform:q(-n/2,-n/2),children:Object($.jsx)("svg",{height:n,viewBox:"0 0 141.75 141.75",width:n,children:Object($.jsxs)("g",{id:"Layer 1",children:[Object($.jsx)("path",{d:"M11.34-11.34L11.6801+130.41L153.09+130.41",fill:"none",opacity:"1",stroke:c,strokeLinecap:"round",strokeLinejoin:"miter",strokeWidth:"25"}),Object($.jsx)("path",{d:"M41.0944+103.248C41.0944+96.3307+46.8061+90.7234+53.8519+90.7234C60.8977+90.7234+66.6094+96.4351+66.6094+103.481C66.6094+110.527+60.8977+116.238+53.8519+116.238C46.8061+116.238+41.0944+110.165+41.0944+103.248Z",fill:c,opacity:"1"}),Object($.jsx)("path",{d:"M28.3369+70.6417C28.3369+63.7248+34.0486+58.1175+41.0944+58.1175C48.1402+58.1175+53.8519+63.8292+53.8519+70.875C53.8519+77.9208+48.1402+83.6325+41.0944+83.6325C34.0486+83.6325+28.3369+77.5587+28.3369+70.6417Z",fill:c,opacity:"1"}),Object($.jsx)("path",{d:"M66.6094+83.3992C66.6094+76.4823+72.3211+70.875+79.3669+70.875C86.4127+70.875+92.1244+76.5867+92.1244+83.6325C92.1244+90.6783+86.4127+96.39+79.3669+96.39C72.3211+96.39+66.6094+90.3162+66.6094+83.3992Z",fill:c,opacity:"1"}),Object($.jsx)("path",{d:"M53.8519+57.8842C53.8519+50.9673+59.5636+45.36+66.6094+45.36C73.6552+45.36+79.3669+51.0717+79.3669+58.1175C79.3669+65.1633+73.6552+70.875+66.6094+70.875C59.5636+70.875+53.8519+64.8012+53.8519+57.8842Z",fill:c,opacity:"1"}),Object($.jsx)("path",{d:"M101.341+31.4476C101.341+24.5307+107.053+18.9234+114.098+18.9234C121.144+18.9234+126.856+24.6352+126.856+31.6809C126.856+38.7267+121.144+44.4384+114.098+44.4384C107.053+44.4384+101.341+38.3646+101.341+31.4476Z",fill:c,opacity:"1"}),Object($.jsx)("path",{d:"M90.001+31.2403C90.001+18.175+100.79+7.58342+114.098+7.58342C127.407+7.58342+138.196+18.3722+138.196+31.6809C138.196+44.9896+127.407+55.7784+114.098+55.7784C100.79+55.7784+90.001+44.3056+90.001+31.2403Z",fill:"none",opacity:"1",stroke:c,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"})]})})})]})}function ht(e){var t=e.size,n=void 0===t?15:t,r=e.fill,c=void 0===r?"#ccc":r;return Object($.jsxs)("g",{children:[Object($.jsx)("circle",{fill:"white",r:n-n/4}),Object($.jsx)("g",{children:Object($.jsx)("text",{dominantBaseline:"middle",fill:c,fontFamily:"FontAwesome",fontSize:n,textAnchor:"middle",children:"\uf0eb"})})]})}function ft(e){var t=e.size,n=void 0===t?15:t,r=e.fill,c=void 0===r?"#ccc":r;return Object($.jsxs)("g",{children:[Object($.jsx)("circle",{fill:"white",r:n-n/4}),Object($.jsx)("g",{children:Object($.jsx)("text",{dominantBaseline:"middle",fill:c,fontFamily:"FontAwesome",fontSize:n,textAnchor:"middle",children:"\uf5cb"})})]})}function pt(e){var t=e.size,n=void 0===t?15:t,r=e.fill,c=void 0===r?"#ccc":r;return Object($.jsxs)("g",{children:[Object($.jsx)("circle",{fill:"white",r:n-n/4}),Object($.jsx)("g",{children:Object($.jsx)("text",{dominantBaseline:"middle",fill:c,fontFamily:"FontAwesome",fontSize:n,textAnchor:"middle",children:"\uf12d"})})]})}function xt(e){var t=e.size,n=void 0===t?15:t,r=e.fill,c=void 0===r?"#ccc":r;return Object($.jsxs)("g",{children:[Object($.jsx)("circle",{fill:"white",r:n-n/4}),Object($.jsx)("g",{children:Object($.jsx)("text",{dominantBaseline:"middle",fill:c,fontFamily:"FontAwesome",fontSize:n,textAnchor:"middle",children:"\uf1fc"})})]})}function Ot(e){var t=e.size,n=void 0===t?15:t,r=e.fill,c=void 0===r?"#ccc":r;return Object($.jsxs)("g",{children:[Object($.jsx)("circle",{fill:"white",r:n-n/4}),Object($.jsx)("g",{transform:q(-n/2,-n/2),children:Object($.jsx)("svg",{height:n,viewBox:"0 0 141.75 141.75",width:n,children:Object($.jsxs)("g",{id:"Layer 1",children:[Object($.jsx)("path",{d:"M11.34-11.34L11.6801+130.41L153.09+130.41",fill:"none",opacity:"1",stroke:c,strokeLinecap:"round",strokeLinejoin:"miter",strokeWidth:"25"}),Object($.jsx)("path",{d:"M77.7957+28.35L77.7957+99.225",fill:"none",opacity:"1",stroke:c,strokeLinecap:"butt",strokeLinejoin:"round",strokeWidth:"25"}),Object($.jsx)("path",{d:"M113.4+63.8289L42.525+63.7875",fill:"none",opacity:"1",stroke:c,strokeLinecap:"butt",strokeLinejoin:"round",strokeWidth:"25"})]})})})]})}function mt(e){var t=e.size,n=void 0===t?15:t,r=e.fill,c=void 0===r?"#ccc":r;return Object($.jsxs)("g",{children:[Object($.jsx)("circle",{fill:"white",r:n-n/4}),Object($.jsx)("g",{children:Object($.jsx)("text",{dominantBaseline:"middle",fill:c,fontFamily:"FontAwesome",fontSize:n,textAnchor:"middle",children:"\uf0ce"})})]})}function vt(e){var t=e.size,n=void 0===t?15:t,r=e.fill,c=void 0===r?"#ccc":r;return Object($.jsxs)("g",{children:[Object($.jsx)("circle",{fill:"white",r:n-n/4}),Object($.jsx)("g",{transform:q(-n/2,-n/2),children:Object($.jsx)("svg",{height:n,viewBox:"0 0 141.75 141.75",width:n,children:Object($.jsxs)("g",{id:"Layer 1",children:[Object($.jsx)("path",{d:"M70.875+133.084C94.2246+133.264+117.574+113.829+117.574+87.3323C117.574+60.8354+117.574+0+117.574+0",fill:"none",opacity:"1",stroke:c,strokeLinecap:"butt",strokeLinejoin:"round",strokeWidth:"15"}),Object($.jsx)("path",{d:"M70.875+133.084C47.5254+133.264+24.1758+113.829+24.1758+87.3323C24.1758+60.8354+24.1758+0+24.1758+0",fill:"none",opacity:"1",stroke:c,strokeLinecap:"butt",strokeLinejoin:"round",strokeWidth:"15"})]})})})]})}function yt(e){var t=e.size,n=void 0===t?15:t,r=e.fill,c=void 0===r?"#ccc":r;return Object($.jsxs)("g",{children:[Object($.jsx)("circle",{fill:"white",r:n-n/4}),Object($.jsx)("g",{children:Object($.jsx)("text",{dominantBaseline:"middle",fill:c,fontFamily:"FontAwesome",fontSize:n,textAnchor:"middle",children:"\uf61f"})})]})}function gt(e){var t=e.size,n=void 0===t?15:t,r=e.fill,c=void 0===r?"#ccc":r;return Object($.jsxs)("g",{children:[Object($.jsx)("circle",{fill:"white",r:n-n/4}),Object($.jsx)("g",{transform:q(-n/2,-n/2),children:Object($.jsx)("svg",{height:n,viewBox:"0 0 141.75 141.75",width:n,children:Object($.jsxs)("g",{id:"Layer 1",children:[Object($.jsx)("path",{d:"M76.8252+103.165L90.6711+113.451C90.6711+113.451+99.6313+136.08+74.8472+136.08C55.0673+136.08+50.3216+110.158+51.1113+109.337C51.1113+109.337+61.8468+121.397+62.9792+115.508C64.9572+105.222+76.8252+103.165+76.8252+103.165ZM126.515+51.0305C126.247+51.0339+125.979+51.0555+125.708+51.0948C123.388+51.431+120.834+53.1223+117.368+56.6091L84.6679+88.2186C84.6674+88.219+84.6667+88.2181+84.6662+88.2186C82.7819+89.9548+82.1673+93.1071+82.92+96.5419C83.6838+100.027+85.7355+103.283+88.5655+105.246C91.3773+107.195+95.1515+107.748+99.0478+106.956C102.715+106.212+106.122+104.333+108.187+101.901C108.188+101.9+108.187+101.9+108.187+101.899C108.188+101.899+108.189+101.9+108.189+101.899L133.196+67.5932C133.196+67.5927+133.195+67.592+133.196+67.5915C135.024+64.8937+136.012+62.4766+136.077+60.2753C136.149+57.8019+135.048+55.6274+132.639+53.7484C130.231+51.8702+128.39+51.0064+126.515+51.0305Z",fill:"none",opacity:"1",stroke:c,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),Object($.jsx)("path",{d:"M7.0875+29.2572L49.6125+29.2572",fill:"none",opacity:"1",stroke:c,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12.58"}),Object($.jsx)("path",{d:"M28.4705+8.505L28.35+51.03",fill:"none",opacity:"1",stroke:c,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12.58"}),Object($.jsx)("path",{d:"M28.4705+72.2925L70.9955+29.7675",fill:"none",opacity:"1",stroke:c,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"5"}),Object($.jsx)("path",{d:"M58.1175+62.3878L58.1175+62.3878L70.0025+62.3878L93.555+62.3878",fill:"none",opacity:"1",stroke:c,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12.58"})]})})})]})}function kt(e){var t=e.size,n=void 0===t?15:t,r=e.fill,c=void 0===r?"#ccc":r;return Object($.jsxs)("g",{children:[Object($.jsx)("circle",{fill:"white",r:n-n/4}),Object($.jsx)("g",{children:Object($.jsx)("text",{dominantBaseline:"middle",fill:c,fontFamily:"FontAwesome",fontSize:n,textAnchor:"middle",children:"\uf61f"})})]})}Object(p.configure)({isolateGlobalState:!0});var wt=n(589),St=n(590),Ct=n(591),Nt=n(167),Dt=n(114),Mt=n(299),Pt=n.n(Mt),zt=n(620),At=n(592),Lt=n(308),Wt=n(113),Bt=n(588),Ft=n(199),Et=n.n(Ft),Gt=n(298),Rt=n.n(Gt),It=n(243),Tt=n(242),Kt=Object(u.a)((function(e){return Object(K.a)({formControl:{margin:e.spacing(1),width:200}})}));var _t=function(e,t,n,r,c,a){var o=Kt(),s=Object(i.useState)(n),l=Object(P.a)(s,2),d=l[0],u=l[1],j=function(e){var t=e.target.value;a?a(t):u(t)};return{selected:d,Dropdown:function(){return Object($.jsxs)(Nt.a,{className:o.formControl,variant:"outlined",children:[Object($.jsx)(It.a,{id:e,children:t}),Object($.jsx)(Tt.a,{id:"".concat(e,"-select"),label:t,labelId:e,value:c||d,onChange:j,children:r.map((function(e){return Object($.jsx)(Wt.a,{value:e.key,children:e.desc},e.key)}))})]})},setSelected:u}},Ht=Object(u.a)((function(e){return Object(K.a)({divSpacing:{margin:e.spacing(1)},center:{justifyContent:"center"}})})),Ut=Object(h.a)((function(){var e=Ht(),t=Object(i.useState)(null),n=Object(P.a)(t,2),r=n[0],c=n[1],a=Object(i.useContext)(T).exploreStore,o=a.loadedDataset,s=a.addPlot,l=(null===o||void 0===o?void 0:o.numericColumns.map((function(e){return{key:e,desc:"".concat((null===o||void 0===o?void 0:o.columnInfo[e].fullname)||""," (").concat((null===o||void 0===o?void 0:o.columnInfo[e].unit)||"",")")}})))||[],d=_t("x-axis-dropdown","X Axis","",l),u=d.selected,j=d.Dropdown,b=d.setSelected,h=_t("y-axis-dropdown","Y Axis","",l),f=h.selected,p=h.Dropdown,x=h.setSelected,O=Object(i.useCallback)((function(){c(null)}),[]),m=Object(i.useCallback)((function(){var e={id:N(),x:u,y:f};s(e),b(""),x(""),O()}),[b,x,u,f,s,O]);return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("div",{className:e.divSpacing,children:Object($.jsx)(Dt.a,{color:"primary",startIcon:Object($.jsx)(Et.a,{}),variant:"contained",onClick:function(e){c(e.currentTarget)},children:"Add Plot"})}),Object($.jsxs)(Lt.a,{anchorEl:r,open:Boolean(r),onClose:O,children:[Object($.jsx)(Wt.a,{button:!1,children:Object($.jsx)(j,{})}),Object($.jsx)(Wt.a,{button:!1,children:Object($.jsx)(p,{})}),Object($.jsx)(Wt.a,{button:!1,selected:!1,divider:!0}),Object($.jsx)(Wt.a,{alignItems:"center",button:!1,children:Object($.jsxs)(Bt.a,{className:e.center,fullWidth:!0,children:[Object($.jsx)(V.a,{color:"primary",disabled:!(u&&f),onClick:m,children:Object($.jsx)(Rt.a,{})}),Object($.jsx)(V.a,{color:"secondary",onClick:function(){b(""),x(""),c(null)},children:Object($.jsx)(J.a,{})})]})})]})]})})),Yt=Object(u.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},formControlwoWidth:{margin:e.spacing(1)}}})),Vt=function(){var e=Yt(),t=Object(i.useContext)(T),n=t.provenance,r=t.provDb,c=t.exploreStore.workflows,a=t.projectStore.currentProject,o=Object(i.useContext)(T).exploreStore,s=o.brushType,l=o.switchBrush,d=o.filter;return Object($.jsx)("div",{children:Object($.jsx)(wt.a,{color:"transparent",position:"static",children:Object($.jsxs)(St.a,{children:[Object($.jsx)(Ut,{}),Object($.jsx)(Ct.a,{orientation:"vertical",flexItem:!0}),Object($.jsx)(Nt.a,{className:e.formControl,children:Object($.jsxs)(zt.a,{value:s,exclusive:!0,onChange:function(e,t){l(t)},children:[Object($.jsx)(At.a,{value:"Rectangular",children:Object($.jsx)(Pt.a,{})}),Object($.jsx)(At.a,{value:"Freeform Small",children:"20"}),Object($.jsx)(At.a,{value:"Freeform Medium",children:"35"}),Object($.jsx)(At.a,{value:"Freeform Large",children:"50"})]})}),Object($.jsx)(Ct.a,{}),Object($.jsx)(Dt.a,{color:"primary",variant:"outlined",onClick:function(){return console.log(C(n.graph))},children:"Apply"}),Object($.jsx)(Dt.a,{color:"primary",variant:"outlined",onClick:function(){d("Out")},children:"Filter Out"}),Object($.jsx)(Dt.a,{color:"primary",variant:"outlined",onClick:function(){d("In")},children:"Filter In"}),Object($.jsx)(Dt.a,{color:"primary",variant:"outlined",onClick:function(){!function(e,t,n,r){var c={wf:t,graph:e};n.ref(r).set(c)}(n.graph,c,r,(null===a||void 0===a?void 0:a.key)||"Empty")},children:"Store prov"})]})})})};Vt.whyDidYouRender={logOnDifferentValues:!0};var Xt=Object(h.a)(Vt),Jt=n(593),Zt=n(594),qt=n(595),Qt=n(596),$t=n(597),en=n(598),tn=n(301),nn=n.n(tn),rn=n(300),cn=n.n(rn),an=Object(u.a)((function(){return Object(K.a)({common:{fill:"rgb(168,211,238)"},foreground:{opacity:.9},background:{opacity:.3},label:{fill:"black"}})})),on=Object(h.a)((function(e){var t=e.rank,n=e.height,r=void 0===n?45:n,c=e.label,a=void 0===c?t.toFixed(2):c,o=an(),s=Object(i.useRef)(null),l=Object(i.useState)(0),d=Object(P.a)(l,2),u=d[0],j=d[1];Object(i.useEffect)((function(){if(s.current){var e=s.current.getBoundingClientRect();u!==e.width&&j(e.width)}}),[u]);var b=Object(i.useMemo)((function(){return Object(Z.h)().domain([0,1]).range([0,u])}),[u]);return Object($.jsxs)("svg",{ref:s,height:r,width:"100%",children:[Object($.jsx)("rect",{className:Object(Q.a)(o.common,o.background),height:r,width:u}),Object($.jsx)("rect",{className:Object(Q.a)(o.common,o.foreground),height:r,width:b(t)}),Object($.jsx)(De.a,{className:o.label,component:"text",dominantBaseline:"middle",textAnchor:"start",transform:q(.05*u,r/2),variant:"button",children:a})]})})),sn=Object(u.a)((function(){return Object(K.a)({centerContainer:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},table:{tableLayout:"auto"}})})),ln=Object(h.a)((function(){var e=sn(),t=Object(i.useContext)(T).exploreStore,n=t.predictions,r=t.setPredictionSelection,c=t.setHoveredPrediction,a=t.isLoadingPredictions,o=Object(i.useMemo)((function(){return cn()(c,500)}),[c]);return a?Object($.jsxs)("div",{className:e.centerContainer,children:[Object($.jsx)(H.a,{}),Object($.jsx)(De.a,{variant:"button",children:"Computing Predictions"})]}):0===n.length?Object($.jsx)("div",{className:e.centerContainer,children:Object($.jsx)(De.a,{variant:"button",children:"Please make a selection"})}):Object($.jsx)("div",{style:{overflow:"scroll",padding:"1em"},children:Object($.jsx)(Jt.a,{component:Y.a,children:Object($.jsxs)(Zt.a,{className:e.table,children:[Object($.jsx)(qt.a,{children:Object($.jsxs)(Qt.a,{children:[Object($.jsx)($t.a,{width:"90%",children:"Intent"}),Object($.jsx)($t.a,{width:"10%"})]})}),Object($.jsx)(en.a,{children:n.map((function(e){return Object($.jsxs)(Qt.a,{onMouseOut:function(){o(null)},onMouseOver:function(){o(e)},children:[Object($.jsx)(ce.a,{title:e.description,children:Object($.jsx)($t.a,{width:"90%",children:Object($.jsx)(on,{label:"".concat(e.intent," (").concat(e.rank.toFixed(2),")"),rank:e.rank})})}),Object($.jsx)($t.a,{width:"10%",children:Object($.jsx)(V.a,{onClick:function(){return r(e)},children:Object($.jsx)(nn.a,{})})})]},e.hash)}))})]})})})})),dn=n(617),un=Object(u.a)((function(e){return Object(K.a)({root:{flexGrow:1,padding:e.spacing(2),overflow:"auto"},chips:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}},grid:{height:"100%"},closeIcon:{position:"absolute"}})})),jn=Object(h.a)((function(){var e=Object(i.useContext)(T),t=e.exploreStore,n=t.plots,r=t.removePlot,c=t.isLoadingData,a=t.n_plots,o=e.projectStore,s=o.currentProject,l=o.currentDatasetKey,d=o.loadDatasetWithReapply,u=o.isReapplying,j=1===a?800:500,b=un(),h=Object(_.a)(),f=1===a?"auto":6,p=Object($.jsx)(H.a,{}),x=n.map((function(e){return Object($.jsx)(U.a,{xs:f,item:!0,children:Object($.jsxs)(Y.a,{elevation:3,children:[a>1&&Object($.jsx)(V.a,{className:b.closeIcon,onClick:function(){return r(e)},children:Object($.jsx)(J.a,{})}),Object($.jsx)(Ae,{plot:e,size:j-2*h.spacing(1)})]})},e.id)}));return s&&l?Object($.jsxs)("div",{className:b.root,children:[Object($.jsx)("div",{className:b.chips,children:s.datasets.map((function(e){return Object($.jsx)(dn.a,{color:l===e.key?"primary":"default",disabled:l===e.key,label:e.version,onClick:function(){return d(e.key)}},e.key)}))}),Object($.jsx)(U.a,{alignItems:"center",className:b.grid,justify:"center",spacing:2,container:!0,children:c||u?p:x})]}):Object($.jsx)("div",{})})),bn=n(599),hn=n(601),fn=n(600),pn=n(241),xn=n(618),On=n(213),mn=n(212),vn=n(303),yn=n.n(vn),gn=n(302),kn=n.n(gn),wn=n(614),Sn=n(586),Cn=Object(h.a)((function(e){var t=e.text,n=e.handleType,r=e.color,c=Object(i.useState)(!1),a=Object(P.a)(c,2),o=a[0],s=a[1];return o?Object($.jsx)(Sn.a,{value:t,onBlur:function(){return s(!1)},onChange:function(e){e.stopPropagation(),n(e.target.value)}}):Object($.jsx)(ce.a,{title:t,children:Object($.jsx)(De.a,{align:"center",color:r,style:{width:"100px"},variant:"button",noWrap:!0,onClick:function(){return s(!0)},children:t})})})),Nn=Object(u.a)((function(e){return{card:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},close:{marginLeft:"auto"}}})),Dn=Object(h.a)((function(e){var t=e.id,n=Nn(),r=Object(i.useContext)(T),c=r.provenance,a=r.provenance.graph.nodes,o=r.exploreStore,s=o.removeFromWorkflow,l=o.currentDatasetKey,d=a[t],u=!1,j=c.getLatestArtifact(t);return j&&(u=!!l&&"Rejected"===j.artifact.status_record[l]),Object($.jsx)(bn.a,{className:n.card,variant:"outlined",children:Object($.jsx)(fn.a,{children:Object($.jsxs)(hn.a,{disableSpacing:!0,children:[Object($.jsx)(De.a,{color:u?"textSecondary":"textPrimary",variant:"button",children:d.label}),Object($.jsx)(V.a,{className:n.close,color:"secondary",disabled:u,size:"small",onClick:function(){return s(t)},children:Object($.jsx)(J.a,{})})]})})})})),Mn=Object(u.a)((function(e){return{card:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},close:{marginLeft:"auto"},badge_sync:{backgroundColor:On.a[500]},badge_unsync:{backgroundColor:mn.a[500]}}})),Pn=Object(h.a)((function(e){var t=e.workflow,n=Mn(),r=Object(i.useContext)(T),c=r.exploreStore,a=c.workflows,o=c.renameWorkflow,s=c.currentWorkflow,l=c.setCurrentWorkflow,d=c.removeWorkflow,u=c.workflowSyncStatus,j=c.setSyncStatus,b=r.provenance,h=r.db,f=Object(i.useState)(!0),p=Object(P.a)(f,2),x=p[0],O=p[1],v=t.id,y=!!u[v]&&u[v]===JSON.stringify(t),g=v===s,k=Object(i.useCallback)((function(e){return o(v,e)}),[v,o]),w=Object(i.useCallback)((function(){var e=document.createElement("textarea");e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-99999px",e.value=v,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),O(!0)}),[v]);return Object($.jsxs)($.Fragment,{children:[Object($.jsx)(bn.a,{className:n.card,variant:"outlined",onClick:function(){return l(v)},children:Object($.jsxs)(fn.a,{children:[Object($.jsxs)(hn.a,{disableSpacing:!0,children:[Object($.jsx)(pn.a,{classes:{badge:y?n.badge_sync:n.badge_unsync},color:"primary",variant:"dot",children:Object($.jsx)(Cn,{color:g?"textPrimary":"textSecondary",handleType:k,text:t.name})}),y?Object($.jsx)(V.a,{className:n.close,disabled:0===t.graph.length,size:"small",onClick:w,children:Object($.jsx)(yn.a,{})}):Object($.jsx)(V.a,{className:n.close,disabled:0===t.graph.length,size:"small",onClick:function(){return function(e,t,n,r,c){var i={id:n.id,name:n.name,project:n.project,graph:m(t,n.graph)};r.ref("".concat(e)).set(i).then((function(){c(e,JSON.stringify(n))}))}(v,b.graph,a[v],h,j)},children:Object($.jsx)(kn.a,{})}),Object($.jsx)(V.a,{size:"small",onClick:function(){return d(v)},children:Object($.jsx)(J.a,{})})]}),Object($.jsx)(Ct.a,{}),Object.values(t.graph).map((function(e){return Object($.jsx)(Dn,{id:e},e)}))]})}),Object($.jsx)(xn.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},autoHideDuration:1e3,open:x,onClose:function(){return O(!1)},children:Object($.jsx)(wn.a,{children:"Copied workflow id: ".concat(v)})})]})})),zn=Object(u.a)((function(e){return{root:{margin:e.spacing(2),padding:e.spacing(1)},card:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}})),An=Object(h.a)((function(){var e=zn(),t=Object(i.useContext)(T).exploreStore,n=t.workflows,r=t.addWorkflow;return Object($.jsxs)(Y.a,{className:e.root,children:[Object($.jsx)(De.a,{align:"center",variant:"h4",children:"Workflow"}),Object($.jsx)(Ct.a,{}),Object($.jsxs)(bn.a,{variant:"outlined",children:[Object($.jsx)(hn.a,{children:Object($.jsx)(Dt.a,{color:"primary",onClick:function(){return r()},children:"Add Workflow"})}),Object($.jsx)(fn.a,{children:Object.values(n).map((function(e){return Object($.jsx)(Pn,{workflow:e},e.id)}))})]})]})})),Ln=Object(u.a)((function(){return{root:{".red":{backgroundColor:"#ff8080"},".green":{backgroundColor:"#90EE90"},".yellow":{backgroundColor:"#ffff8b"},display:"grid",height:"100vh",width:"100vw",gridTemplateRows:"min-content 1fr",overflow:"hidden"},layout:{display:"grid",gridTemplateColumns:"5fr 1.5fr 1.3fr 1.5fr",overflow:"hidden"}}})),Wn={"Load Dataset":{backboneGlyph:Object($.jsx)(mt,{size:22}),currentGlyph:Object($.jsx)(mt,{fill:"#2185d0",size:22}),regularGlyph:Object($.jsx)(mt,{size:16}),bundleGlyph:Object($.jsx)(mt,{fill:"#2185d0",size:22})},MultiBrush:{backboneGlyph:Object($.jsx)(vt,{size:22}),currentGlyph:Object($.jsx)(vt,{fill:"#2185d0",size:22}),regularGlyph:Object($.jsx)(vt,{size:16}),bundleGlyph:Object($.jsx)(vt,{fill:"#2185d0",size:22})},"Switch Category Visibility":{backboneGlyph:Object($.jsx)(yt,{size:22}),currentGlyph:Object($.jsx)(yt,{fill:"#2185d0",size:22}),regularGlyph:Object($.jsx)(yt,{size:16}),bundleGlyph:Object($.jsx)(yt,{fill:"#2185d0",size:22})},"Change Category":{backboneGlyph:Object($.jsx)(kt,{size:22}),currentGlyph:Object($.jsx)(kt,{fill:"#2185d0",size:22}),regularGlyph:Object($.jsx)(kt,{size:16}),bundleGlyph:Object($.jsx)(kt,{fill:"#2185d0",size:22})},"Add Plot":{backboneGlyph:Object($.jsx)(Ot,{size:22}),currentGlyph:Object($.jsx)(Ot,{fill:"#2185d0",size:22}),regularGlyph:Object($.jsx)(Ot,{size:16}),bundleGlyph:Object($.jsx)(Ot,{fill:"#2185d0",size:22})},"Point Selection":{backboneGlyph:Object($.jsx)(xt,{size:22}),currentGlyph:Object($.jsx)(xt,{fill:"#2185d0",size:22}),regularGlyph:Object($.jsx)(xt,{size:16}),bundleGlyph:Object($.jsx)(xt,{fill:"#2185d0",size:22})},"Point Deselection":{backboneGlyph:Object($.jsx)(pt,{size:22}),currentGlyph:Object($.jsx)(pt,{fill:"#2185d0",size:22}),regularGlyph:Object($.jsx)(pt,{size:16}),bundleGlyph:Object($.jsx)(pt,{fill:"#2185d0",size:22})},"Add Brush":{backboneGlyph:Object($.jsx)(ft,{size:22}),currentGlyph:Object($.jsx)(ft,{fill:"#2185d0",size:22}),regularGlyph:Object($.jsx)(ft,{size:16}),bundleGlyph:Object($.jsx)(ft,{fill:"#2185d0",size:22})},"Lock Prediction":{backboneGlyph:Object($.jsx)(ht,{size:22}),currentGlyph:Object($.jsx)(ht,{fill:"#2185d0",size:22}),regularGlyph:Object($.jsx)(ht,{size:16}),bundleGlyph:Object($.jsx)(ht,{fill:"rgb(248, 191, 132)",size:22})},"Prediction Selection":{backboneGlyph:Object($.jsx)(bt,{size:22}),currentGlyph:Object($.jsx)(bt,{fill:"#2185d0",size:22}),regularGlyph:Object($.jsx)(bt,{size:16}),bundleGlyph:Object($.jsx)(bt,{fill:"#2185d0",size:22})},Invert:{backboneGlyph:Object($.jsx)(jt,{size:22}),currentGlyph:Object($.jsx)(jt,{fill:"#2185d0",size:22}),regularGlyph:Object($.jsx)(jt,{size:16}),bundleGlyph:Object($.jsx)(jt,{fill:"#2185d0",size:22})},"Update Brush":{backboneGlyph:Object($.jsx)(ut,{size:22}),currentGlyph:Object($.jsx)(ut,{fill:"#2185d0",size:22}),regularGlyph:Object($.jsx)(ut,{size:16}),bundleGlyph:Object($.jsx)(ut,{fill:"#2185d0",size:22})},"Remove Brush":{backboneGlyph:Object($.jsx)(dt,{size:22}),currentGlyph:Object($.jsx)(dt,{fill:"#2185d0",size:22}),regularGlyph:Object($.jsx)(dt,{size:16}),bundleGlyph:Object($.jsx)(dt,{fill:"#2185d0",size:22})},Filter:{backboneGlyph:Object($.jsx)(lt,{size:22}),currentGlyph:Object($.jsx)(lt,{fill:"#2185d0",size:22}),regularGlyph:Object($.jsx)(lt,{size:16}),bundleGlyph:Object($.jsx)(lt,{fill:"#ccc",size:22})},"Change Brush Type":{backboneGlyph:Object($.jsx)(st,{size:22}),currentGlyph:Object($.jsx)(st,{fill:"#2185d0",size:22}),regularGlyph:Object($.jsx)(st,{size:16}),bundleGlyph:Object($.jsx)(st,{fill:"#2185d0",size:22})},"Change Brush Size":{backboneGlyph:Object($.jsx)(gt,{size:22}),currentGlyph:Object($.jsx)(gt,{fill:"#2185d0",size:22}),regularGlyph:Object($.jsx)(gt,{size:16}),bundleGlyph:Object($.jsx)(gt,{fill:"#2185d0",size:22})}},Bn=Object(h.a)((function(){var e=Ln(),t=Object(i.useContext)(T),n=t.exploreStore,r=t.projectStore,c=r.loadedDataset,a=r.nodeCreationMap,o=r.approveNode,s=r.rejectNode,l=t.provenance,d=t.bundledNodes,u=t.loadedWorkflowId,h=t.loadSavedProject,f=n.addToWorkflow;Object(i.useEffect)((function(){var e=l.current;if(!(Object(b.isChildNode)(e)&&e.children.length>0)&&!(!c||n.n_plots>0||u||h)){var t=c.numericColumns,r={id:N(),x:t[0],y:t[1]};n.addPlot(r)}}));var p,x={},O=Object(v.a)(d);try{for(O.s();!(p=O.n()).done;){var m=p.value;0!==m.length&&(x[m[0]]={metadata:"",bundleLabel:"",bunchedNodes:m})}}catch(y){O.e(y)}finally{O.f()}return Object($.jsxs)("div",{className:e.root,children:[Object($.jsx)(j.a,{}),Object($.jsx)(Xt,{}),Object($.jsxs)("div",{className:e.layout,children:[Object($.jsx)(jn,{}),Object($.jsx)(ln,{}),Object($.jsx)(ot,{addToWorkflow:f,approvedFunction:function(e){return o(e)},backboneGutter:40,changeCurrent:function(e){return l.goToNode(e)},current:l.graph.current,currentDataset:(null===c||void 0===c?void 0:c.version)||"",ephemeralUndo:!1,eventConfig:Wn,nodeCreationMap:a,nodeMap:l.graph.nodes,prov:l,rejectedFunction:function(e){return s(e)},root:l.graph.root,undoRedoButtons:!0},l.graph.root),Object($.jsx)(An,{})]})]})})),Fn=Object(h.a)((function(e){var t=e.location,n=Object(i.useContext)(T),r=n.setQueryParams,c=n.projectStore.loadedDataset;return Object(i.useEffect)((function(){r(t.search)}),[t.search,r]),c?Object($.jsx)(Bn,{}):Object($.jsx)(d.a,{to:{pathname:"/project",search:t.search}})})),En=n(522),Gn=n(237),Rn=n.n(Gn),In=n(236),Tn=function(e){var t=e.info,n=e.width,r=e.height;return Object($.jsxs)("div",{children:[Object.keys(t).length," ",n," ",r]})},Kn=Object(h.a)((function(e){var t=e.column,n=e.width,r=e.height,c=t.dataType,i=t.fullname;return"id"===c||"label"===c?Object($.jsx)($.Fragment,{children:i}):"categorical"===t.dataType?Object($.jsx)(Tn,{height:r,info:t.info,width:n}):Object($.jsx)("div",{children:"Custom"})}));function _n(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:56,r=arguments.length>3?arguments[3]:void 0,c=Object(i.useCallback)((function(e){return{padding:0,width:"100%",background:e}}),[]),a=Object(i.useMemo)((function(){if(!e)return{rows:[],columns:[]};var i=e.columnInfo,a=e.columns;return{rows:e.values,columns:a.filter((function(e){return"id"!==e&&"iid"!==e})).map((function(e){return{field:e,headerName:i[e].fullname,description:i[e].unit||"",flex:1,renderHeader:function(t){var r=t.colDef.width;return n?Object($.jsx)("div",{children:t.field}):Object($.jsx)("div",{children:Object($.jsx)(Kn,{column:i[e],height:n,width:r})})},renderCell:function(e){if(null===t)return Object($.jsx)("div",{children:e.value});var n=e.row.Label,i=t.values.filter((function(e){return e.Label===n})),a="none";if(0===i.length)a=r?"#ff8080":"#90EE90";else if(!r){e.getValue(e.field)!==i[0][e.field]&&(a="#ffff8b")}return Object($.jsx)("div",{style:c(a),children:e.value})},cellClassName:function(e){if(null===t)return"none";var n=e.row.Label,c=t.values.filter((function(e){return e.Label===n})),i="none";if(0===c.length)i=r?"red":"green";else if(!r){e.getValue(e.field)!==c[0][e.field]&&(i="yellow")}return i}}}))}}),[e,t,n,r,c]),o=a.rows,s=void 0===o?[]:o,l=a.columns,d=void 0===l?[]:l;return{rows:s,columns:d}}var Hn=Object(u.a)((function(){return{centerText:{display:"flex",alignItems:"center",justifyContent:"center"}}})),Un=Object(h.a)((function(e){var t=Object(i.useRef)(null),n=Hn(),r=Object(i.useContext)(T).projectStore,c=_n(r.loadedDataset,r.comparisonDataset,56,!0),a=c.rows,o=c.columns;return Object($.jsx)("div",{className:n.centerText,style:{gridColumnStart:1,gridColumnEnd:1+e.columnNum},children:a.length>0?Object($.jsx)(In.a,{ref:t,columns:o,headerHeight:56,rows:a,autoPageSize:!0,pagination:!0}):Object($.jsx)(De.a,{variant:"button",children:"Please select a dataset"})})})),Yn=Object(h.a)((function(){var e=Object(i.useRef)(null),t=Object(i.useContext)(T).projectStore,n=t.loadedDataset,r=_n(t.comparisonDataset,n,56,!1),c=r.rows,a=r.columns;return Object($.jsx)("div",{style:{gridColumnStart:2,gridColumnEnd:3},children:Object($.jsx)(In.a,{ref:e,columns:a,headerHeight:56,rows:c,autoPageSize:!0,pagination:!0})})})),Vn=n(604),Xn=n(605),Jn=n(606),Zn=n(316),qn=n(608),Qn=n(307),$n=n(613),er=n(607),tr=n(519),nr=n(520),rr=n(602),cr=n(603),ir=Object(h.a)((function(e){var t=e.trackers,n=e.updateWhenDone,r=Object(i.useState)([]),c=Object(P.a)(r,2),a=c[0],o=c[1],s=Object(i.useState)(!1),l=Object(P.a)(s,2),d=l[0],u=l[1];return Object(i.useEffect)((function(){if(0!==t.length){d&&(o([]),n());var e=setInterval((function(){S.a.post("".concat(D,"/dataset/status"),{trackers:t}).then((function(e){var t=e.data;0===t.map((function(e){return e.status})).filter((function(e){return"SUCCESS"!==e})).length&&u(!0),o(t)}))}),500);return function(){return clearInterval(e)}}}),[t,a,d,n]),Object($.jsx)(tr.a,{children:a.map((function(e){var t=e.type,n=e.info,r=n.processed,c=n.to_process;return Object($.jsxs)(nr.a,{children:[Object($.jsxs)(rr.a,{children:[t," (",r,"/",c,")"]}),Object($.jsx)(rr.a,{children:Object($.jsx)(cr.a,{value:r/c*100,variant:"determinate"})})]},t)}))})})),ar=new $n.a;var or=Object(h.a)((function(e){var t=e.open,n=e.handleClose,r=function(e){var t=Object(i.useState)(!1),n=Object(P.a)(t,2),r=n[0],c=n[1],a=Object(i.useState)(!1),o=Object(P.a)(a,2),s=o[0],l=o[1],d=Object(i.useState)([]),u=Object(P.a)(d,2),j=u[0],b=u[1],h=Object(i.useCallback)((function(){c(!1),l(!0)}),[]);return{handleSubmit:Object(i.useCallback)((function(t){if(e){var n=new FormData;Object.entries(t).forEach((function(e){n.append(e[0],e[1])})),n.append("reset","True"),S.a.post("".concat(D,"/").concat(e.key,"/dataset/"),n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){b(e.data.trackers),c(!0)}))}}),[e]),initialValues:{version:"",description:"",dataset:null,metadata:null},showStatus:r,trackers:j,updateWhenDone:h,processingComplete:s}}(Object(i.useContext)(T).projectStore.currentProject),c=r.initialValues,a=r.handleSubmit,o=r.showStatus,s=r.trackers,l=r.updateWhenDone,d=r.processingComplete,u=Object(Qn.a)({initialValues:c,onSubmit:a});return Object($.jsx)($.Fragment,{children:Object($.jsxs)(Vn.a,{open:t,onClose:n,children:[Object($.jsx)(Xn.a,{children:"Upload a new dataset"}),Object($.jsxs)(Jn.a,{children:[Object($.jsxs)("form",{id:"dataset-form",onSubmit:u.handleSubmit,children:[Object($.jsx)(Zn.a,{id:"version",label:"Version",margin:"dense",type:"text",value:u.values.version,fullWidth:!0,required:!0,onChange:u.handleChange}),Object($.jsx)(Zn.a,{id:"description",label:"Description",margin:"dense",type:"text",value:u.values.description,fullWidth:!0,multiline:!0,onChange:u.handleChange}),Object($.jsxs)(It.a,{children:[Object($.jsx)(Sn.a,{id:"csv",type:"file",hidden:!0,required:!0,onChange:function(e){var t=e.target.files;t&&t.length>0&&u.setFieldValue("dataset",t[0])}}),"Dataset*"]}),Object($.jsxs)(It.a,{children:[Object($.jsx)(Sn.a,{id:"yaml",type:"file",hidden:!0,onChange:function(e){var t=e.target.files;t&&t.length>0&&u.setFieldValue("metadata",t[0])}}),"Metadata"]})]}),o&&Object($.jsx)(er.a,{client:ar,children:Object($.jsx)(ir,{trackers:s,updateWhenDone:l})})]}),Object($.jsx)(qn.a,{children:d?Object($.jsx)(Dt.a,{onClick:function(){return n()},children:"Close"}):Object($.jsxs)($.Fragment,{children:[Object($.jsx)(Dt.a,{onClick:function(){return n()},children:"Cancel"}),Object($.jsx)(Dt.a,{disabled:u.isSubmitting,form:"dataset-form",type:"submit",children:"Add"})]})})]})})})),sr=Object(u.a)((function(){return Object(K.a)({colorClass:{},root:{"& .red":{background:"#ff8080"},"& .green":{backgroundColor:"#90EE90"},"& .yellow":{backgroundColor:"#ffff8b"},flexGrow:1,display:"grid",height:"100vh",gridTemplateRows:"min-content 1fr",gridTemplateColumns:"2fr 2fr"}})})),lr=Object(h.a)((function(){var e=sr(),t=Object(i.useContext)(T),n=t.projectStore,r=n.currentProject,c=n.comparisonDatasetKey,a=n.loadedDatasetKey,o=n.loadDataset,s=n.loadComparisonDataset,d=t.search,u=Object(i.useState)(!1),j=Object(P.a)(u,2),b=j[0],h=j[1],f=Object(i.useState)(!1),p=Object(P.a)(f,2),x=p[0],O=p[1],m=Object(i.useMemo)((function(){return(null===r||void 0===r?void 0:r.datasets.map((function(e){return{key:e.key,desc:e.version}})))||[]}),[r]),v=_t("dataset-dropdown","Dataset","",m,m.map((function(e){return e.key})).includes(a)?a:"",o).Dropdown,y=_t("dataset-dropdown","Comparison Dataset","",m,c&&m.map((function(e){return e.key})).includes(c)?c:"",s).Dropdown;return r?Object($.jsxs)("div",{className:e.root,children:[Object($.jsx)(wt.a,{color:"transparent",position:"static",style:{gridColumnStart:1,gridColumnEnd:3},children:Object($.jsxs)(St.a,{children:[Object($.jsx)(De.a,{variant:"h6",noWrap:!0,children:r.name}),Object($.jsx)(v,{}),x?Object($.jsx)(y,{}):null,Object($.jsx)(Dt.a,{color:"primary",startIcon:Object($.jsx)(Et.a,{}),variant:"outlined",onClick:function(){return h(!0)},children:"Upload Dataset"}),Object($.jsx)(Dt.a,{color:"primary",component:l.b,startIcon:Object($.jsx)(Rn.a,{}),to:{pathname:"/explore",search:d},variant:"outlined",children:"Load Dataset"}),Object($.jsx)(En.a,{checked:x,color:"primary",inputProps:{"aria-label":"secondary checkbox"},name:"checkedA",onChange:function(){O(!x)}}),x?Object($.jsx)(Dt.a,{color:"primary",component:l.b,startIcon:Object($.jsx)(Rn.a,{}),to:"/compare",variant:"outlined",children:"Comparison View"}):null]})}),Object($.jsx)(Un,{columnNum:x?1:2}),x&&Object($.jsx)(Yn,{}),Object($.jsx)(or,{handleClose:function(){return h(!1)},open:b})]}):Object($.jsx)("div",{children:"Unloaded"})})),dr=n(619),ur=n(523),jr=n(305),br=n.n(jr),hr=n(306),fr=n.n(hr),pr=n(609),xr=Object(h.a)((function(e){var t=e.open,n=e.handleClose,r=Object(i.useContext)(T).projectStore.loadProjects,c=Object(i.useState)(""),a=Object(P.a)(c,2),o=a[0],s=a[1],l=Object(i.useState)(""),d=Object(P.a)(l,2),u=d[0],j=d[1],b=Object(i.useState)(""),h=Object(P.a)(b,2),f=h[0],p=h[1],x=Object(i.useState)(!1),O=Object(P.a)(x,2),m=O[0],v=O[1],y=Object(i.useCallback)((function(){var e=new FormData;e.append("name",u),e.append("reset","True"),S.a.post("".concat(D,"/project/").concat(o),e).then((function(e){var t=e.data.message;p(t)})).catch((function(){p("Something went wrong!")})).finally((function(){s(""),j(""),v(!0),r(o)}))}),[o,u,r]);return Object($.jsxs)($.Fragment,{children:[Object($.jsxs)(Vn.a,{open:t,onClose:n,children:[Object($.jsx)(Xn.a,{children:"Create new project"}),Object($.jsxs)(Jn.a,{children:[Object($.jsx)(pr.a,{children:"Please enter name and an unique id for the project."}),Object($.jsx)(Zn.a,{id:"project-id",label:"Project ID",margin:"dense",type:"text",value:o,required:!0,onChange:function(e){return s(e.target.value)}}),Object($.jsx)("br",{}),Object($.jsx)(Zn.a,{id:"project-name",label:"Project Name",margin:"dense",type:"text",value:u,required:!0,onChange:function(e){return j(e.target.value)}})]}),Object($.jsxs)(qn.a,{children:[Object($.jsx)(Dt.a,{onClick:function(){return n()},children:"Cancel"}),Object($.jsx)(Dt.a,{disabled:""===o||""===u,onClick:function(){y(),n()},children:"Add"})]})]}),Object($.jsx)(xn.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:2e3,message:f,open:m,onClose:function(){return v(!1)}})]})})),Or=240,mr=Object(u.a)((function(e){return Object(K.a)({root:{display:"flex"},appBar:{width:"calc(100% - ".concat(Or,"px)"),marginLeft:Or},drawer:{width:Or,flexShrink:0},drawerPaper:{width:Or},toolbar:Object(z.a)(Object(z.a)({},e.mixins.toolbar),{},{display:"flex",alignItems:"center",justifyContent:"center"})})})),vr=Object(h.a)((function(){var e=mr(),t=Object(i.useContext)(T).projectStore,n=t.projects,r=t.currentProject,c=t.loadProjectByKey,a=Object(i.useState)(!1),o=Object(P.a)(a,2),s=o[0],l=o[1];return Object($.jsxs)(dr.a,{className:e.drawer,classes:{paper:e.drawerPaper},variant:"permanent",children:[Object($.jsx)("div",{className:e.toolbar,children:Object($.jsx)(De.a,{variant:"h6",children:"Projects"})}),Object($.jsx)(Ct.a,{}),Object($.jsx)(tr.a,{children:Object($.jsxs)(nr.a,{button:!0,onClick:function(){return l(!0)},children:[Object($.jsx)(ur.a,{children:Object($.jsx)(br.a,{})}),Object($.jsx)(rr.a,{primary:"Add Project",children:" "})]})}),Object($.jsx)(Ct.a,{}),Object($.jsx)(tr.a,{children:n.map((function(e){return Object($.jsxs)(nr.a,{selected:e.key===(null===r||void 0===r?void 0:r.key),button:!0,onClick:function(){return c(e.key)},children:[Object($.jsx)(ur.a,{children:Object($.jsx)(fr.a,{})}),Object($.jsx)(rr.a,{primary:e.name})]},e.key)}))}),Object($.jsx)(xr,{handleClose:function(){return l(!1)},open:s})]})})),yr=Object(u.a)((function(){return Object(K.a)({root:{display:"flex"}})})),gr=Object(h.a)((function(e){var t=e.location,n=yr(),r=Object(i.useContext)(T),c=r.projectStore,a=c.currentProject,o=c.loadedDataset,s=r.setQueryParams,l=r.debug,u=r.redirectPath,b=r.search;r.loadedWorkflowId;Object(i.useEffect)((function(){s(t.search)}),[t.search,s]);return l&&"explore"===u&&o?Object($.jsx)(d.a,{to:{pathname:"/explore",search:b}}):Object($.jsxs)("div",{className:n.root,children:[Object($.jsx)(j.a,{}),Object($.jsx)(vr,{}),a?Object($.jsx)(lr,{}):"Please select a project"]})}));n(511);c()(a.a,{trackAllPureComponents:!0,exclude:[/XGrid|RowCells|GridCell/]});var kr=window.location.search,wr=Object($.jsx)(l.a,{children:Object($.jsxs)(d.d,{children:[Object($.jsx)(d.a,{from:"/",to:{pathname:"/project",search:kr},exact:!0}),Object($.jsx)(d.b,{component:Fn,path:"/explore",exact:!0}),Object($.jsx)(d.b,{component:gr,path:"/project",exact:!0}),Object($.jsx)(d.b,{component:Ee,path:"/compare",exact:!0})]})});s.a.render(wr,document.getElementById("root"))}},[[512,1,2]]]);
//# sourceMappingURL=main.7e206f06.chunk.js.map