{"version":3,"sources":["components/Workflow/Firebase.ts","Store/CompareStore.ts","Utils/DeepCopy.ts","Utils/IDGens.ts","consts.ts","Store/ExploreStore.ts","Store/ProjectStore.ts","Store/ProvenanceActions.ts","Store/Store.ts","Utils/Translate.ts","components/Brush/Components/RectBrush.tsx","components/Brush/Components/BrushComponent.tsx","components/ColorSpecs.ts","components/Scatterplot/styles.ts","components/Comparison/ComparisonMarks.tsx","components/Freeform/FreeFormBrush.tsx","components/Hooks/useScale.ts","components/Hooks/useScatterplot.ts","components/Scatterplot/Axis.tsx","components/Scatterplot/Legend.tsx","components/Scatterplot/Marks.tsx","components/Scatterplot/Overlay/DBScan.tsx","components/Scatterplot/Overlay/KMeans.tsx","components/Scatterplot/Overlay/LR.tsx","components/Scatterplot/Overlay/HatchPattern.tsx","components/Scatterplot/Overlay/Skyline.tsx","components/Scatterplot/Overlay/Overlay.tsx","components/Scatterplot/Overlay/SkylineLegend.tsx","components/Scatterplot/Scatterplot.tsx","components/Comparison/ComparisonLegend.tsx","components/Comparison/ComparisonScatterplot.tsx","components/Comparison/ComparisonHome.tsx","trrack-vis/Utils/findBundleParent.ts","trrack-vis/Utils/translate.ts","trrack-vis/Utils/TreeLayout.ts","trrack-vis/components/Styles.ts","trrack-vis/components/BackboneNode.tsx","trrack-vis/components/BookmarkNode.tsx","trrack-vis/components/BookmarkListView.tsx","trrack-vis/components/BookmarkTransitions.ts","trrack-vis/components/LinkTransitions.ts","trrack-vis/components/BundleTransitions.ts","trrack-vis/components/Link.tsx","trrack-vis/components/NodeTransitions.ts","trrack-vis/components/UndoRedoButton.tsx","trrack-vis/components/ProvVis.tsx","components/Icons.tsx","trrack-vis/components/ProvVisCreator.tsx","components/Dropdown.tsx","components/AddPlotComponent/AddPlot.tsx","components/Navbar.tsx","components/Predictions/Bar.tsx","components/Predictions/PredictionTable.tsx","components/Visualization.tsx","components/Editable.tsx","components/Workflow/Action.tsx","components/Workflow/Workflow.tsx","components/Workflow/Workflows.tsx","components/Explore/ExploreHome.tsx","components/Explore/Explore.tsx","components/Project/HeaderDistribution.tsx","components/Project/DatasetTable.tsx","components/Project/StatusBars.tsx","components/Project/UploadDatasetDialog.tsx","components/Project/ProjectView.tsx","components/Project/AddProjectDialog.tsx","components/Project/Sidebar.tsx","components/Project/ProjectHome.tsx","index.tsx"],"names":["config","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","getGraph","graph","ids","root","current","length","nodes","forEach","id","idx","arr","node","isChildNode","parent","children","push","CompareStore","rootStore","updatedActions","this","makeAutoObservable","projectStore","comparisonDataset","exploreStore","provenance","includes","flag","i","isBelowCurrent","deepCopy","obj","JSON","parse","stringify","getPlotId","Date","getTime","toString","SERVER","ExploreStore","isLoadingData","isLoadingPredictions","hoveredPrediction","multiBrushBehaviour","showCategories","brushType","stateRecord","predictions","currBrushed","workflows","currentWorkflow","workflowSyncStatus","isImporting","updateBrushed","newSelected","addWorkflow","workflowName","counterInit","Object","values","filter","d","name","startsWith","counter","c","split","parseInt","workflow","project","currentProject","key","renameWorkflow","removeWorkflow","ws","setCurrentWorkflow","addToWorkflow","label","sort","a","b","metadata","createdOn","removeFromWorkflow","setSyncStatus","val","addPlot","plot","currentDatasetKey","addPlotAction","actions","setLabel","state","apply","plots","currentNode","currentNodes","removePlot","removePlotAction","x","y","brushes","pointSelection","filterType","filterAction","type","points","selectedPoints","brushSelections","prediction","switchBrush","setFreeformSelection","addPointSelection","isPaintBrush","pointSelectionAction","addPredictions","setBrushSelection","affectedId","addBrushAction","updateBrushAction","removeBrushAction","setPredictionSelection","predictionSelectionAction","original_id","intent","setHoveredPrediction","dimensions","plt","Axios","post","selections","then","action","response","data","goToNode","reaction","curr","prev","rec","datasets","dataset","addArtifact","original_dataset","status_record","loadedDataset","Error","sel","memberIds","Array","from","Set","art","getLatestArtifact","artifact","dt_str","window","localStorage","getItem","setItem","ProjectStore","projects","comparisonDatasetKey","workingDataset","isReapplying","versionFromDatasetKey","datasetVersion","ds","find","version","projectByKey","p","fetchCurrentDataset","get","approveNode","rejectNode","loadDatasetWithReapply","loadProjects","newProjectId","debug","loadProjectByKey","defaultProject","proj","loadDefaultDataset","datasetKey","defaultDatasetKey","map","loadDataset","loadedWorkflowId","loadFromWorkflow","loadSavedProject","loadComparisonDataset","loadComparisonFilter","selectedIds","removeIds","idList","j","loadOnlyFilter","entries","ent","getState","base","target","res","setTimeout","workflowId","db","ref","once","loadFromFirebase","snap","wf","n","importProvenanceGraph","projectName","loadDemo","provDb","originMap","source","createdIn","approvedIn","v","rejectedIn","compareStore","updatedFilterPoints","createAction","interaction","saveStateMode","setEventType","selected","brush","provenanceActions","Store","createContext","search","redirectPath","bundledNodes","setQueryParams","searchParams","URLSearchParams","demo","initProvenance","loadFromUrl","done","app","firebase","apps","initializeApp","database","initializeFirebase","translate","useStyles","makeStyles","createStyles","fill","opacity","stroke","strokeWidth","cursor","closeIconText","fontWeight","fontFamily","fontSize","closeIconBackground","resizeBase","pointerEvents","ns","ew","nwse","nesw","RectBrush","height","width","onMouseDown","onResizeStart","closeHandler","resizeHandlerSize","useState","showIcon","setShowIcon","timeoutId","setTimeoutId","useEffect","clearInterval","baseRectangle","className","event","onMouseEnter","onMouseLeave","tout","northRect","clsx","southRect","westRect","eastRect","nwRect","neRect","swRect","seRect","transform","display","dominantBaseline","dy","textAnchor","r","onClick","BrushComponent","left","right","top","bottom","xScale","yScale","onBrushHandler","disableBrush","overlayRef","useRef","mouseDownCreation","setMouseDownCreation","mouseDownMove","setMouseDownMove","mouseDownResize","setMouseDownResize","resizeDirection","setResizeDirection","activeBrush","setActiveBrush","diff","setDiff","Math","abs","useMemo","yScaleUpdated","copy","domain","range","pixelX","pixelY","dataX","invert","dataY","extentToPixel","x1","x2","y1","y2","extentToData","searchArea","quadTree","quadtree","extent","addAll","selectedNodes","visit","rect1","rect2","rect","point","newNode","next","useQuadSearch","onBrush","useCallback","br","extents","closeBrushHandler","creationMouseDownHandler","currentTarget","getBoundingClientRect","clientX","clientY","creationMouseMoveHandler","targetNode","creationMouseUpHandler","correctBrushExtents","moveMouseDownHandler","currX","currY","moveMouseMoveHandler","brushHeight","brushWidth","diffX","diffY","newX","newY","moveMouseUpHandler","resizeMouseDownHandler","brushId","direction","resizeMouseMoveHandler","resizeMouseUpHandler","addEventListener","removeEventListener","renderActiveBrush","overlay","brushList","renderedBrushes","bottomLayer","topLayer","input","MATCHES","IPNS","ISNP","UNION","useScatterplotStyle","newColor","removedColor","newMark","removedMark","strokeLinecap","movedLine","movedPoint","regularMark","nonUnionMark","unionMark","regularForceMark","intermittentHighlight","matches","isnp","ipns","createComet","theta","atan","xLength","cos","yLength","sin","observer","compPoints","dataDisplay","classes","useContext","editGroup","style","cx","cy","Tooltip","title","brushStyle","transition","brushDown","brushHide","isInCircle","center","radius","x_sq","pow","y_sq","sqrt","extentPadding","brushSize","brushRef","layerRef","selectedPointsRef","mouseIn","setMouseIn","mouseDown","setMouseDown","x0","x3","y0","y3","handleMouseUp","handleMove","nodeSelection","select","edgeY","attr","removeEvent","useScale","nice","d0","d1","r0","r1","scale","scaleLinear","clamp","useScatterplotData","comparisonData","compDataFull","compDataset","fullData","workingValues","compData","compDatasetValues","allPoints","x_extents","y_extents","columnName","gRef","columnInfo","axis","axisLeft","axisRight","axisBottom","axisTop","tickFormat","call","labelTransform","max","column","short","fullname","unit","offset","dx","membership","matchIds","isnpIds","ipnsIds","info","lineGen","line","hull","selected_center","sym","symbol","symbolWye","size","coeff","intercept","threshold","oy1","oy2","ooy1","ooy2","clipPath","HatchPattern","patternTransform","patternUnits","lineBase","strokeOpacity","hatch","frontier","sense","x_sense","y_sense","scaled_frontier","x_lines","y_lines","algorithm","lineHeight","Typography","component","variant","props","dimension","originalMarks","theme","useTheme","spacing","labelColumn","showMatchesLegend","showSkylineLegend","selectedPointsComparison","margin","sp_dimension","freeFormBrushHandler","_","selectorString","join","selectAll","classed","rectBrushHandler","selection","brs","entry","ComparisonMarks","setDataDisplay","rx","font-weight","flexGrow","padding","overflow","grid","closeIcon","position","n_plots","desc","spContainerDimension","xs","loader","CircularProgress","scatterPlots","Grid","item","ComparisonLegend","Paper","elevation","IconButton","alignItems","justify","container","backgroundColor","gridTemplateRows","layout","gridTemplateColumns","location","numericColumns","CssBaseline","ComparisonScatterplot","to","pathname","findBundleParent","nodeId","bundleMap","parentList","bundle","bunchedNodes","treeLayout","currentPath","path","reverse","getPathTo","depthMap","explored","toExplore","currDepth","temp","pop","has","add","DFS","final","child","treeColor","BackboneNode","prov","first","iconOnly","duration","textSize","nodeMap","annotationOpen","bookmark","setAnnotationOpen","exemptList","setExemptList","eventConfig","popupContent","editAnnotations","annotationContent","approvedFunction","rejectedFunction","currentDataset","nodeCreationMap","expandedClusterList","cursorStyle","artifacts","annotations","getLatestAnnotation","annotation","annotateText","setAnnotateText","handleCheck","lastAnnotation","trim","addAnnotation","handleClose","handleInputChange","glyph","dropDownAdded","eventType","bundleGlyph","currentGlyph","backboneGlyph","keys","annotate","actionType","depth","substr","labelG","alignmentBaseline","maxWidth","Button","maxHeight","stopPropagation","Icon","color","e","nodeClicked","labelClicked","getBookmark","setBookmark","enter","timing","delay","start","undefined","Popup","content","trigger","resize","value","onChange","innerNode","exemptCopy","splice","findIndex","BookmarkNode","BookmarkListView","bookmarks","bookmarked","keyAccessor","xOffset","yOffset","nodeList","opactiy","leave","update","BookmarkTransitions","innerBookmarks","linkTransitions","clusterOffset","backboneOffset","annotationHeight","clusteredNodesInFront","getX","bundleTransitions","stratifiedMap","highestDepth","lowestDepth","validity","Link","nodeTransitions","undoButtonStyle","marginTop","borderRadius","marginRight","$nest","redoButtonStyle","UndoRedoButton","undoCallback","redoCallback","isAtRoot","isAtLatest","disabled","justifyContent","changeCurrent","gutter","backboneGutter","verticalSpace","clusterVerticalSpace","regularCircleRadius","backboneCircleRadius","regularCircleStroke","backboneCircleStroke","sideOffset","topOffset","linkWidth","clusterLabels","brushCallback","ephemeralUndo","setFirst","list","eventTypes","group","bundleLabel","concat","setExpandedClusterList","types","symbols","d3","conf","regularGlyph","setDefaultConfig","copyList","strat","parentId","localCurr","collapsedParent","bundleParents","allExpanded","stratifiedTree","stratifiedList","descendants","links","shiftLeft","svgWidth","bookmarkTabView","graphTabView","goForwardToNonEphemeral","goForwardOneStep","goBackToNonEphemeral","goBackOneStep","link","linkArr","onMouseOut","onMouseOver","ry","panes","menuItem","icon","render","Tab","Pane","attached","overflowX","overflowY","menu","secondary","pointing","ChangeBrushType","viewBox","strokeLinejoin","ClearAll","RemoveBrush","ChangeBrush","Invert","TurnPrediction","LockPrediction","AddBrush","PointDeselection","PointSelection","AddPlot","LoadDataset","MultiBrush","SwitchCategoryVisibility","ChangeBrushSize","ChangeCategory","configure","isolateGlobalState","formControl","useDropdown","defaultState","opts","setVal","setSelected","handleChange","Dropdown","FormControl","InputLabel","Select","labelId","opt","MenuItem","divSpacing","anchor","setAnchor","columns","col","xCol","XDropdown","setX","yCol","YDropdown","setY","handleSubmit","startIcon","Menu","anchorEl","open","Boolean","onClose","button","divider","ButtonGroup","fullWidth","minWidth","formControlwoWidth","Navbar","store","AppBar","Toolbar","Divider","orientation","flexItem","ToggleButtonGroup","exclusive","bt","ToggleButton","console","log","projName","s","set","storeProvenance","whyDidYouRender","logOnDifferentValues","common","foreground","background","rank","toFixed","setWidth","bounds","centerContainer","flexDirection","table","tableLayout","debouncedSetHoveredPrediction","debounce","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","pred","description","hash","chips","flexWrap","Chip","text","handleType","isEditing","setIsEditing","Input","onBlur","align","noWrap","card","marginBottom","close","marginLeft","isRejected","Card","CardContent","CardActions","disableSpacing","badge_sync","green","badge_unsync","red","openCopyMessage","setOpenCopyMessage","isSync","isCurrent","copyId","el","document","createElement","setAttribute","body","appendChild","execCommand","removeChild","Badge","badge","sync","storeToFirebase","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","Alert","Filter","nodeID","undoRedoButtons","CategoricalHeader","dataType","useDataGridFormat","headerHeight","firstTable","st","rows","field","headerName","flex","renderHeader","params","colDef","renderCell","row","Label","getValue","cellClassName","centerText","DatasetTable","gridColumnStart","gridColumnEnd","columnNum","autoPageSize","pagination","ComparisonTable","trackers","updateWhenDone","statuses","setStatuses","complete","setComplete","intervalId","setInterval","stats","status","List","processed","to_process","ListItem","ListItemText","LinearProgress","queryClient","QueryClient","showStatus","setShowStatus","processingComplete","setProcessingComplete","setTrackers","fields","formData","FormData","append","headers","initialValues","useDatasetFormManagement","formik","useFormik","onSubmit","Dialog","DialogTitle","DialogContent","TextField","required","multiline","hidden","files","setFieldValue","QueryClientProvider","client","DialogActions","isSubmitting","form","colorClass","loadedDatasetKey","openUploadDatasetDialog","setOpenUploadDatasetDialog","comparisonView","setComparisonView","datasetOptions","DatasetDropdown","ComparisonDropdown","Switch","checked","inputProps","setId","setName","message","setMessage","openSnackbar","setOpenSnackbar","createProject","catch","finally","DialogContentText","drawerWidth","appBar","drawer","flexShrink","drawerPaper","toolbar","mixins","selectProject","setOpen","Drawer","paper","ListItemIcon","primary","React","trackAllPureComponents","exclude","exact","Explore","ProjectHome","ComparisonHome","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.7e206f06.chunk.js","sourcesContent":["import { isChildNode, NodeID } from '@visdesignlab/trrack';\nimport firebase from 'firebase/app';\n\nimport 'firebase/database';\nimport { WorkflowType } from '../../Store/ExploreStore';\n\nimport { IntentGraph, IntentNode } from './../../Store/Types/ProvenanceType';\n\nconst config = {\n  apiKey: 'AIzaSyB8jzc6Gck2Rt-rrw-ZbACudr5VqESRNRY',\n  authDomain: 'reusing-intent.firebaseapp.com',\n  projectId: 'reusing-intent',\n  storageBucket: 'reusing-intent.appspot.com',\n  messagingSenderId: '290275127628',\n  appId: '1:290275127628:web:e332ddfe7bada09cff5fe9',\n  measurementId: 'G-K9KB7W1VM3',\n};\n\nexport function initializeFirebase() {\n  const app: firebase.app.App =\n    firebase.apps.length === 0 ? firebase.initializeApp(config) : firebase.app();\n\n  const db = firebase.database(app);\n  const provDb = app.database('https://reusing-demos.firebaseio.com/');\n\n  return {\n    config,\n    app,\n    db,\n    provDb,\n  };\n}\n\nexport function storeToFirebase(\n  id: string,\n  graph: IntentGraph,\n  workflow: WorkflowType,\n  db: firebase.database.Database,\n  sync: (key: string, val: string) => void,\n) {\n  const wf = {\n    id: workflow.id,\n    name: workflow.name,\n    project: workflow.project,\n    graph: getGraph(graph, workflow.graph),\n  };\n\n  db.ref(`${id}`)\n    .set(wf)\n    .then(() => {\n      sync(id, JSON.stringify(workflow));\n    });\n}\n\nexport function storeProvenance(\n  graph: IntentGraph,\n  workflows: { [key: string]: WorkflowType },\n  db: firebase.database.Database,\n  projName: string,\n) {\n  const s = {\n    wf: workflows,\n    graph,\n  };\n\n  return db.ref(projName).set(s);\n}\n\nexport function loadFromFirebase(db: firebase.database.Database, workflowId: string) {\n  return db.ref(workflowId).once('value');\n}\n\nexport function loadDemo(db: firebase.database.Database, projectName: string) {\n  return db.ref(projectName).once('value');\n}\n\nfunction getGraph(graph: IntentGraph, ids: NodeID[]) {\n  const root = graph.root;\n\n  const current = ids[ids.length - 1];\n\n  const nodes: IntentNode = {};\n  nodes[graph.root] = graph.nodes[graph.root];\n\n  ids.forEach((id, idx, arr) => {\n    const node = graph.nodes[id];\n\n    if (isChildNode(node)) {\n      if (idx === 0) {\n        node.parent = root;\n        nodes[root].children = [];\n        nodes[root].children.push(id);\n      } else {\n        const parent = arr[idx - 1];\n        node.parent = parent;\n        nodes[parent].children = [];\n        nodes[parent].children.push(id);\n      }\n    }\n\n    nodes[id] = node;\n  });\n\n  return {\n    current,\n    root,\n    nodes,\n  };\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { makeAutoObservable } from 'mobx';\n\nimport { RootStore } from './Store';\n\nexport class CompareStore {\n  rootStore: RootStore;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  updatedActions: any;\n\n  constructor(rootStore: RootStore) {\n    this.rootStore = rootStore;\n    makeAutoObservable(this);\n  }\n\n  // ##################################################################### //\n  // ############################## Getters ############################## //\n  // ##################################################################### //\n\n  get compDataset() {\n    const dataset = this.rootStore.projectStore.comparisonDataset;\n\n    return dataset;\n  }\n\n  get selectedPointsComparison() {\n    const t: string[] = [];\n\n    return t;\n    // let selectedPoints: string[] = [];\n    // const { plots } = this.rootStore.exploreStore.state;\n    // const graph = this.rootStore.exploreStore.provenance.graph;\n\n    // Object.values(plots).forEach((plot) => {\n    //   selectedPoints.push(...plot.selectedPoints);\n\n    //   const brushes = plot.brushes;\n    //   Object.values(brushes).forEach((brush) => {\n    //     if (brush.points) selectedPoints.push(...brush.points);\n    //   });\n    // });\n\n    // const { selectedPrediction } = this.rootStore.exploreStore.state;\n\n    // if (!isEmptyOrNull(selectedPrediction))\n    //   selectedPoints = [...selectedPoints, ...selectedPrediction.memberIds];\n\n    // for (const a in this.updatedActions) {\n    //   const act = JSON.parse(JSON.stringify(this.updatedActions[a]));\n\n    //   if (\n    //     !act ||\n    //     !act.added ||\n    //     graph.nodes[a].label === 'Add Plot' ||\n    //     graph.nodes[a].label === 'Filter' ||\n    //     this.isBelowCurrent(a, graph.current)\n    //   ) {\n    //     continue;\n    //   }\n\n    //   selectedPoints.push(...act.added);\n    // }\n\n    // for (const j of this.rootStore.state.filterList) {\n    //   selectedPoints.splice(selectedPoints.indexOf(j), 1);\n    // }\n\n    // return Array.from(new Set(selectedPoints));\n  }\n\n  get updatedFilterPoints() {\n    const t: string[] = [];\n\n    return t;\n    // let arr = this.rootStore.state.filterList;\n\n    // const graph = this.rootStore.exploreStore.provenance.graph;\n\n    // const filterNodes = Object.values(graph.nodes).filter((d) => d.label === 'Filter');\n\n    // if (filterNodes.length > 0 && this.updatedActions) {\n    //   filterNodes\n    //     .filter((d) => !this.isBelowCurrent(d.id, graph.current))\n    //     .forEach((d) => {\n    //       const act = this.updatedActions[d.id];\n    //       arr.push(...act.added);\n\n    //       arr = arr.filter((d) => !act.removed.includes(d));\n    //     });\n    // }\n\n    // this.rootStore.state.filterList = arr;\n\n    // return arr;\n  }\n\n  // ##################################################################### //\n  // ############################## Helpers ############################## //\n  // ##################################################################### //\n\n  isBelowCurrent(id: string, current: string): boolean {\n    const graph = this.rootStore.exploreStore.provenance.graph;\n\n    if (graph.nodes[current].children.length === 0 || id === current) {\n      return false;\n    } else if (graph.nodes[current].children.includes(id)) {\n      return true;\n    }\n\n    let flag = false;\n\n    for (const i of graph.nodes[current].children) {\n      if (!flag) flag = this.isBelowCurrent(id, i);\n    }\n\n    return flag;\n  }\n}\n","function deepCopy<T>(obj: T): T {\n  return JSON.parse(JSON.stringify(obj));\n}\n\nexport default deepCopy;\n","export function getPlotId(): string {\n  return `plot${new Date().getTime().toString()}`;\n}\n\nexport function getBrushId(): string {\n  return `brush${new Date().getTime().toString()}`;\n}\n\nexport function getWorkflowID(): string {\n  return `workflow${new Date().getTime().toString()}`;\n}\n","export const SERVER =\n  process.env.NODE_ENV === 'development' ? 'http://127.0.0.1' : 'https://reusing.sci.utah.edu';\n","import { isChildNode, NodeID } from '@visdesignlab/trrack';\nimport Axios, { AxiosResponse } from 'axios';\nimport { action, makeAutoObservable, reaction } from 'mobx';\n\nimport deepCopy from '../Utils/DeepCopy';\nimport { getWorkflowID } from '../Utils/IDGens';\n\nimport { BrushAffectType, BrushCollection } from './../components/Brush/Types/Brush';\nimport { SERVER } from './../consts';\nimport { BrushType, ExtendedBrushCollection, MultiBrushBehaviour } from './IntentState';\nimport { RootStore } from './Store';\nimport { Status } from './Types/Artifacts';\nimport { Dataset } from './Types/Dataset';\nimport { Plot, Plots } from './Types/Plot';\nimport { Prediction, Predictions } from './Types/Prediction';\n\nfunction getDefaultRecord(): Record {\n  return {\n    plots: {},\n    brushes: {},\n    brushSelections: {},\n    pointSelection: {},\n    prediction: null,\n    filter: null,\n  };\n}\n\ntype Filter = {\n  type: 'In' | 'Out';\n  points: string[];\n};\n\ntype Record = {\n  plots: Plots;\n  brushes: { [key: string]: BrushCollection };\n  brushSelections: { [key: string]: string[] };\n  pointSelection: { [key: string]: string[] };\n  prediction: Prediction | null;\n  filter: Filter | null;\n};\n\nexport type WorkflowType = {\n  id: string;\n  project: string;\n  name: string;\n  graph: NodeID[];\n};\n\ntype Workflows = { [key: string]: WorkflowType };\n\nexport class ExploreStore {\n  rootStore: RootStore;\n  isLoadingData = false;\n  isLoadingPredictions = false;\n  hoveredPrediction: Prediction | null = null;\n  multiBrushBehaviour: MultiBrushBehaviour = 'Union';\n  showCategories = false;\n  brushType: BrushType = 'Rectangular';\n  stateRecord: { [key: string]: Record } = {};\n  predictions: Predictions = [];\n  currBrushed: string[] = [];\n  workflows: Workflows = {};\n  currentWorkflow: string | null = null;\n  workflowSyncStatus: { [key: string]: string } = {};\n  isImporting = false;\n\n  constructor(rootStore: RootStore) {\n    this.rootStore = rootStore;\n    makeAutoObservable(this);\n\n    reaction(\n      () => this.state,\n      () => {\n        this.addPredictions();\n      },\n    );\n\n    reaction(\n      () => Object.values(this.provenance.graph.nodes).length,\n      (curr, prev) => {\n        if (this.isImporting) return;\n\n        if (prev === 1 && curr !== 2) return;\n\n        const rec: { [key: string]: Status } = {};\n\n        this.currentProject.datasets.forEach((dataset) => {\n          rec[dataset.key] = this.currentDatasetKey === dataset.key ? 'Accepted' : 'Unknown';\n        });\n\n        this.provenance.addArtifact({\n          original_dataset: this.currentDatasetKey,\n          status_record: rec,\n        });\n      },\n    );\n  }\n\n  // ##################################################################### //\n  // ############################## Getters ############################## //\n  // ##################################################################### //\n\n  get state() {\n    if (!this.currentNode || !(this.currentNode in this.stateRecord)) return getDefaultRecord();\n\n    return deepCopy(this.stateRecord[this.currentNode]);\n  }\n\n  get currentNode() {\n    return this.provenance.current.id;\n  }\n\n  get currentDatasetKey() {\n    return this.rootStore.projectStore.currentDatasetKey;\n  }\n\n  get currentDataset() {\n    const dataset = this.rootStore.projectStore.loadedDataset;\n\n    if (!dataset) throw new Error('Dataset not loaded');\n\n    return dataset;\n  }\n\n  get showSkylineLegend() {\n    return this.hoveredPrediction && this.hoveredPrediction.intent === 'Skyline';\n  }\n\n  get showMatchesLegend() {\n    return this.hoveredPrediction ? true : false;\n  }\n\n  get provenance() {\n    return this.rootStore.provenance;\n  }\n\n  get currentProject() {\n    const curr = this.rootStore.projectStore.currentProject;\n\n    if (!curr) throw new Error();\n\n    return curr;\n  }\n\n  get n_plots() {\n    return this.plots.length;\n  }\n\n  get plots() {\n    return Object.values(this.state.plots);\n  }\n\n  get selectedPoints() {\n    const selections: string[] = [];\n\n    const { brushSelections } = this.state;\n\n    Object.values(brushSelections).forEach((sel) => {\n      selections.push(...sel);\n    });\n\n    Object.values(this.state.pointSelection).forEach((sel) => selections.push(...sel));\n\n    if (this.state.prediction) selections.push(...this.state.prediction.memberIds);\n\n    return deepCopy(Array.from(new Set(selections)));\n  }\n\n  get workingValues() {\n    const { filter } = this.state;\n\n    if (!filter) return this.loadedDataset.values;\n\n    const { type, points } = filter;\n\n    if (type === 'In') {\n      return this.loadedDataset.values.filter((d) => points.includes(d.id));\n    }\n\n    return this.loadedDataset.values.filter((d) => !points.includes(d.id));\n  }\n\n  get artifact() {\n    const art = this.provenance.getLatestArtifact();\n\n    if (!art)\n      return {\n        original_dataset: null,\n        status_record: {},\n      };\n\n    return art.artifact;\n  }\n\n  // get predictions() {\n  //   return this.artifact.predictions || [];\n  // }\n\n  get loadedDataset() {\n    let dataset = this.rootStore.projectStore.loadedDataset;\n\n    if (!dataset) {\n      const dt_str = window.localStorage.getItem('dataset');\n\n      if (!dt_str) throw new Error('Dataset not loaded');\n\n      dataset = JSON.parse(dt_str) as Dataset;\n\n      return dataset;\n    }\n\n    window.localStorage.setItem('dataset', JSON.stringify(dataset));\n\n    return dataset;\n  }\n\n  get compDataset() {\n    let dataset = this.rootStore.projectStore.comparisonDataset;\n\n    if (!dataset) {\n      const dt_str = window.localStorage.getItem('dataset');\n\n      if (!dt_str) throw new Error('Dataset not loaded');\n\n      dataset = JSON.parse(dt_str) as Dataset;\n\n      return dataset;\n    }\n\n    window.localStorage.setItem('dataset', JSON.stringify(dataset));\n\n    return dataset;\n  }\n\n  // ##################################################################### //\n  // ########################### Store Helpers ########################### //\n  // ##################################################################### //\n\n  updateBrushed = (newSelected: string[]) => {\n    this.currBrushed = newSelected;\n  };\n\n  addWorkflow = (workflowName?: string) => {\n    const counterInit = Object.values(this.workflows).filter((d) =>\n      d.name.startsWith('Workflow #'),\n    );\n\n    let counter = 1;\n\n    if (counterInit.length > 0) {\n      const c = counterInit[counterInit.length - 1].name.split('#');\n      counter = parseInt(c[c.length - 1]) + 1;\n    }\n\n    const workflow: WorkflowType = {\n      id: getWorkflowID(),\n      project: this.currentProject.key,\n      name: workflowName ? workflowName : `Workflow #${counter}`,\n      graph: [],\n    };\n\n    this.workflows[workflow.id] = workflow;\n    this.currentWorkflow = workflow.id;\n  };\n\n  renameWorkflow = (id: string, name: string) => {\n    this.workflows[id].name = name;\n  };\n\n  removeWorkflow = (id: string) => {\n    delete this.workflows[id];\n\n    if (this.currentWorkflow === id && Object.values(this.workflows).length > 0) {\n      const ws = Object.values(this.workflows);\n      this.currentWorkflow = ws[ws.length - 1].id;\n    } else if (!this.workflows[id]) {\n      this.currentWorkflow = null;\n    }\n  };\n\n  setCurrentWorkflow = (id: string) => {\n    this.currentWorkflow = id;\n  };\n\n  addToWorkflow = (id: string) => {\n    if (!this.currentWorkflow) return;\n\n    if (!this.workflows[this.currentWorkflow]) return;\n\n    const { graph } = this.workflows[this.currentWorkflow];\n\n    if (graph.includes(id)) return;\n\n    let current = this.provenance.graph.nodes[id];\n\n    while (current.label !== 'Root') {\n      if (!isChildNode(current)) break;\n\n      if (!graph.includes(current.id)) graph.push(current.id);\n\n      current = this.provenance.graph.nodes[current.parent];\n    }\n\n    graph.sort(\n      (a, b) =>\n        (this.provenance.graph.nodes[a].metadata.createdOn || -1) -\n        (this.provenance.graph.nodes[b].metadata.createdOn || -1),\n    );\n\n    this.workflows[this.currentWorkflow].graph = [...graph];\n  };\n\n  removeFromWorkflow = (id: string) => {\n    if (!this.currentWorkflow) return;\n    this.workflows[this.currentWorkflow].graph = this.workflows[this.currentWorkflow].graph.filter(\n      (d) => d !== id,\n    );\n  };\n\n  setSyncStatus = (key: string, val: string) => {\n    this.workflowSyncStatus[key] = val;\n  };\n\n  // ##################################################################### //\n  // ######################### Provenance Actions ######################## //\n  // ##################################################################### //\n\n  addPlot = (plot: Plot): void => {\n    if (!this.currentDatasetKey) return;\n    const { addPlotAction } = this.rootStore.actions;\n    addPlotAction.setLabel('Add Plot');\n    const { state } = this;\n\n    this.provenance.apply(addPlotAction(plot));\n\n    state.plots[plot.id] = plot;\n\n    this.stateRecord[this.currentNode] = state;\n\n    this.rootStore.currentNodes.push(this.provenance.graph.current);\n  };\n\n  removePlot = (plot: Plot) => {\n    const { removePlotAction } = this.rootStore.actions;\n\n    removePlotAction.setLabel(`Remove plot: ${plot.x} - ${plot.y}`);\n\n    const { state } = this;\n    this.provenance.apply(removePlotAction(plot));\n    delete state.plots[plot.id];\n\n    if (plot.id in state.brushes) delete state.brushes[plot.id];\n\n    if (plot.id in state.pointSelection) delete state.pointSelection[plot.id];\n\n    this.stateRecord[this.currentNode] = state;\n\n    this.rootStore.currentNodes.push(this.provenance.graph.current);\n  };\n\n  filter = (filterType: 'In' | 'Out') => {\n    const { filterAction } = this.rootStore.actions;\n\n    filterAction.setLabel(`Filter: ${filterType}`);\n    const { state } = this;\n    const filter: Filter = { type: filterType, points: this.selectedPoints };\n\n    this.provenance.apply(filterAction(filterType));\n\n    state.brushes = {};\n    state.brushSelections = {};\n    state.pointSelection = {};\n    state.prediction = null;\n    state.filter = filter;\n\n    this.stateRecord[this.currentNode] = state;\n\n    this.rootStore.currentNodes.push(this.provenance.graph.current);\n  };\n\n  switchBrush = (brushType: BrushType) => {\n    this.brushType = brushType;\n  };\n\n  setFreeformSelection = (plot: Plot, points: string[]) => {\n    this.addPointSelection(plot, points, true);\n  };\n\n  addPointSelection = (plot: Plot, points: string[], isPaintBrush = false) => {\n    if (points.length === 0) return;\n\n    const { state } = this;\n\n    const { pointSelectionAction } = this.rootStore.actions;\n\n    pointSelectionAction.setLabel(\n      isPaintBrush ? `P. Brush: ${points.length}` : `Add Point Selection`,\n    );\n    this.provenance.apply(pointSelectionAction(plot, points));\n\n    if (!(plot.id in state.pointSelection)) {\n      state.pointSelection[plot.id] = [];\n    }\n    state.pointSelection[plot.id].push(...points);\n\n    this.stateRecord[this.currentNode] = state;\n\n    this.rootStore.currentNodes.push(this.provenance.graph.current);\n\n    this.addPredictions();\n  };\n\n  setBrushSelection = (\n    plot: Plot,\n    brushes: ExtendedBrushCollection,\n    type: BrushAffectType,\n    affectedId: string,\n  ) => {\n    const { addBrushAction, updateBrushAction, removeBrushAction } = this.rootStore.actions;\n    const { state } = this;\n\n    switch (type) {\n      case 'Add':\n        addBrushAction.setLabel(`Added brush to: ${plot.x}-${plot.y}`);\n        this.provenance.apply(addBrushAction(plot, brushes[affectedId]));\n        state.brushSelections[affectedId] = brushes[affectedId].points;\n        state.brushes[plot.id] = brushes;\n        break;\n      case 'Update':\n        updateBrushAction.setLabel(`Updated brush in: ${plot.x}-${plot.y}`);\n        this.provenance.apply(updateBrushAction(plot, brushes[affectedId]));\n        state.brushSelections[affectedId] = brushes[affectedId].points;\n        state.brushes[plot.id] = brushes;\n        break;\n      case 'Remove':\n        removeBrushAction.setLabel(`Removed brush in: ${plot.x}-${plot.y}`);\n        this.provenance.apply(removeBrushAction(plot, affectedId));\n        delete state.brushSelections[affectedId];\n        delete brushes[affectedId];\n        state.brushes[plot.id] = brushes;\n        break;\n      default:\n        break;\n    }\n\n    this.stateRecord[this.currentNode] = state;\n    this.addPredictions();\n    //\n  };\n\n  setPredictionSelection = (prediction: Prediction) => {\n    const { predictionSelectionAction } = this.rootStore.actions;\n    const { state } = this;\n    prediction.original_id = this.currentDatasetKey || '';\n    predictionSelectionAction.setLabel(`${prediction.intent} Selection`);\n    this.provenance.apply(predictionSelectionAction(prediction));\n    state.brushes = {};\n    state.brushSelections = {};\n    state.pointSelection = {};\n    state.prediction = prediction;\n\n    this.stateRecord[this.currentNode] = state;\n    this.addPredictions();\n  };\n\n  // ##################################################################### //\n  // ########################### Store Actions ########################### //\n  // ##################################################################### //\n\n  setHoveredPrediction = (prediction: Prediction | null) => {\n    this.hoveredPrediction = prediction;\n  };\n\n  // ##################################################################### //\n  // ######################### Provenance Helpers ######################## //\n  // ##################################################################### //\n\n  addPredictions = () => {\n    this.hoveredPrediction = null;\n    const dimensions: string[] = [];\n\n    if (this.selectedPoints.length === 0) return;\n\n    this.isLoadingPredictions = true;\n\n    Object.values(this.state.plots).forEach((plt) => {\n      dimensions.push(...[plt.x, plt.y]);\n    });\n\n    Axios.post(`${SERVER}/${this.currentProject.key}/dataset/predict/${this.currentDatasetKey}`, {\n      selections: this.selectedPoints,\n      dimensions,\n    }).then(\n      action((response: AxiosResponse<Predictions>) => {\n        const { data = [] } = response;\n        // this.provenance.addArtifact({ ...this.artifact, predictions: data });\n        this.predictions = data;\n        this.isLoadingPredictions = false;\n      }),\n    );\n  };\n\n  goToNode = (id: NodeID): void => {\n    this.provenance.goToNode(id);\n  };\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { isChildNode } from '@visdesignlab/trrack';\nimport Axios, { AxiosResponse } from 'axios';\nimport { action, makeAutoObservable, reaction } from 'mobx';\n\nimport { loadDemo, loadFromFirebase } from '../components/Workflow/Firebase';\nimport { SERVER } from '../consts';\nimport { OriginMap } from '../trrack-vis/Utils/BundleMap';\nimport deepCopy from '../Utils/DeepCopy';\n\nimport { Source } from './../trrack-vis/Utils/BundleMap';\nimport { ExploreStore } from './ExploreStore';\nimport { RootStore } from './Store';\nimport { Dataset } from './Types/Dataset';\nimport { Project, ProjectList, UploadedDatasetList } from './Types/Project';\n\nexport class ProjectStore {\n  rootStore: RootStore;\n  currentProject: Project | null = null;\n  projects: ProjectList = [];\n  comparisonDatasetKey: string | null = null;\n  loadedDataset: Dataset | null = null;\n  workingDataset: Dataset | null = null;\n  comparisonDataset: Dataset | null = null;\n  currentDatasetKey: string | null = null;\n\n  isReapplying = false;\n\n  constructor(rootStore: RootStore) {\n    this.rootStore = rootStore;\n    makeAutoObservable(this);\n    this.loadProjects();\n\n    reaction(\n      () => this.currentDatasetKey,\n      () => this.fetchCurrentDataset(),\n    );\n  }\n\n  loadFromWorkflow() {\n    const workflowId = this.rootStore.loadedWorkflowId;\n\n    if (!workflowId) return;\n\n    loadFromFirebase(this.rootStore.db, workflowId).then(\n      action((snap) => {\n        const workflow = snap.val();\n        this.rootStore.exploreStore.isImporting = true;\n\n        if (this.currentProject && this.currentDatasetKey) {\n          const graph = workflow.graph;\n\n          const wf = { ...workflow, graph: [] };\n          this.rootStore.exploreStore.workflows[wf.id] = wf;\n          this.rootStore.exploreStore.setCurrentWorkflow(wf.id);\n\n          for (const n in graph.nodes) {\n            if (!graph.nodes[n].children) graph.nodes[n].children = [];\n          }\n\n          this.provenance.importProvenanceGraph(graph);\n\n          this.loadDatasetWithReapply(this.currentDatasetKey);\n\n          for (const n in graph.nodes) {\n            if (isChildNode(graph.nodes[n])) {\n              this.rootStore.exploreStore.addToWorkflow(n);\n            }\n          }\n        }\n        this.rootStore.exploreStore.isImporting = false;\n      }),\n    );\n  }\n\n  loadSavedProject() {\n    const projectName = this.rootStore.loadSavedProject;\n\n    const datasetKey = this.currentDatasetKey;\n\n    if (!projectName) return;\n\n    if (!datasetKey) return;\n\n    loadDemo(this.rootStore.provDb, projectName).then(\n      action((snap) => {\n        const { graph, wf } = snap.val();\n\n        for (const n in graph.nodes) {\n          if (!graph.nodes[n].children) graph.nodes[n].children = [];\n        }\n\n        this.provenance.importProvenanceGraph(graph);\n        this.loadDatasetWithReapply(datasetKey);\n        this.rootStore.exploreStore.workflows = wf;\n\n        if (Object.values(wf).length > 0) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          this.rootStore.exploreStore.currentWorkflow = (Object.values(wf)[0] as any).id;\n        }\n      }),\n    );\n  }\n\n  // ##################################################################### //\n  // ############################## Getters ############################## //\n  // ##################################################################### //\n\n  get provenance() {\n    return this.rootStore.provenance;\n  }\n\n  get loadedDatasetKey() {\n    return this.currentDatasetKey || '';\n  }\n\n  get nodeCreationMap(): OriginMap {\n    const originMap: OriginMap = {};\n\n    Object.values(this.provenance.graph.nodes).forEach((node) => {\n      const art = this.provenance.getLatestArtifact(node.id);\n\n      if (!art) return;\n\n      const { artifact } = art;\n\n      const { original_dataset } = artifact;\n\n      const datasetKey = this.versionFromDatasetKey(original_dataset);\n\n      const source: Source = {\n        createdIn: datasetKey,\n        approvedIn: Object.entries(artifact.status_record)\n          .filter((v) => v[1] === 'Accepted')\n          .map((v) => this.versionFromDatasetKey(v[0])),\n        rejectedIn: Object.entries(artifact.status_record)\n          .filter((v) => v[1] === 'Rejected')\n          .map((v) => this.versionFromDatasetKey(v[0])),\n      };\n\n      // source.approvedIn.push(source.createdIn);\n\n      originMap[node.id] = source;\n    });\n\n    return originMap;\n  }\n\n  get compDatasetValues() {\n    return (\n      this.comparisonDataset?.values.filter(\n        (d) => !this.rootStore.compareStore.updatedFilterPoints.includes(d.id),\n      ) || []\n    );\n  }\n\n  // ##################################################################### //\n  // ########################### Store Helpers ########################### //\n  // ##################################################################### //\n\n  versionFromDatasetKey = (key: string | null) => {\n    let datasetVersion = '';\n\n    if (this.currentProject && key) {\n      const ds = this.currentProject.datasets.find((d) => d.key === key);\n\n      if (ds) {\n        datasetVersion = ds.version;\n      }\n    }\n\n    return datasetVersion;\n  };\n\n  projectByKey = (key: string) => {\n    const proj = this.projects.find((p) => p.key === key);\n\n    return proj;\n  };\n\n  fetchCurrentDataset = () => {\n    if (!this.currentProject || !this.currentDatasetKey) return;\n\n    Axios.get(`${SERVER}/${this.currentProject.key}/dataset/${this.currentDatasetKey}`).then(\n      action((response: AxiosResponse<Dataset>) => {\n        this.loadedDataset = response.data;\n        this.workingDataset = response.data;\n      }),\n    );\n  };\n\n  approveNode = (id: string) => {\n    let { artifact = null } = this.provenance.getLatestArtifact(id) || {};\n\n    if (artifact) {\n      artifact = deepCopy(artifact);\n      artifact.status_record[this.currentDatasetKey || ''] = 'Accepted';\n      this.provenance.addArtifact(artifact, id);\n    }\n  };\n\n  rejectNode = (id: string) => {\n    if (!this.currentDatasetKey) return;\n\n    let { artifact = null } = this.provenance.getLatestArtifact(id) || {};\n\n    if (artifact) {\n      artifact = deepCopy(artifact);\n      artifact.status_record[this.currentDatasetKey || ''] = 'Rejected';\n      this.provenance.addArtifact(artifact, id);\n      this.loadDatasetWithReapply(this.currentDatasetKey);\n    }\n  };\n\n  // ##################################################################### //\n  // ########################### Store Actions ########################### //\n  // ##################################################################### //\n\n  loadProjects = (newProjectId: string | null = null) => {\n    Axios.get(`${SERVER}/project`).then(\n      action((response: AxiosResponse<ProjectList>) => {\n        this.projects = response.data;\n\n        if (!newProjectId && this.rootStore.debug) {\n          this.loadProjectByKey(this.rootStore.defaultProject);\n        } else if (newProjectId) {\n          const proj = this.projects.find((p) => p.key === newProjectId);\n\n          if (proj) {\n            this.loadProjectByKey(proj.key);\n          }\n        }\n      }),\n    );\n  };\n\n  loadProjectByKey = (projectId: string) => {\n    const proj = this.projectByKey(projectId);\n\n    if (!proj) return;\n\n    this.loadedDataset = null;\n    this.rootStore.exploreStore = new ExploreStore(this.rootStore);\n\n    Axios.get(`${SERVER}/${projectId}/dataset`)\n      .then(\n        action((response: AxiosResponse<UploadedDatasetList>) => {\n          this.currentProject = { ...proj, datasets: response.data };\n\n          if (this.rootStore.debug && this.rootStore.loadDefaultDataset) {\n            const datasetKey = this.rootStore.defaultDatasetKey;\n\n            if (datasetKey && this.currentProject.datasets.map((d) => d.key).includes(datasetKey))\n              this.loadDataset(datasetKey);\n            else this.loadDataset(this.currentProject.datasets[0].key);\n          }\n        }),\n      )\n      .then(() => {\n        if (this.rootStore.loadedWorkflowId) this.loadFromWorkflow();\n        else if (this.rootStore.loadSavedProject) {\n          this.loadSavedProject();\n        }\n      });\n  };\n\n  loadComparisonDataset = (datasetKey: string) => {\n    if (!this.currentProject) return;\n\n    Axios.get(`${SERVER}/${this.currentProject.key}/dataset/${datasetKey}`).then(\n      action((response: AxiosResponse<Dataset>) => {\n        this.comparisonDatasetKey = datasetKey;\n        this.comparisonDataset = response.data;\n      }),\n    );\n  };\n\n  //load the dataset into comparison\n  loadComparisonFilter = (selectedIds: string[]): string[] => {\n    const removeIds = this.workingDataset?.values.filter((d) => {\n      return selectedIds.includes(d.id);\n    });\n\n    const idList = [];\n\n    if (this.workingDataset && removeIds) {\n      this.workingDataset.values = removeIds;\n\n      for (const j of removeIds) {\n        idList.push(j.id);\n      }\n    }\n\n    return idList;\n  };\n\n  loadOnlyFilter = (selectedIds: string[]): string[] => {\n    const removeIds =\n      this.workingDataset?.values.filter((d) => {\n        return !selectedIds.includes(d.id);\n      }) || [];\n\n    const idList = [];\n\n    if (this.workingDataset && removeIds) {\n      this.workingDataset.values = removeIds;\n\n      for (const j of removeIds) {\n        idList.push(j.id);\n      }\n    }\n\n    return idList;\n  };\n\n  // ##################################################################### //\n  // ######################### Provenance Actions ######################## //\n  // ##################################################################### //\n\n  loadDataset = (datasetKey: string) => {\n    this.currentDatasetKey = datasetKey;\n  };\n\n  loadDatasetWithReapply = (datasetKey: string) => {\n    if (!this.currentProject || !this.currentDatasetKey) return;\n    this.isReapplying = true;\n\n    const graph = this.provenance.graph;\n\n    Object.entries(graph.nodes).forEach((ent) => {\n      const [key, val] = ent;\n\n      if (isChildNode(val)) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (val as any).state = this.provenance.getState(val);\n      }\n\n      graph.nodes[key] = val;\n    });\n\n    Axios.post(`${SERVER}/project/${this.currentProject.key}/reapply`, {\n      base: this.currentDatasetKey,\n      target: datasetKey,\n      provenance: graph,\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    }).then(\n      action((res) => {\n        // this.provenance.importProvenanceGraph(res.data.graph);\n        this.currentDatasetKey = datasetKey;\n        this.rootStore.exploreStore.stateRecord = res.data;\n        setTimeout(\n          action(() => (this.isReapplying = false)),\n          200,\n        );\n      }),\n    );\n  };\n}\n","import { createAction } from '@visdesignlab/trrack';\n\nimport { Brush } from '../components/Brush/Types/Brush';\n\nimport { IntentEvents } from './Types/IntentEvents';\nimport { State } from './Types/Interactions';\nimport { Plot } from './Types/Plot';\nimport { Prediction } from './Types/Prediction';\n\nconst addPlotAction = createAction<State, [Plot], IntentEvents>((state: State, plot: Plot) => {\n  state.interaction = {\n    type: 'AddPlot',\n    plot,\n  };\n})\n  .saveStateMode('Complete')\n  .setEventType('Add Plot');\n\nconst removePlotAction = createAction<State, [Plot], IntentEvents>((state: State, plot: Plot) => {\n  state.interaction = {\n    type: 'RemovePlot',\n    plot: plot.id,\n  };\n})\n  .saveStateMode('Complete')\n  .setEventType('Add Plot');\n\nconst pointSelectionAction = createAction<State, [Plot, string[]], IntentEvents>(\n  (state: State, plot: Plot, points: string[]) => {\n    state.interaction = {\n      type: 'PointSelection',\n      action: 'Add',\n      plot: plot.id,\n      selected: points,\n    };\n  },\n)\n  .saveStateMode('Complete')\n  .setEventType('Point Selection');\n\nconst addBrushAction = createAction<State, [Plot, Brush], IntentEvents>(\n  (state: State, plot: Plot, brush: Brush) => {\n    state.interaction = {\n      type: 'Brush',\n      action: 'Add',\n      plot: plot.id,\n      brush,\n    };\n  },\n)\n  .saveStateMode('Complete')\n  .setEventType('Add Brush');\n\nconst updateBrushAction = createAction<State, [Plot, Brush], IntentEvents>(\n  (state: State, plot: Plot, brush: Brush) => {\n    state.interaction = {\n      type: 'Brush',\n      action: 'Update',\n      plot: plot.id,\n      brush,\n    };\n  },\n)\n  .saveStateMode('Complete')\n  .setEventType('Update Brush');\n\nconst removeBrushAction = createAction<State, [Plot, string], IntentEvents>(\n  (state: State, plot: Plot, brush: string) => {\n    state.interaction = {\n      type: 'Brush',\n      action: 'Remove',\n      plot: plot.id,\n      brush,\n    };\n  },\n)\n  .saveStateMode('Complete')\n  .setEventType('Remove Brush');\n\nconst predictionSelectionAction = createAction<State, [Prediction], IntentEvents>(\n  (state: State, prediction: Prediction) => {\n    state.interaction = {\n      type: 'SelectPrediction',\n      prediction,\n    };\n  },\n)\n  .saveStateMode('Complete')\n  .setEventType('Prediction Selection');\n\nconst filterAction = createAction<State, ['In' | 'Out'], IntentEvents>(\n  (state: State, filterType: 'In' | 'Out') => {\n    state.interaction = {\n      type: 'Filter',\n      filterType,\n    };\n  },\n)\n  .saveStateMode('Complete')\n  .setEventType('Filter');\n\nexport const provenanceActions = {\n  addPlotAction,\n  removePlotAction,\n  filterAction,\n  pointSelectionAction,\n  predictionSelectionAction,\n  addBrushAction,\n  updateBrushAction,\n  removeBrushAction,\n};\n","import { initProvenance } from '@visdesignlab/trrack';\nimport firebase from 'firebase';\nimport 'firebase/database';\nimport { makeAutoObservable } from 'mobx';\nimport { createContext } from 'react';\n\nimport { initializeFirebase } from '../components/Workflow/Firebase';\n\nimport { CompareStore } from './CompareStore';\nimport { ExploreStore } from './ExploreStore';\nimport { ProjectStore } from './ProjectStore';\nimport { provenanceActions } from './ProvenanceActions';\nimport { StatusRecord } from './Types/Artifacts';\nimport { IntentEvents } from './Types/IntentEvents';\nimport { State } from './Types/Interactions';\nimport { IntentProvenance } from './Types/ProvenanceType';\n\nexport class RootStore {\n  // Search Params\n  debug = true;\n  search = '';\n  defaultProject = 'cluster';\n  loadDefaultDataset = false;\n  loadSavedProject: string | null = null;\n  defaultDatasetKey: string | null = null;\n  redirectPath: string | null = null;\n  loadedWorkflowId: string | null = null;\n  db: firebase.database.Database;\n  provDb: firebase.database.Database;\n\n  //\n  projectStore: ProjectStore;\n  exploreStore: ExploreStore;\n  compareStore: CompareStore;\n  provenance: IntentProvenance;\n  actions = provenanceActions;\n  currentNodes: string[];\n  bundledNodes: string[][];\n\n  constructor() {\n    this.provenance = initProvenance<State, IntentEvents, StatusRecord>(\n      { interaction: { type: 'Root' } },\n      {\n        loadFromUrl: false,\n      },\n    );\n\n    this.provenance.done();\n\n    this.projectStore = new ProjectStore(this);\n    this.exploreStore = new ExploreStore(this);\n    this.compareStore = new CompareStore(this);\n\n    this.currentNodes = [];\n    this.bundledNodes = [];\n\n    const { db, provDb } = initializeFirebase();\n\n    this.db = db;\n    this.provDb = provDb;\n\n    makeAutoObservable(this, {\n      actions: false,\n      provenance: false,\n    });\n  }\n\n  setQueryParams = (search: string) => {\n    if (this.search === search) return;\n    this.search = search;\n    const searchParams = new URLSearchParams(search);\n    const debug = searchParams.get('debug');\n    const defaultProject = searchParams.get('project');\n    const data = searchParams.get('data');\n    const demo = searchParams.get('demo');\n    const redirectPath = searchParams.get('redirect');\n    const workflowId = searchParams.get('workflow');\n\n    this.debug = debug ? true : workflowId ? true : demo ? true : false;\n    this.defaultProject = defaultProject ? defaultProject : demo ? demo : 'cluster';\n    this.loadDefaultDataset = data || demo ? true : false;\n    this.defaultDatasetKey = data !== 'true' ? data : null;\n    this.loadSavedProject = demo ? demo : null;\n    this.loadedWorkflowId = workflowId;\n    this.redirectPath = workflowId || demo ? 'explore' : redirectPath;\n  };\n}\n\nconst Store = createContext(new RootStore());\nexport default Store;\n","export default function translate(x: number, y: number = x): string {\n  return `translate(${x}, ${y})`;\n}\n","import { createStyles, makeStyles } from '@material-ui/core';\nimport clsx from 'clsx';\nimport React, { FC, useEffect, useState } from 'react';\n\nimport translate from '../../../Utils/Translate';\n\nimport { ResizeDirection } from './BrushComponent';\n\ntype Props = {\n  id: string;\n  x: number;\n  y: number;\n  height: number;\n  width: number;\n  onMouseDown: (event: React.MouseEvent<SVGRectElement, MouseEvent>, id: string) => void;\n  onResizeStart: (brushId: string, direction: ResizeDirection) => void;\n  closeHandler: (id: string) => void;\n  resizeHandlerSize?: number;\n};\n\nconst useStyles = makeStyles(() =>\n  createStyles({\n    base: {\n      fill: 'green',\n      opacity: 0.1,\n      stroke: 'black',\n      strokeWidth: 2,\n      cursor: 'move',\n      '&:hover': {\n        strokeWidth: 5,\n      },\n    },\n    closeIconText: {\n      fontWeight: 'bolder',\n      fontFamily: 'FontAwesome',\n      fontSize: '1.5rem',\n      fill: 'red',\n    },\n    closeIconBackground: {\n      cursor: 'pointer',\n      fill: '#777',\n      opacity: '0.1',\n    },\n    resizeBase: {\n      pointerEvents: 'all',\n      fill: 'none',\n      stroke: 'none',\n    },\n    ns: {\n      cursor: 'ns-resize',\n    },\n    ew: {\n      cursor: 'ew-resize',\n    },\n    nwse: {\n      cursor: 'nwse-resize',\n    },\n    nesw: {\n      cursor: 'nesw-resize',\n    },\n  }),\n);\n\nconst RectBrush: FC<Props> = ({\n  id,\n  x,\n  y,\n  height,\n  width,\n  onMouseDown,\n  onResizeStart,\n  closeHandler,\n  resizeHandlerSize = 10,\n}: Props) => {\n  const [showIcon, setShowIcon] = useState(false);\n  const [timeoutId, setTimeoutId] = useState(-1);\n\n  const { base, resizeBase, ns, ew, nwse, nesw, closeIconText, closeIconBackground } = useStyles();\n\n  useEffect(() => {\n    return () => clearInterval(timeoutId);\n  });\n\n  const baseRectangle = (\n    <rect\n      className={base}\n      height={height}\n      width={width}\n      onMouseDown={(event: React.MouseEvent<SVGRectElement, MouseEvent>) => {\n        onMouseDown(event, id);\n      }}\n      onMouseEnter={() => {\n        clearInterval(timeoutId);\n        setShowIcon(true);\n      }}\n      onMouseLeave={() => {\n        const tout = setTimeout(() => {\n          setShowIcon(false);\n        }, 900);\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        setTimeoutId(tout as any);\n      }}\n    />\n  );\n\n  const northRect = (\n    <rect\n      className={clsx(resizeBase, ns)}\n      height={resizeHandlerSize}\n      width={width - resizeHandlerSize}\n      x={resizeHandlerSize / 2}\n      y={-resizeHandlerSize / 2}\n      onMouseDown={() => onResizeStart(id, 'N')}\n    />\n  );\n\n  const southRect = (\n    <rect\n      className={clsx(resizeBase, ns)}\n      height={resizeHandlerSize}\n      width={width - resizeHandlerSize}\n      x={resizeHandlerSize / 2}\n      y={height - resizeHandlerSize / 2}\n      onMouseDown={() => onResizeStart(id, 'S')}\n    />\n  );\n\n  const westRect = (\n    <rect\n      className={clsx(resizeBase, ew)}\n      height={height - resizeHandlerSize}\n      width={resizeHandlerSize}\n      x={-resizeHandlerSize / 2}\n      y={resizeHandlerSize / 2}\n      onMouseDown={() => onResizeStart(id, 'W')}\n    />\n  );\n\n  const eastRect = (\n    <rect\n      className={clsx(resizeBase, ew)}\n      height={height - resizeHandlerSize}\n      width={resizeHandlerSize}\n      x={width - resizeHandlerSize / 2}\n      y={resizeHandlerSize / 2}\n      onMouseDown={() => onResizeStart(id, 'E')}\n    />\n  );\n\n  const nwRect = (\n    <rect\n      className={clsx(resizeBase, nwse)}\n      height={resizeHandlerSize}\n      width={resizeHandlerSize}\n      x={-resizeHandlerSize / 2}\n      y={-resizeHandlerSize / 2}\n      onMouseDown={() => onResizeStart(id, 'NW')}\n    />\n  );\n  const neRect = (\n    <rect\n      className={clsx(resizeBase, nesw)}\n      height={resizeHandlerSize}\n      width={resizeHandlerSize}\n      x={width - resizeHandlerSize / 2}\n      y={-resizeHandlerSize / 2}\n      onMouseDown={() => onResizeStart(id, 'NE')}\n    />\n  );\n\n  const swRect = (\n    <rect\n      className={clsx(resizeBase, nesw)}\n      height={resizeHandlerSize}\n      width={resizeHandlerSize}\n      x={-resizeHandlerSize / 2}\n      y={height - resizeHandlerSize / 2}\n      onMouseDown={() => onResizeStart(id, 'SW')}\n    />\n  );\n  const seRect = (\n    <rect\n      className={clsx(resizeBase, nwse)}\n      height={resizeHandlerSize}\n      width={resizeHandlerSize}\n      x={width - resizeHandlerSize / 2}\n      y={height - resizeHandlerSize / 2}\n      onMouseDown={() => onResizeStart(id, 'SE')}\n    />\n  );\n\n  return (\n    <g transform={translate(x, y)}>\n      {baseRectangle}\n      {northRect}\n      {southRect}\n      {westRect}\n      {eastRect}\n      {nwRect}\n      {neRect}\n      {swRect}\n      {seRect}\n      <g display={showIcon ? 'visible' : 'none'} transform={translate(width, -10)}>\n        <text className={closeIconText} dominantBaseline=\"middle\" dy=\"1\" textAnchor=\"middle\">\n          &#xf05e;\n        </text>\n        <circle\n          className={closeIconBackground}\n          fill=\"none\"\n          r=\"10\"\n          stroke=\"black\"\n          onClick={() => closeHandler(id)}\n        />\n      </g>\n    </g>\n  );\n};\n\nexport default RectBrush;\n","import { quadtree, ScaleLinear } from 'd3';\nimport React, { FC, useCallback, useEffect, useMemo, useRef, useState } from 'react';\n\nimport { getBrushId } from '../../../Utils/IDGens';\nimport { Brush, BrushAffectType, BrushCollection } from '../Types/Brush';\n\nimport RectBrush from './RectBrush';\n\nexport type BrushSelections = { [key: string]: string[] };\n\ntype Extents = {\n  x1: number;\n  x2: number;\n  y1: number;\n  y2: number;\n};\n\nexport type BrushHandler = (\n  points: BrushSelections,\n  brushes: BrushCollection,\n  type: BrushAffectType,\n  affectedId: string,\n) => void;\n\nexport type ResizeDirection = 'N' | 'S' | 'E' | 'W' | 'NW' | 'NE' | 'SW' | 'SE';\n\ntype BrushData = { x: number; y: number; id: string; [other: string]: unknown };\n\ntype Rectangle = [[number, number], [number, number]];\n\nconst X = 0;\nconst Y = 1;\nconst TOP_LEFT = 0;\nconst BOTTOM_RIGHT = 1;\n\nfunction rectIntersects(rect1: Rectangle, rect2: Rectangle) {\n  return (\n    rect1[TOP_LEFT][X] <= rect2[BOTTOM_RIGHT][X] &&\n    rect2[TOP_LEFT][X] <= rect1[BOTTOM_RIGHT][X] &&\n    rect1[TOP_LEFT][Y] <= rect2[BOTTOM_RIGHT][Y] &&\n    rect2[TOP_LEFT][Y] <= rect1[BOTTOM_RIGHT][Y]\n  );\n}\n\nfunction rectContains(rect: Rectangle, point: [number, number]) {\n  return (\n    rect[TOP_LEFT][X] <= point[X] &&\n    point[X] <= rect[BOTTOM_RIGHT][X] &&\n    rect[TOP_LEFT][Y] <= point[Y] &&\n    point[Y] <= rect[BOTTOM_RIGHT][Y]\n  );\n}\n\nfunction useQuadSearch(\n  searchArea: { left: number; top: number; right: number; bottom: number },\n  data: BrushData[],\n  xScale: ScaleLinear<number, number>,\n  yScale: ScaleLinear<number, number>,\n) {\n  const { left, top, right, bottom } = searchArea;\n  const quadTree = useMemo(() => {\n    const qt = quadtree<BrushData>()\n      .extent([\n        [left - 1, top - 1],\n        [right + 1, bottom + 1],\n      ])\n      .x((d) => xScale(d.x))\n      .y((d) => yScale(d.y))\n      .addAll(data);\n\n    return qt;\n  }, [left, top, right, bottom, data, xScale, yScale]);\n\n  const search = (left: number, top: number, right: number, bottom: number) => {\n    const selectedNodes: string[] = [];\n\n    quadTree.visit((node, x1, y1, x2, y2) => {\n      const overlaps = rectIntersects(\n        [\n          [left, top],\n          [right, bottom],\n        ],\n        [\n          [x1, y1],\n          [x2, y2],\n        ],\n      );\n\n      if (!overlaps) return true;\n\n      if (!node.length) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let newNode: any = node;\n        do {\n          const d = newNode.data;\n          const cx = xScale(d.x);\n          const cy = yScale(d.y);\n\n          if (\n            rectContains(\n              [\n                [left, top],\n                [right, bottom],\n              ],\n              [cx, cy],\n            )\n          ) {\n            selectedNodes.push(d.id);\n          }\n        } while ((newNode = newNode.next));\n      }\n\n      return false;\n    });\n\n    return selectedNodes;\n  };\n\n  return { search };\n}\n\ntype Props = {\n  left: number;\n  bottom: number;\n  top: number;\n  right: number;\n  xScale: ScaleLinear<number, number>;\n  yScale: ScaleLinear<number, number>;\n  data: BrushData[];\n  brushes: BrushCollection;\n  onBrushHandler: BrushHandler;\n  disableBrush?: boolean;\n};\n\nconst BrushComponent: FC<Props> = ({\n  left,\n  right,\n  top,\n  bottom,\n  brushes,\n  xScale,\n  yScale,\n  data,\n  onBrushHandler,\n  disableBrush = false,\n}: Props) => {\n  const overlayRef = useRef<SVGRectElement>(null);\n  const [mouseDownCreation, setMouseDownCreation] = useState(false);\n  const [mouseDownMove, setMouseDownMove] = useState(false);\n  const [mouseDownResize, setMouseDownResize] = useState(false);\n  const [resizeDirection, setResizeDirection] = useState<ResizeDirection | null>(null);\n  const [activeBrush, setActiveBrush] = useState<Brush | null>(null);\n  const [diff, setDiff] = useState<{ x: number; y: number } | null>(null);\n\n  const [height, width] = [Math.abs(top - bottom), Math.abs(left - right)];\n\n  const { pixelX, pixelY, extentToData, extentToPixel } = useMemo(() => {\n    // const yDomainMax = yScale.domain()[1];\n    const yScaleUpdated = yScale.copy().domain(yScale.domain()).range(yScale.range());\n\n    const pixelX = (x: number) => xScale(x);\n    const pixelY = (y: number) => yScaleUpdated(y);\n\n    const dataX = (x: number) => xScale.invert(x);\n    const dataY = (y: number) => yScaleUpdated.invert(y);\n\n    const extentToData = ({ x1, y1, x2, y2 }: Extents) => ({\n      x1: dataX(x1),\n      x2: dataX(x2),\n      y1: dataY(y1),\n      y2: dataY(y2),\n    });\n\n    const extentToPixel = ({ x1, x2, y1, y2 }: Extents) => ({\n      x1: pixelX(x1),\n      x2: pixelX(x2),\n      y1: pixelY(y1),\n      y2: pixelY(y2),\n    });\n\n    return { dataX, dataY, pixelX, pixelY, extentToPixel, extentToData };\n  }, [xScale, yScale]);\n\n  const { search } = useQuadSearch({ left, top, right, bottom }, data, xScale, yScale);\n\n  const onBrush = useCallback(\n    (brushes: BrushCollection, type: BrushAffectType, affectedId: string) => {\n      if (disableBrush) return;\n      const selections: BrushSelections = {};\n\n      Object.values(brushes).forEach((br) => {\n        const { x1, x2, y1, y2 } = br.extents;\n        const selected = search(pixelX(x1), pixelY(y2), pixelX(x2), pixelY(y1));\n        selections[br.id] = selected;\n      });\n\n      onBrushHandler(selections, brushes, type, affectedId);\n    },\n    [onBrushHandler, search, disableBrush, pixelX, pixelY],\n  );\n\n  // ##################################################################### //\n  // ############################## Removal ############################## //\n  // ##################################################################### //\n\n  const closeBrushHandler = useCallback(\n    (id: string) => {\n      const brush = brushes[id];\n\n      if (!brush) throw new Error('Brush does not exist');\n\n      delete brushes[id];\n\n      onBrush({ ...brushes }, 'Remove', id);\n    },\n    [brushes, onBrush],\n  );\n\n  // ##################################################################### //\n  // ############################## Creation ############################# //\n  // ##################################################################### //\n\n  const creationMouseDownHandler = useCallback(\n    (event: React.MouseEvent<SVGRectElement, MouseEvent>) => {\n      const dimensions = event.currentTarget.getBoundingClientRect();\n\n      const extents: Extents = extentToData({\n        x1: event.clientX - dimensions.left,\n        x2: event.clientX - dimensions.left,\n        y1: event.clientY - dimensions.top,\n        y2: event.clientY - dimensions.top,\n      });\n\n      const brush: Brush = {\n        id: getBrushId(),\n        extents,\n      };\n\n      setMouseDownCreation(true);\n      setActiveBrush(brush);\n      //\n    },\n    [extentToData],\n  );\n\n  const creationMouseMoveHandler = useCallback(\n    (event: MouseEvent) => {\n      const targetNode = overlayRef.current;\n\n      if (!targetNode || !activeBrush) return;\n\n      const { left, top } = targetNode.getBoundingClientRect();\n\n      const { x1, y2 } = extentToPixel(activeBrush.extents);\n\n      const x2 = event.clientX - left;\n      const y1 = event.clientY - top;\n\n      // if (x2 < 0) x2 = 0;\n\n      // if (x2 >= width) x2 = right;\n\n      // if (y2 < 0) y2 = 0;\n\n      // if (y2 >= height) y2 = bottom;\n      // right, bottom, height, width\n\n      activeBrush.extents = extentToData({ x1, x2, y1, y2 });\n\n      setActiveBrush({ ...activeBrush });\n      //\n    },\n    [activeBrush, extentToData, extentToPixel],\n  );\n\n  const creationMouseUpHandler = useCallback(() => {\n    if (!activeBrush) return;\n\n    let { x1, x2, y1, y2 } = activeBrush.extents;\n\n    const isNewBrushRedundant = Math.abs(x1 - x2) < 0.00001 || Math.abs(y1 - y2) < 0.00001;\n\n    if (!isNewBrushRedundant) {\n      if (x1 > x2) [x1, x2] = [x2, x1];\n\n      if (y1 > y2) [y1, y2] = [y2, y1];\n\n      activeBrush.extents = correctBrushExtents({ x1, x2, y1, y2 });\n\n      brushes[activeBrush.id] = activeBrush;\n\n      onBrush({ ...brushes }, 'Add', activeBrush.id);\n    }\n\n    setActiveBrush(null);\n    setMouseDownCreation(false);\n  }, [activeBrush, brushes, onBrush]);\n\n  // ##################################################################### //\n  // ################################ Move ############################### //\n  // ##################################################################### //\n\n  const moveMouseDownHandler = useCallback(\n    (event: React.MouseEvent<SVGRectElement, MouseEvent>, id: string) => {\n      const targetNode = overlayRef.current;\n\n      if (!targetNode || mouseDownCreation) return;\n\n      const brush = brushes[id];\n\n      if (!brush) throw new Error('Something went wrong! Brush does not exist.');\n\n      const { left, top } = targetNode.getBoundingClientRect();\n      const { x1: x, y2: y } = extentToPixel(brush.extents);\n\n      const [currX, currY] = [event.clientX - left, event.clientY - top];\n      const [diffX, diffY] = [Math.abs(currX - x), Math.abs(currY - y)];\n\n      setDiff({ x: diffX, y: diffY });\n      setActiveBrush(brush);\n      setMouseDownMove(true);\n    },\n    [brushes, mouseDownCreation, extentToPixel],\n  );\n\n  const moveMouseMoveHandler = useCallback(\n    (event: MouseEvent) => {\n      const targetNode = overlayRef.current;\n\n      if (!targetNode || !activeBrush || !diff) return;\n\n      let { x1, x2, y1, y2 } = extentToPixel(activeBrush.extents);\n      // [x1, x2, y1, y2] = [x1 * width, x2 * width, y1 * height, y2 * height];\n\n      const [brushHeight, brushWidth] = [Math.abs(y2 - y1), Math.abs(x2 - x1)];\n\n      const { x: diffX, y: diffY } = diff;\n\n      const { left, top } = targetNode.getBoundingClientRect();\n\n      let [newX, newY] = [event.clientX - left - diffX, event.clientY - top - diffY];\n\n      if (newX < 0) newX = 0;\n\n      if (newX + brushWidth > width) newX = width - brushWidth;\n\n      if (newY < 0) newY = 0;\n\n      if (newY + brushHeight > height) newY = height - brushHeight;\n\n      [x1, x2, y2, y1] = [newX, newX + brushWidth, newY, newY + brushHeight];\n\n      setActiveBrush({ ...activeBrush, extents: extentToData({ x1, x2, y1, y2 }) });\n    },\n    [activeBrush, diff, extentToPixel, extentToData, height, width],\n  );\n\n  const moveMouseUpHandler = useCallback(() => {\n    if (!activeBrush) return;\n\n    brushes[activeBrush.id] = activeBrush;\n\n    onBrush({ ...brushes }, 'Update', activeBrush.id);\n\n    setActiveBrush(null);\n    setMouseDownMove(false);\n  }, [activeBrush, brushes, onBrush]);\n\n  // ##################################################################### //\n  // ############################### Resize ############################## //\n  // ##################################################################### //\n\n  const resizeMouseDownHandler = useCallback(\n    (brushId: string, direction: ResizeDirection) => {\n      const brush = brushes[brushId];\n\n      if (!brush) throw new Error('Something went wrong! Brush does not exist.');\n\n      setActiveBrush(brush);\n      setMouseDownResize(true);\n      setResizeDirection(direction);\n    },\n    [brushes],\n  );\n\n  const resizeMouseMoveHandler = useCallback(\n    (event: MouseEvent) => {\n      const targetNode = overlayRef.current;\n\n      if (!targetNode || !activeBrush || !resizeDirection) return;\n\n      const { left, top } = targetNode.getBoundingClientRect();\n\n      let { x1, x2, y1, y2 } = extentToPixel(activeBrush.extents);\n\n      switch (resizeDirection) {\n        case 'N':\n          y2 = event.clientY - top;\n          break;\n        case 'S':\n          y1 = event.clientY - top;\n          break;\n        case 'W':\n          x1 = event.clientX - left;\n          break;\n        case 'E':\n          x2 = event.clientX - left;\n          break;\n        case 'NW':\n          x1 = event.clientX - left;\n          y2 = event.clientY - top;\n          break;\n        case 'NE':\n          y2 = event.clientY - top;\n          x2 = event.clientX - left;\n          break;\n        case 'SW':\n          x1 = event.clientX - left;\n          y1 = event.clientY - top;\n          break;\n        case 'SE':\n          y1 = event.clientY - top;\n          x2 = event.clientX - left;\n          break;\n        default:\n          throw new Error('Wrong Resize Direction');\n      }\n\n      activeBrush.extents = extentToData({ x1, x2, y1, y2 });\n\n      setActiveBrush({ ...activeBrush });\n    },\n    [activeBrush, resizeDirection, extentToPixel, extentToData],\n  );\n\n  const resizeMouseUpHandler = useCallback(() => {\n    if (!activeBrush) return;\n\n    activeBrush.extents = correctBrushExtents(activeBrush.extents);\n\n    brushes[activeBrush.id] = activeBrush;\n\n    onBrush({ ...brushes }, 'Update', activeBrush.id);\n    setActiveBrush(null);\n    setResizeDirection(null);\n    setMouseDownResize(false);\n  }, [activeBrush, brushes, onBrush]);\n\n  // ##################################################################### //\n  // ############################## Effects ############################## //\n  // ##################################################################### //\n\n  useEffect(() => {\n    if (!mouseDownCreation && !mouseDownMove && !mouseDownResize) return;\n\n    if (mouseDownCreation) {\n      window.addEventListener('mousemove', creationMouseMoveHandler);\n      window.addEventListener('mouseup', creationMouseUpHandler);\n    }\n\n    if (mouseDownMove) {\n      window.addEventListener('mousemove', moveMouseMoveHandler);\n      window.addEventListener('mouseup', moveMouseUpHandler);\n    }\n\n    if (mouseDownResize) {\n      window.addEventListener('mousemove', resizeMouseMoveHandler);\n      window.addEventListener('mouseup', resizeMouseUpHandler);\n    }\n\n    return () => {\n      if (mouseDownCreation) {\n        window.removeEventListener('mousemove', creationMouseMoveHandler);\n        window.removeEventListener('mouseup', creationMouseUpHandler);\n      }\n\n      if (mouseDownMove) {\n        window.removeEventListener('mousemove', moveMouseMoveHandler);\n        window.removeEventListener('mouseup', moveMouseUpHandler);\n      }\n\n      if (mouseDownResize) {\n        window.removeEventListener('mousemove', resizeMouseMoveHandler);\n        window.removeEventListener('mouseup', resizeMouseUpHandler);\n      }\n    };\n  }, [\n    mouseDownCreation,\n    creationMouseMoveHandler,\n    creationMouseUpHandler,\n    mouseDownMove,\n    moveMouseMoveHandler,\n    moveMouseUpHandler,\n    mouseDownResize,\n    resizeMouseUpHandler,\n    resizeMouseMoveHandler,\n  ]);\n\n  // ##################################################################### //\n  // ############################## Elements ############################# //\n  // ##################################################################### //\n\n  const renderActiveBrush = useCallback(() => {\n    if (!activeBrush) return <g />;\n\n    const { x1, x2, y1, y2 } = correctBrushExtents(extentToPixel(activeBrush.extents));\n\n    return (\n      <RectBrush\n        closeHandler={closeBrushHandler}\n        height={y2 - y1}\n        id={activeBrush.id}\n        width={x2 - x1}\n        x={x1}\n        y={y1}\n        onMouseDown={moveMouseDownHandler}\n        onResizeStart={resizeMouseDownHandler}\n      />\n    );\n  }, [activeBrush, moveMouseDownHandler, resizeMouseDownHandler, closeBrushHandler, extentToPixel]);\n\n  const overlay = (\n    <rect\n      ref={overlayRef}\n      cursor={disableBrush ? 'default' : 'crosshair'}\n      fill=\"none\"\n      height={height}\n      pointerEvents={disableBrush ? 'none' : 'all'}\n      width={width}\n      onMouseDown={creationMouseDownHandler}\n    />\n  );\n\n  let brushList = Object.values(brushes);\n\n  if (activeBrush) brushList = brushList.filter((b) => b.id !== activeBrush.id);\n\n  const renderedBrushes = (\n    <g>\n      {renderActiveBrush()}\n      {Object.values(brushList).map((brush) => {\n        const { x1, x2, y1, y2 } = extentToPixel(brush.extents);\n\n        return (\n          <RectBrush\n            key={brush.id}\n            closeHandler={closeBrushHandler}\n            height={y1 - y2}\n            id={brush.id}\n            width={x2 - x1}\n            x={x1}\n            y={y2}\n            onMouseDown={moveMouseDownHandler}\n            onResizeStart={resizeMouseDownHandler}\n          />\n        );\n      })}\n    </g>\n  );\n\n  const [bottomLayer, topLayer] = mouseDownCreation\n    ? [renderedBrushes, overlay]\n    : [overlay, renderedBrushes];\n\n  return (\n    <g id=\"brush-component\">\n      {bottomLayer}\n      {topLayer}\n    </g>\n  );\n};\n\nexport default BrushComponent;\n\nfunction correctBrushExtents(input: { x1: number; x2: number; y1: number; y2: number }) {\n  let { x1, x2, y1, y2 } = input;\n\n  if (x2 < x1) {\n    [x1, x2] = [x2, x1];\n  }\n\n  if (y2 < y1) {\n    [y1, y2] = [y2, y1];\n  }\n\n  return { x1, x2, y1, y2 };\n}\n","export const MATCHES = 'rgb(254, 95, 85)';\nexport const IPNS = 'rgb(89, 205, 144)';\nexport const ISNP = 'rgb(250, 192, 94)';\nexport const UNION = 'rgb(244,106,15)';\nexport const NON_UNION = 'rgb(44, 127, 184)';\n\nexport const RANK_BAR_FOREGROUND = 'rgb(168,211,238)';\n","import { makeStyles } from '@material-ui/core';\n\nimport { IPNS, ISNP, MATCHES, NON_UNION, UNION } from '../ColorSpecs';\n\nconst useScatterplotStyle = makeStyles({\n  newColor: {\n    stroke: 'blue !important',\n    fill: 'blue !important'\n  },\n  removedColor: {\n    stroke: 'red !important',\n  },\n  newMark: {\n    strokeWidth: '1',\n    fill: 'black',\n  },\n  removedMark: {\n    stroke: 'black',\n    strokeWidth: '3',\n    strokeLinecap: 'round',\n    fill: 'black',\n  },\n  movedLine: {\n    opacity: '0.2 !important',\n    stroke: 'black',\n    fill: 'black',\n    strokeWidth: '1',\n    strokeLinecap: 'round',\n  },\n  movedPoint: {\n    fill: 'gray !important',\n  },\n  regularMark: {\n    fill: 'black',\n  },\n  nonUnionMark: {\n    fill: NON_UNION,\n  },\n  unionMark: {\n    fill: UNION,\n    stroke: UNION,\n  },\n  regularForceMark: {\n    fill: 'black !important',\n    opacity: 0.2,\n  },\n  intermittentHighlight: {\n    fill: 'red',\n  },\n  matches: {\n    fill: `${MATCHES} !important`,\n    opacity: 1,\n  },\n  isnp: {\n    fill: `${ISNP} !important`,\n    opacity: 1,\n  },\n  ipns: {\n    fill: `${IPNS} !important`,\n    opacity: 1,\n  },\n});\n\nexport default useScatterplotStyle;\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { Tooltip } from '@material-ui/core';\nimport { ScaleLinear } from 'd3';\nimport { observer } from 'mobx-react';\nimport React, { FC, useContext } from 'react';\n\nimport Store from '../../Store/Store';\nimport useScatterplotStyle from '../Scatterplot/styles';\n\nimport { DataDisplay } from './ComparisonScatterplot';\n\ntype Props = {\n  points: { x: number; y: number; label: string; id: string }[];\n  compPoints: { x: number; y: number; label: string; id: string }[];\n  selectedPoints: string[];\n  xScale: ScaleLinear<number, number>;\n  yScale: ScaleLinear<number, number>;\n  dataDisplay: DataDisplay;\n};\n\nconst Marks: FC<Props> = ({\n  points,\n  selectedPoints,\n  xScale,\n  yScale,\n  compPoints,\n  dataDisplay,\n}: Props) => {\n  const classes = useScatterplotStyle();\n\n  const { updatedFilterPoints } = useContext(Store).compareStore;\n\n  if (!compPoints || dataDisplay === 'Original') {\n    return (\n      <>\n        {points.map((point) => {\n          return (\n            <Tooltip key={point.id} title={<pre>{JSON.stringify(point, null, 2)}</pre>}>\n              <circle\n                key={point.label}\n                className={`marks ${\n                  selectedPoints.includes(point.id) ? classes.unionMark : classes.regularMark\n                } `}\n                cx={xScale(point.x as number)}\n                cy={yScale(point.y as number)}\n                id={`mark${point.id}`}\n                opacity=\"0.5\"\n                r=\"5\"\n              />\n            </Tooltip>\n          );\n        })}\n      </>\n    );\n  } else if (dataDisplay === 'AddedOnly') {\n    return (\n      <>\n        {compPoints\n          .filter((d) => {\n            return (\n              points.filter((i) => i.label === d.label).length === 0 &&\n              !updatedFilterPoints.includes(d.id)\n            );\n          })\n          .map((point) => {\n            return (\n              <g\n                key={point.label}\n                className={`marks ${classes.newMark} ${\n                  selectedPoints.includes(point.id) ? classes.unionMark : classes.regularMark\n                } ${selectedPoints.length === 0 ? classes.newColor : ''}`}\n                id={`mark${point.id}`}\n                opacity=\"0.5\"\n                transform={`translate(${xScale(point.x as number) - 5}, ${\n                  yScale(point.y as number) - 5\n                })`}\n              >\n                <polygon points=\"0 0, 5 10, 10 0\" />\n              </g>\n            );\n          })}\n      </>\n    );\n  } else if (dataDisplay === 'ChangedOnly') {\n    return (\n      <>\n        {points.map((point) => {\n          if (compPoints !== null) {\n            //if the compPoint removed the point\n            const editGroup = compPoints.filter(\n              (d) => d.label === point.label && (d.x !== point.x || d.y !== point.y),\n            );\n\n            if (editGroup.length > 0) {\n              return (\n                <g>\n                  <path\n                    className={`marks ${classes.movedLine} ${\n                      selectedPoints.includes(point.id) ? classes.unionMark : classes.regularMark\n                    }`}\n                    d={createComet(\n                      xScale(point.x as number),\n                      xScale(editGroup[0].x as number),\n                      yScale(point.y as number),\n                      yScale(editGroup[0].y as number),\n                    )}\n                    style={{ opacity: '0.4' }}\n                  />\n                  <circle\n                    key={point.label}\n                    className={`marks ${classes.movedPoint} ${\n                      selectedPoints.includes(point.id) ? classes.unionMark : classes.regularMark\n                    }`}\n                    cx={xScale(point.x as number)}\n                    cy={yScale(point.y as number)}\n                    id={`mark${point.id}`}\n                    opacity=\".2\"\n                    r=\"5\"\n                  />\n                  <circle\n                    key={editGroup[0].label + '2'}\n                    className={`marks ${classes.movedPoint} ${\n                      selectedPoints.includes(editGroup[0].id)\n                        ? classes.unionMark\n                        : classes.regularMark\n                    }`}\n                    cx={xScale(editGroup[0].x as number)}\n                    cy={yScale(editGroup[0].y as number)}\n                    id={`mark${point.id}`}\n                    opacity=\"1\"\n                    r=\"5\"\n                  />\n                </g>\n              );\n            }\n          }\n\n          return null;\n        })}\n      </>\n    );\n  } else if (dataDisplay === 'RemovedOnly') {\n    return (\n      <>\n        {points.map((point) => {\n          if (compPoints !== null) {\n            //if the compPoint removed the point\n            if (compPoints.filter((d) => d.label === point.label).length === 0) {\n              return (\n                <g\n                  key={point.id}\n                  className={`marks ${classes.removedMark} ${\n                    selectedPoints.includes(point.id) ? classes.unionMark : classes.regularMark\n                  } ${selectedPoints.length === 0 ? classes.removedColor : ''}`}\n                  id={`mark${point.id}`}\n                  opacity=\"0.5\"\n                  transform={`translate(${xScale(point.x as number) - 3}, ${\n                    yScale(point.y as number) - 3\n                  })`}\n                >\n                  <line x2=\"6\" y2=\"6\" />\n                  <line x1=\"6\" y2=\"6\" />\n                </g>\n              );\n            }\n          }\n\n          return <g key={point.id} />;\n        })}\n      </>\n    );\n  } else if (dataDisplay === 'Comparison') {\n    return (\n      <>\n        {compPoints.map((point) => {\n          return (\n            <circle\n              key={point.label}\n              className={`marks ${\n                selectedPoints.includes(point.id) ? classes.unionMark : classes.regularMark\n              }`}\n              cx={xScale(point.x as number)}\n              cy={yScale(point.y as number)}\n              id={`mark${point.id}`}\n              opacity=\"0.5\"\n              r=\"5\"\n            />\n          );\n        })}\n      </>\n    );\n  } else if (dataDisplay === 'Diff') {\n    return (\n      <>\n        {points.map((point) => {\n          if (compPoints !== null) {\n            //if the compPoint removed the point\n            if (compPoints.filter((d) => d.label === point.label).length === 0) {\n              return (\n                <g\n                  key={point.label}\n                  className={`marks ${classes.removedMark} ${\n                    selectedPoints.includes(point.id) ? classes.unionMark : classes.regularMark\n                  } ${selectedPoints.length === 0 ? classes.removedColor : ''}`}\n                  id={`mark${point.id}`}\n                  opacity=\"0.5\"\n                  transform={`translate(${xScale(point.x as number) - 3}, ${\n                    yScale(point.y as number) - 3\n                  })`}\n                >\n                  <line x2=\"6\" y2=\"6\" />\n                  <line x1=\"6\" y2=\"6\" />\n                </g>\n              );\n            }\n          }\n\n          if (compPoints !== null) {\n            //if the compPoint removed the point\n            const editGroup = compPoints.filter(\n              (d) => d.label === point.label && (d.x !== point.x || d.y !== point.y),\n            );\n\n            if (editGroup.length > 0) {\n              return (\n                <g>\n                  <path\n                    className={`marks ${classes.movedLine} ${\n                      selectedPoints.includes(point.id) ? classes.unionMark : classes.regularMark\n                    }`}\n                    d={createComet(\n                      xScale(point.x),\n                      xScale(editGroup[0].x),\n                      yScale(point.y),\n                      yScale(editGroup[0].y),\n                    )}\n                    style={{ opacity: '0.4' }}\n                  />\n                  <g\n                    key={point.label}\n                    className={`marks ${classes.movedPoint} ${\n                      selectedPoints.includes(point.id) ? classes.unionMark : classes.regularMark\n                    }`}\n                    id={`mark${point.id}`}\n                    opacity=\"0.5\"\n                    transform={`translate(${xScale(point.x as number) - 5}, ${\n                      yScale(point.y as number) - 5\n                    })`}\n                  >\n                    <polygon points=\"0 5, 5 10, 10 5, 5 0\" />\n                  </g>\n                  <g\n                    key={editGroup[0].label + '2'}\n                    className={`marks ${classes.movedPoint} ${\n                      selectedPoints.includes(point.id) ? classes.unionMark : classes.regularMark\n                    }`}\n                    id={`mark${editGroup[0].id}`}\n                    opacity=\"0.5\"\n                    transform={`translate(${xScale(editGroup[0].x as number) - 5}, ${\n                      yScale(editGroup[0].y as number) - 5\n                    })`}\n                  >\n                    <polygon points=\"0 5, 5 10, 10 5, 5 0\" />\n                  </g>\n                </g>\n              );\n            }\n          }\n\n          return (\n            <circle\n              key={point.label}\n              className={`marks ${\n                selectedPoints.includes(point.id) ? classes.unionMark : classes.regularMark\n              }`}\n              cx={xScale(point.x as number)}\n              cy={yScale(point.y as number)}\n              id={`mark${point.id}`}\n              opacity=\"0.1\"\n              r=\"5\"\n            />\n          );\n        })}\n\n        {compPoints\n          .filter((d) => {\n            return (\n              points.filter((i) => i.label === d.label).length === 0 &&\n              !updatedFilterPoints.includes(d.id)\n            );\n          })\n          .map((point) => {\n            return (\n              <g\n                key={point.label}\n                className={`marks ${classes.newMark} ${\n                  selectedPoints.includes(point.id) ? classes.unionMark : classes.regularMark\n                } ${selectedPoints.length === 0 ? classes.newColor : ''}`}\n                id={`mark${point.id}`}\n                opacity=\"0.5\"\n                transform={`translate(${xScale(point.x as number) - 5}, ${\n                  yScale(point.y as number) - 5\n                })`}\n              >\n                <polygon points=\"0 0, 5 10, 10 0\" />\n              </g>\n            );\n          })}\n      </>\n    );\n  }\n\n  return (\n    <>\n      {points.map((point) => {\n        if (compPoints !== null) {\n          //if the compPoint removed the point\n          if (compPoints.filter((d) => d.label === point.label).length === 0) {\n            return (\n              <Tooltip key={point.label} title={<pre>{JSON.stringify(point, null, 2)}</pre>}>\n                <g\n                  key={point.label}\n                  className={`marks ${classes.removedMark} ${\n                    selectedPoints.includes(point.id) ? classes.unionMark : classes.regularMark\n                  } ${selectedPoints.length === 0 ? classes.removedColor : ''}`}\n                  id={`mark${point.id}`}\n                  opacity=\"0.5\"\n                  transform={`translate(${xScale(point.x as number) - 3}, ${\n                    yScale(point.y as number) - 3\n                  })`}\n                >\n                  <line x2=\"6\" y2=\"6\" />\n                  <line x1=\"6\" y2=\"6\" />\n                </g>\n              </Tooltip>\n            );\n          }\n        }\n\n        if (compPoints !== null) {\n          //if the compPoint removed the point\n          const editGroup = compPoints.filter(\n            (d) => d.label === point.label && (d.x !== point.x || d.y !== point.y),\n          );\n\n          if (editGroup.length > 0) {\n            return (\n              <Tooltip key={point.label} title={<pre>{JSON.stringify(point, null, 2)}</pre>}>\n                <g>\n                  <path\n                    className={`marks ${classes.movedLine} ${\n                      selectedPoints.includes(point.id) ? classes.unionMark : classes.regularMark\n                    }`}\n                    d={createComet(\n                      xScale(point.x as number),\n                      xScale(editGroup[0].x as number),\n                      yScale(point.y as number),\n                      yScale(editGroup[0].y as number),\n                    )}\n                    style={{ opacity: '0.4' }}\n                  />\n                  <circle\n                    key={point.label}\n                    className={`marks ${classes.movedPoint} ${\n                      selectedPoints.includes(point.id) ? classes.unionMark : classes.regularMark\n                    }`}\n                    cx={xScale(point.x as number)}\n                    cy={yScale(point.y as number)}\n                    id={`mark${point.id}`}\n                    opacity=\".2\"\n                    r=\"5\"\n                  />\n                  <circle\n                    key={editGroup[0].label + '2'}\n                    className={`marks ${classes.movedPoint} ${\n                      selectedPoints.includes(editGroup[0].id)\n                        ? classes.unionMark\n                        : classes.regularMark\n                    }`}\n                    cx={xScale(editGroup[0].x as number)}\n                    cy={yScale(editGroup[0].y as number)}\n                    id={`mark${point.id}`}\n                    opacity=\"1\"\n                    r=\"5\"\n                  />\n                </g>\n              </Tooltip>\n            );\n          }\n        }\n\n        return (\n          <Tooltip key={point.label} title={<pre>{JSON.stringify(point, null, 2)}</pre>}>\n            <circle\n              key={point.label}\n              className={`marks ${\n                selectedPoints.includes(point.id) ? classes.unionMark : classes.regularMark\n              }`}\n              cx={xScale(point.x as number)}\n              cy={yScale(point.y as number)}\n              id={`mark${point.id}`}\n              opacity=\"0.5\"\n              r=\"5\"\n            />\n          </Tooltip>\n        );\n      })}\n\n      {compPoints\n        .filter((d) => {\n          return (\n            points.filter((i) => i.label === d.label).length === 0 &&\n            !updatedFilterPoints.includes(d.id)\n          );\n        })\n        .map((point) => {\n          return (\n            <Tooltip key={point.label} title={<pre>{JSON.stringify(point, null, 2)}</pre>}>\n              <g\n                key={point.label}\n                className={`marks ${classes.newMark} ${\n                  selectedPoints.includes(point.id) ? classes.unionMark : classes.regularMark\n                } ${selectedPoints.length === 0 ? classes.newColor : ''}`}\n                id={`mark${point.id}`}\n                opacity=\"0.5\"\n                transform={`translate(${xScale(point.x as number) - 5}, ${\n                  yScale(point.y as number) - 5\n                })`}\n              >\n                <polygon points=\"0 0, 5 10, 10 0\" />\n              </g>\n            </Tooltip>\n          );\n        })}\n    </>\n  );\n};\n\nexport function createComet(x1: number, x2: number, y1: number, y2: number): string {\n  const theta = Math.atan((x1 - x2) / (y1 - y2));\n\n  const xLength = 4.5 * Math.cos(theta);\n  const yLength = 4.5 * Math.sin(theta);\n\n  return `M ${x2 + xLength} ${y2 - yLength} \n  L ${x1} ${y1} \n  L ${x2 - xLength} ${y2 + yLength}\n  z`;\n}\n\nexport default observer(Marks);\n","import { makeStyles } from '@material-ui/core';\nimport { quadtree, ScaleLinear, select } from 'd3';\nimport { observer } from 'mobx-react';\nimport React, { FC, useEffect, useMemo, useRef, useState } from 'react';\n\nimport translate from '../../Utils/Translate';\n\nexport type BrushSize = 20 | 35 | 50;\n\nconst useStyles = makeStyles(() => ({\n  brushStyle: {\n    cursor: 'grabbing',\n    stroke: 'gray',\n    opacity: 1,\n    transition: 'opacity 0.5s',\n  },\n  brushDown: {\n    stroke: 'rgb(244, 106, 15)',\n  },\n  brushHide: {\n    opacity: 0,\n    transition: 'opacity 0.5s',\n  },\n}));\n\nexport const union_color = '';\nexport type FreeformBrushEvent = 'Start' | 'Brushing' | 'End';\nexport type FreeformBrushAction = 'Selection' | 'Deselection';\n\ntype BrushHandler = (\n  points: string[],\n  event: FreeformBrushEvent,\n  action: FreeformBrushAction,\n) => void;\n\ntype BrushData = { x: number; y: number; id: string; [other: string]: unknown };\n\nfunction isInCircle(\n  center: { x: number; y: number },\n  radius: number,\n  point: { x: number; y: number },\n) {\n  const x_sq = Math.pow(point.x - center.x, 2);\n  const y_sq = Math.pow(point.y - center.y, 2);\n  const distance = Math.sqrt(x_sq + y_sq);\n\n  return distance <= radius;\n}\n\nfunction useQuadSearch(\n  searchArea: { left: number; top: number; width: number; height: number },\n  data: BrushData[],\n  xScale: ScaleLinear<number, number>,\n  yScale: ScaleLinear<number, number>,\n) {\n  const { left, top, width, height } = searchArea;\n  const quadTree = useMemo(() => {\n    const qt = quadtree<BrushData>()\n      .extent([\n        [left - 1, top - 1],\n        [width + 1, height + 1],\n      ])\n      .x((d) => xScale(d.x))\n      .y((d) => yScale(d.y))\n      .addAll(data);\n\n    return qt;\n  }, [left, top, width, height, data, xScale, yScale]);\n\n  const search = (x: number, y: number, radius: number) => {\n    const [x0, x3, y0, y3] = [x - radius, x + radius, y - radius, y + radius];\n    const selectedNodes: string[] = [];\n    // TODO: Figure out the types for this\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    quadTree.visit((node: any, x1, y1, x2, y2) => {\n      if (!node.length) {\n        let newNode = node;\n        do {\n          const {\n            data: d,\n            data: { x: cx, y: cy },\n          } = newNode;\n\n          const isSelected = isInCircle({ x, y }, radius, { x: xScale(cx), y: yScale(cy) });\n\n          if (isSelected) {\n            selectedNodes.push(d.id);\n          }\n        } while ((newNode = newNode.next));\n      }\n\n      return x1 >= x3 || y1 >= y3 || x2 < x0 || y2 < y0;\n    });\n\n    return selectedNodes;\n  };\n\n  return { search };\n}\n\ntype Props = {\n  left: number;\n  right: number;\n  top: number;\n  bottom: number;\n  extentPadding?: number;\n  xScale: ScaleLinear<number, number>;\n  yScale: ScaleLinear<number, number>;\n  onBrush: BrushHandler;\n  data: BrushData[];\n  brushSize?: BrushSize;\n};\n\nconst FreeFormBrush: FC<Props> = ({\n  left = 0,\n  right = 0,\n  top = 0,\n  bottom = 0,\n  extentPadding = 0,\n  onBrush,\n  xScale,\n  yScale,\n  brushSize = 20,\n  data = [],\n}: Props) => {\n  const { brushStyle, brushDown, brushHide } = useStyles();\n  const brushRef = useRef<SVGCircleElement>(null);\n  const layerRef = useRef<SVGRectElement>(null);\n  const selectedPointsRef = useRef<string[]>([]);\n\n  const radius = brushSize || 20;\n\n  const [mouseIn, setMouseIn] = useState(false);\n  const [mouseDown, setMouseDown] = useState(false);\n\n  const [height, width] = [\n    Math.abs(bottom + extentPadding - (top - extentPadding)),\n    Math.abs(left - extentPadding - (right + extentPadding)),\n  ];\n\n  const { search } = useQuadSearch({ left, top, width, height }, data, xScale, yScale);\n\n  function handleMouseDown(event: React.MouseEvent<SVGElement, MouseEvent>) {\n    const targetNode = layerRef.current;\n\n    if (targetNode) {\n      const target = targetNode.getBoundingClientRect();\n      const [x, y] = [event.clientX - target.left, event.clientY - target.top];\n      const selectedPoints = search(x, y, radius);\n      selectedPointsRef.current = selectedPoints;\n      onBrush(selectedPoints, 'Start', 'Selection');\n    }\n    setMouseDown(true);\n  }\n\n  function handleMouseUp() {\n    const targetNode = layerRef.current;\n\n    if (targetNode) {\n      onBrush(Array.from(new Set(selectedPointsRef.current)), 'End', 'Selection');\n      selectedPointsRef.current = [];\n    }\n    setMouseDown(false);\n  }\n\n  function handleMove(event: MouseEvent) {\n    if (!mouseIn) return;\n    const node = brushRef.current;\n    const targetNode = layerRef.current;\n\n    if (node && targetNode) {\n      const target = targetNode.getBoundingClientRect();\n      const [x, y] = [event.clientX - target.left, event.clientY - target.top];\n\n      const nodeSelection = select(node);\n\n      const edgeX = x + radius >= width + 10 || x - radius <= -10;\n      const edgeY = y + radius >= height + 10 || y - radius <= -10;\n\n      if (!edgeX) nodeSelection.attr('cx', x);\n\n      if (!edgeY) nodeSelection.attr('cy', y);\n\n      if (mouseDown) {\n        const selectedPoints = search(x, y, radius);\n        selectedPointsRef.current.push(...selectedPoints);\n        onBrush(selectedPoints, 'Brushing', 'Selection');\n      }\n    }\n  }\n\n  function addEvent() {\n    window.addEventListener('mousemove', handleMove);\n    window.addEventListener('mouseup', handleMouseUp);\n  }\n\n  function removeEvent() {\n    window.removeEventListener('mousemove', handleMove);\n    window.removeEventListener('mouseup', handleMouseUp);\n  }\n\n  useEffect(() => {\n    addEvent();\n\n    return removeEvent;\n  });\n\n  return (\n    <g\n      transform={translate(-extentPadding, -extentPadding)}\n      onMouseDown={handleMouseDown}\n      onMouseEnter={() => setMouseIn(true)}\n      onMouseLeave={() => {\n        if (!mouseDown) setMouseIn(false);\n      }}\n    >\n      <rect ref={layerRef} fill=\"none\" height={height} pointerEvents=\"all\" width={width} />\n      <circle\n        ref={brushRef}\n        className={`${brushStyle} ${mouseDown ? brushDown : ''} ${!mouseIn ? brushHide : ''}`}\n        fill=\"none\"\n        pointerEvents={mouseDown ? 'all' : 'initial'}\n        r={radius}\n        strokeWidth=\"2\"\n      />\n    </g>\n  );\n};\n\nexport default observer(FreeFormBrush);\n","import { scaleLinear, ScaleLinear } from 'd3';\nimport { useMemo } from 'react';\n\nexport function useScale(\n  domain: [number, number],\n  range: [number, number],\n  nice = true,\n): ScaleLinear<number, number> {\n  const [d0, d1] = domain;\n  const [r0, r1] = range;\n\n  const scale = useMemo(() => {\n    const scale = scaleLinear().domain([d0, d1]).range([r0, r1]).clamp(true);\n\n    if (nice) scale.nice();\n\n    return scale;\n  }, [d0, d1, r0, r1, nice]);\n\n  return scale;\n}\n","import { extent } from 'd3';\nimport { useContext, useMemo } from 'react';\n\nimport Store from '../../Store/Store';\nimport { DatasetColumn } from '../../Store/Types/Dataset';\n\nexport type ScatterplotPoints = { x: number; y: number; label: string; id: string }[];\n\nexport function useScatterplotData(\n  x: DatasetColumn,\n  y: DatasetColumn,\n  label: DatasetColumn,\n  comparisonData: boolean,\n): {\n  points: ScatterplotPoints;\n  x_extents: [number, number];\n  y_extents: [number, number];\n} {\n  const { compDataset: compDataFull, loadedDataset: fullData, workingValues: data } = useContext(\n    Store,\n  ).exploreStore;\n  const { compDatasetValues: compData } = useContext(Store).projectStore;\n\n  const dt = useMemo(() => {\n    let points;\n    let allPoints;\n\n    if (comparisonData) {\n      points =\n        compData.map((d) => ({\n          id: d['id'] as string,\n          x: d[x] as number,\n          y: d[y] as number,\n          label: d[label] as string,\n        })) || [];\n      allPoints =\n        compDataFull?.values.map((d) => ({\n          id: d['id'] as string,\n          x: d[x] as number,\n          y: d[y] as number,\n          label: d[label] as string,\n        })) || [];\n    } else {\n      points =\n        data.map((d) => ({\n          id: d['id'] as string,\n          x: d[x] as number,\n          y: d[y] as number,\n          label: d[label] as string,\n        })) || [];\n\n      allPoints =\n        fullData.values.map((d) => ({\n          id: d['id'] as string,\n          x: d[x] as number,\n          y: d[y] as number,\n          label: d[label] as string,\n        })) || [];\n    }\n\n    const x_extents = extent(allPoints.map((d) => d.x) as number[]) as [number, number];\n    const y_extents = extent(allPoints.map((d) => d.y) as number[]) as [number, number];\n\n    return { points, x_extents, y_extents };\n  }, [compData, comparisonData, x, y, label, data, fullData, compDataFull]);\n\n  return dt;\n}\n","import { axisBottom, axisLeft, axisRight, axisTop, ScaleLinear, select } from 'd3';\nimport { observer } from 'mobx-react';\nimport React, { FC, useContext, useEffect, useMemo, useRef } from 'react';\n\nimport Store from '../../Store/Store';\nimport translate from '../../Utils/Translate';\n\ntype Props = {\n  scale: ScaleLinear<number, number>;\n  transform?: string;\n  type: 'left' | 'right' | 'top' | 'bottom';\n  columnName: string;\n};\n\nconst Axis: FC<Props> = ({ scale, transform = '', type, columnName }: Props) => {\n  const gRef = useRef<SVGGElement>(null);\n  const {\n    loadedDataset: { columnInfo },\n  } = useContext(Store).exploreStore;\n\n  const axis = useMemo(() => {\n    let axis = null;\n\n    switch (type) {\n      case 'left':\n        axis = axisLeft(scale);\n        break;\n      case 'right':\n        axis = axisRight(scale);\n        break;\n      case 'bottom':\n        axis = axisBottom(scale);\n        break;\n      case 'top':\n        axis = axisTop(scale);\n        break;\n    }\n\n    axis.tickFormat((d) => {\n      if (d >= 1000000) return `${d.toString()[0]}e${d.toString().length - 1}`;\n\n      if (d >= 500000) return `${(d as number) / 100000}M`;\n\n      if (d >= 1000) return `${(d as number) / 1000}K`;\n\n      return d.toString();\n    });\n\n    return axis;\n  }, [scale, type]);\n\n  useEffect(() => {\n    const { current } = gRef;\n\n    if (!current) return;\n\n    select(current).call(axis);\n  }, [axis]);\n\n  const labelTransform = useMemo(() => {\n    switch (type) {\n      case 'bottom':\n        return translate(Math.max(...scale.range()) / 2, 35);\n      case 'top':\n        return translate(Math.max(...scale.range()) / 2, -35);\n      case 'left':\n        return `${translate(-40, Math.max(...scale.range()) / 2)}rotate(270)`;\n      case 'right':\n        return `${translate(40, Math.max(...scale.range()) / 2)}rotate(90)`;\n    }\n  }, [scale, type]);\n\n  const column = columnInfo[columnName];\n\n  return (\n    <g transform={transform}>\n      <g ref={gRef} />\n      <text dominantBaseline=\"middle\" textAnchor=\"middle\" transform={labelTransform}>\n        <tspan>{column.short}</tspan> <tspan>|</tspan> <tspan>{column.fullname}</tspan>{' '}\n        {column.unit && <tspan>({column.unit})</tspan>}\n      </text>\n    </g>\n  );\n};\n\nexport default observer(Axis);\n","import { observer } from 'mobx-react';\nimport React, { FC } from 'react';\n\nimport translate from '../../Utils/Translate';\nimport { IPNS, ISNP, MATCHES } from '../ColorSpecs';\n\ntype Props = {\n  offset?: number;\n};\n\nconst Legend: FC<Props> = ({ offset = 0 }: Props) => {\n  return (\n    <g transform={translate(offset, -10)}>\n      <g transform={translate(0, 20)}>\n        <circle fill={MATCHES} r=\"5\" />\n        <text dominantBaseline=\"middle\" dx=\"10\">\n          Matches\n        </text>\n      </g>\n      <g transform={translate(0, 40)}>\n        <circle fill={IPNS} r=\"5\" />\n        <text dominantBaseline=\"middle\" dx=\"10\">\n          Not Selected\n        </text>\n      </g>\n      <g transform={translate(0, 60)}>\n        <circle fill={ISNP} r=\"5\" />\n        <text dominantBaseline=\"middle\" dx=\"10\">\n          Not Predicted\n        </text>\n      </g>\n    </g>\n  );\n};\n\nexport default observer(Legend);\n","import { Tooltip } from '@material-ui/core';\nimport clsx from 'clsx';\nimport { ScaleLinear } from 'd3';\nimport { observer } from 'mobx-react';\nimport React, { FC, useContext } from 'react';\n\nimport Store from '../../Store/Store';\n\nimport useScatterplotStyle from './styles';\n\ntype Props = {\n  points: { x: number; y: number; label: string; id: string }[];\n  selectedPoints: string[];\n  xScale: ScaleLinear<number, number>;\n  yScale: ScaleLinear<number, number>;\n};\n\nconst Marks: FC<Props> = ({ points, selectedPoints, xScale, yScale }: Props) => {\n  const {\n    exploreStore: { hoveredPrediction },\n  } = useContext(Store);\n  const classes = useScatterplotStyle();\n  const { matches: matchIds = [], isnp: isnpIds = [], ipns: ipnsIds = [] } =\n    hoveredPrediction?.membership || {};\n\n  return (\n    <>\n      {points.map((point) => {\n        return (\n          <Tooltip key={point.id} title={<pre>{JSON.stringify(point, null, 2)}</pre>}>\n            <circle\n              key={point.label}\n              className={clsx('marks', {\n                [classes.unionMark]: selectedPoints.includes(point.id),\n                [classes.regularMark]: !selectedPoints.includes(point.id),\n                [classes.regularForceMark]: hoveredPrediction ? true : false,\n                [classes.matches]: matchIds.includes(point.id),\n                [classes.isnp]: isnpIds.includes(point.id),\n                [classes.ipns]: ipnsIds.includes(point.id),\n              })}\n              cx={xScale(point.x as number)}\n              cy={yScale(point.y as number)}\n              id={`mark${point.id}`}\n              opacity=\"0.5\"\n              r=\"5\"\n            />\n          </Tooltip>\n        );\n      })}\n    </>\n  );\n};\n\nexport default observer(Marks);\n","import { line, ScaleLinear } from 'd3';\nimport { observer } from 'mobx-react';\nimport React, { useMemo } from 'react';\n\nimport { DBScanInfo } from '../../../Store/Types/Prediction';\n\ntype Props = {\n  info: DBScanInfo;\n  xScale: ScaleLinear<number, number>;\n  yScale: ScaleLinear<number, number>;\n};\n\nconst DBScan = ({ info, xScale, yScale }: Props) => {\n  const lineGen = useMemo(() => {\n    const l = line()\n      .x((d) => xScale(d[0]))\n      .y((d) => yScale(d[1]));\n\n    return l;\n  }, [xScale, yScale]);\n\n  return (\n    <g>\n      <path d={lineGen(info.hull) || ''} fill=\"gray\" opacity=\"0.3\" stroke=\"black\" />\n    </g>\n  );\n};\n\nexport default observer(DBScan);\n","import { line, ScaleLinear, symbol, symbolWye } from 'd3';\nimport { observer } from 'mobx-react';\nimport React, { useMemo } from 'react';\n\nimport { KMeansInfo } from '../../../Store/Types/Prediction';\nimport translate from '../../../Utils/Translate';\n\ntype Props = {\n  info: KMeansInfo;\n  xScale: ScaleLinear<number, number>;\n  yScale: ScaleLinear<number, number>;\n};\n\nconst KMeans = ({ info, xScale, yScale }: Props) => {\n  const { selected_center } = info;\n\n  const sym = symbol().type(symbolWye).size(64);\n\n  const lineGen = useMemo(() => {\n    const l = line()\n      .x((d) => xScale(d[0]))\n      .y((d) => yScale(d[1]));\n\n    return l;\n  }, [xScale, yScale]);\n\n  return (\n    <g>\n      <path\n        d={sym() || ''}\n        fill=\"blue\"\n        opacity=\"0.8\"\n        transform={translate(xScale(selected_center[0]), yScale(selected_center[1]))}\n      />\n      <path d={lineGen(info.hull) || ''} fill=\"gray\" opacity=\"0.3\" stroke=\"black\" />\n    </g>\n  );\n};\n\nexport default observer(KMeans);\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { ScaleLinear } from 'd3';\nimport { observer } from 'mobx-react';\nimport React, { useMemo } from 'react';\n\nimport { LinearRegressionInfo } from '../../../Store/Types/Prediction';\n\ntype Props = {\n  info: LinearRegressionInfo;\n  xScale: ScaleLinear<number, number>;\n  yScale: ScaleLinear<number, number>;\n};\n\nconst LR = ({ info, xScale: x, yScale: y }: Props) => {\n  const { x1, x2, y1, y2, oy1, oy2, ooy1, ooy2 } = useMemo(() => {\n    const { coeff, intercept, threshold } = info;\n    const xScale = x.copy().clamp(false);\n    const yScale = y.copy().clamp(false);\n\n    const line = (x: number) => x * coeff[0] + intercept;\n    const line_offset = (x: number) => x * coeff[0] + intercept - 5 * threshold;\n    const line_offset2 = (x: number) => x * coeff[0] + intercept + 5 * threshold;\n\n    let [x1, x2] = x.domain();\n    let [y1, y2] = x.domain().map(line);\n    let [oy1, oy2] = x.domain().map(line_offset);\n    let [ooy1, ooy2] = x.domain().map(line_offset2);\n\n    [x1, x2, y1, y2, oy1, oy2, ooy1, ooy2] = [\n      xScale(x1),\n      xScale(x2),\n      yScale(y1),\n      yScale(y2),\n      yScale(oy1),\n      yScale(oy2),\n      yScale(ooy1),\n      yScale(ooy2),\n    ];\n\n    return { x1, x2, y1, y2, oy1, oy2, ooy1, ooy2 };\n  }, [x, y, info]);\n\n  return (\n    <g clipPath=\"url(#clip)\">\n      <line opacity=\"0.4\" stroke=\"black\" strokeWidth=\"5px\" x1={x1} x2={x2} y1={y1} y2={y2} />\n      <line opacity=\"0.2\" stroke=\"black\" strokeWidth=\"2px\" x1={x1} x2={x2} y1={oy1} y2={oy2} />\n      <line opacity=\"0.2\" stroke=\"black\" strokeWidth=\"2px\" x1={x1} x2={x2} y1={ooy1} y2={ooy2} />\n    </g>\n  );\n};\n\nexport default observer(LR);\n","import React from 'react';\n\nconst HatchPattern = () => {\n  return (\n    <defs>\n      <pattern\n        height=\"4\"\n        id=\"pattern\"\n        patternTransform=\"rotate(45)\"\n        patternUnits=\"userSpaceOnUse\"\n        width=\"4\"\n      >\n        <rect fill=\"black\" height=\"4\" opacity=\"0.5\" transform=\"translate(0,0)\" width=\"2\" />\n      </pattern>\n    </defs>\n  );\n};\n\nexport default HatchPattern;\n","import { makeStyles } from '@material-ui/core';\nimport clsx from 'clsx';\nimport { ScaleLinear } from 'd3';\nimport { observer } from 'mobx-react';\nimport React, { FC, Fragment, useMemo } from 'react';\n\nimport { SkylineInfo } from '../../../Store/Types/Prediction';\nimport translate from '../../../Utils/Translate';\n\nimport HatchPattern from './HatchPattern';\n\ntype Props = {\n  info: SkylineInfo;\n  xScale: ScaleLinear<number, number>;\n  yScale: ScaleLinear<number, number>;\n};\n\nconst useStyles = makeStyles(() => ({\n  lineBase: {\n    strokeWidth: 2,\n    strokeOpacity: 0.3,\n  },\n  line: {\n    stroke: 'black',\n  },\n  hatch: {\n    strokeWidth: 5,\n    stroke: 'url(#pattern)',\n  },\n}));\n\nconst Skyline: FC<Props> = ({ info, xScale, yScale }: Props) => {\n  const classes = useStyles();\n  const { frontier } = info;\n\n  const [x_sense, y_sense] = info.sense;\n\n  const { scaled_frontier } = useMemo(() => {\n    const scaled_frontier: { x: number; y: number }[] = frontier.map((val) => ({\n      x: xScale(val[0]),\n      y: yScale(val[1]),\n    }));\n\n    return { scaled_frontier };\n  }, [xScale, yScale, frontier]);\n\n  const { x_lines, y_lines } = useMemo(() => {\n    let x_lines = <g />;\n    let y_lines = <g />;\n\n    x_lines = (\n      <g className=\"frontier-x\">\n        {[...scaled_frontier]\n          .sort((a, b) => (x_sense === 'max' ? a.x - b.x : b.x - a.x))\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          .map((n, idx, arr) => {\n            const key = `${n.x}-${n.y}`;\n            let [x1, x2, y1, y2] = [0, 0, 0, 0];\n\n            if (idx === 0) {\n              x1 = x_sense === 'max' ? xScale.range()[0] : n.x;\n              x2 = x_sense === 'max' ? n.x : xScale.range()[1];\n              y1 = n.y;\n              y2 = n.y;\n            } else {\n              const p = arr[idx - 1];\n              x1 = p.x;\n              x2 = n.x;\n              y1 = n.y;\n              y2 = n.y;\n            }\n\n            return (\n              <Fragment key={key}>\n                <line\n                  className={clsx(classes.lineBase, classes.line)}\n                  x1={x1}\n                  x2={x2}\n                  y1={y1}\n                  y2={y2}\n                />\n                <line\n                  className={clsx(classes.lineBase, classes.hatch)}\n                  transform={translate(0, 5)}\n                  x1={x1}\n                  x2={x2}\n                  y1={y1}\n                  y2={y2}\n                />\n              </Fragment>\n            );\n          })}\n      </g>\n    );\n\n    y_lines = (\n      <g>\n        {[...scaled_frontier]\n          .sort((a, b) => (y_sense === 'max' ? a.y - b.y : b.y - a.y))\n          .map((n, idx, arr) => {\n            const key = `${n.x}-${n.y}`;\n\n            let [x1, x2, y1, y2] = [0, 0, 0, 0];\n\n            if (idx === arr.length - 1) {\n              x1 = n.x;\n              x2 = n.x;\n              y1 = y_sense === 'max' ? n.y : yScale.range()[1];\n              y2 = y_sense === 'max' ? yScale.range()[0] : n.y;\n            } else {\n              const p = arr[idx + 1];\n              x1 = n.x;\n              x2 = n.x;\n              y1 = n.y;\n              y2 = p.y;\n            }\n\n            return (\n              <Fragment key={key}>\n                <line\n                  className={clsx(classes.lineBase, classes.line)}\n                  x1={x1}\n                  x2={x2}\n                  y1={y1}\n                  y2={y2}\n                />\n                <line\n                  className={clsx(classes.lineBase, classes.hatch)}\n                  transform={translate(-5, 0)}\n                  x1={x1}\n                  x2={x2}\n                  y1={y1}\n                  y2={y2}\n                />\n              </Fragment>\n            );\n          })}\n      </g>\n    );\n\n    return { x_lines, y_lines };\n  }, [scaled_frontier, x_sense, y_sense, xScale, yScale, classes]);\n\n  return (\n    <g>\n      <HatchPattern />\n      {x_lines}\n      {y_lines}\n    </g>\n  );\n};\n\nexport default observer(Skyline);\n","import { ScaleLinear } from 'd3';\nimport { observer } from 'mobx-react';\nimport React, { FC } from 'react';\n\nimport {\n  DBScanInfo,\n  KMeansInfo,\n  LinearRegressionInfo,\n  Prediction,\n  SkylineInfo,\n} from '../../../Store/Types/Prediction';\n\nimport DBScan from './DBScan';\nimport KMeans from './KMeans';\nimport LR from './LR';\nimport Skyline from './Skyline';\n\ntype Props = {\n  prediction: Prediction;\n  xScale: ScaleLinear<number, number>;\n  yScale: ScaleLinear<number, number>;\n};\n\nconst Overlay: FC<Props> = ({ prediction, xScale, yScale }: Props) => {\n  const { info } = prediction;\n\n  switch (prediction.algorithm) {\n    case 'DBScan':\n      switch (prediction.intent) {\n        case 'Cluster':\n          return <DBScan info={info as DBScanInfo} xScale={xScale} yScale={yScale} />;\n        default:\n          break;\n      }\n      break;\n    case 'KMeans':\n      return <KMeans info={info as KMeansInfo} xScale={xScale} yScale={yScale} />;\n    case 'BNL':\n      return <Skyline info={info as SkylineInfo} xScale={xScale} yScale={yScale} />;\n    case 'LR':\n      return <LR info={info as LinearRegressionInfo} xScale={xScale} yScale={yScale} />;\n    default:\n      break;\n  }\n\n  return <></>;\n};\n\nexport default observer(Overlay);\n","import { makeStyles, Typography } from '@material-ui/core';\nimport clsx from 'clsx';\nimport { observer } from 'mobx-react';\nimport React, { FC } from 'react';\n\nimport translate from '../../../Utils/Translate';\n\ntype Props = {\n  transform?: string;\n  height?: number;\n  width?: number;\n  lineHeight?: number;\n};\n\nconst useStyles = makeStyles(() => ({\n  lineBase: {\n    strokeWidth: 2,\n    strokeOpacity: 0.3,\n  },\n  line: {\n    stroke: 'black',\n  },\n  hatch: {\n    strokeWidth: 5,\n    stroke: 'url(#pattern)',\n  },\n}));\n\nconst SkylineLegend: FC<Props> = ({\n  height = 25,\n  lineHeight = height,\n  width = 150,\n  transform = translate(0),\n}: Props) => {\n  const classes = useStyles();\n\n  const [x1, x2, y1, y2] = [0, 0, 0, lineHeight];\n\n  return (\n    <g transform={transform}>\n      <g transform={translate(width / 2, 0)}>\n        <line className={clsx(classes.lineBase, classes.line)} x1={x1} x2={x2} y1={y1} y2={y2} />\n        <line\n          className={clsx(classes.lineBase, classes.hatch)}\n          transform={translate(5, 0)}\n          x1={x1}\n          x2={x2}\n          y1={y1}\n          y2={y2}\n        />\n        <Typography component=\"text\" transform={translate(10, height / 2)} variant=\"button\">\n          <tspan x=\"0\">Dominated</tspan>\n          <tspan dy=\"1em\" x=\"0\">\n            Region\n          </tspan>\n        </Typography>\n      </g>\n    </g>\n  );\n};\n\nexport default observer(SkylineLegend);\n","import { createStyles, makeStyles, useTheme } from '@material-ui/core';\nimport { select } from 'd3';\nimport { observer } from 'mobx-react';\nimport React, { FC, useCallback, useContext } from 'react';\n\nimport { ExtendedBrushCollection } from '../../Store/IntentState';\nimport Store from '../../Store/Store';\nimport { Plot } from '../../Store/Types/Plot';\nimport translate from '../../Utils/Translate';\nimport BrushComponent, { BrushSelections } from '../Brush/Components/BrushComponent';\nimport { BrushAffectType, BrushCollection } from '../Brush/Types/Brush';\nimport ComparisonMarks from '../Comparison/ComparisonMarks';\nimport { DataDisplay } from '../Comparison/ComparisonScatterplot';\nimport FreeFormBrush, {\n  BrushSize,\n  FreeformBrushAction,\n  FreeformBrushEvent,\n} from '../Freeform/FreeFormBrush';\nimport { useScale } from '../Hooks/useScale';\nimport { useScatterplotData } from '../Hooks/useScatterplot';\n\nimport Axis from './Axis';\nimport Legend from './Legend';\nimport Marks from './Marks';\nimport Overlay from './Overlay/Overlay';\nimport SkylineLegend from './Overlay/SkylineLegend';\nimport useScatterplotStyle from './styles';\n\nconst useStyles = makeStyles(() =>\n  createStyles({\n    root: (props: { dimension: number }) => ({\n      width: props.dimension,\n      height: props.dimension,\n    }),\n  }),\n);\n\ntype Props = {\n  plot: Plot;\n  size: number;\n  originalMarks?: boolean;\n  dataDisplay?: DataDisplay;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  setDataDisplay?: any;\n};\n\nconst Scatterplot: FC<Props> = ({\n  plot,\n  size,\n  originalMarks = true,\n  dataDisplay = 'Original',\n}: Props) => {\n  const theme = useTheme();\n  const dimension = size - 2 * theme.spacing(1);\n  const { root } = useStyles({ dimension });\n  const {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    loadedDataset: { labelColumn },\n    setFreeformSelection,\n    selectedPoints,\n    showMatchesLegend,\n    setBrushSelection,\n    brushType,\n    hoveredPrediction,\n    showSkylineLegend,\n    state,\n  } = useContext(Store).exploreStore;\n\n  const { selectedPointsComparison } = useContext(Store).compareStore;\n\n  const { x, y } = plot;\n\n  const classes = useScatterplotStyle();\n\n  const { points, x_extents, y_extents } = useScatterplotData(x, y, labelColumn, false);\n  const { points: compPoints } = useScatterplotData(x, y, labelColumn, true);\n\n  const margin = theme.spacing(10);\n  const sp_dimension = dimension - 2 * margin;\n\n  const xScale = useScale(x_extents, [0, sp_dimension]);\n  const yScale = useScale(y_extents, [sp_dimension, 0]);\n\n  const freeFormBrushHandler = useCallback(\n    (points: string[], event: FreeformBrushEvent, _: FreeformBrushAction) => {\n      if (points.length === 0) return;\n      const selectorString = points.map((p) => `#mark${p}`).join(',');\n\n      switch (event) {\n        case 'Start':\n        case 'Brushing':\n          select(`#${plot.id}`)\n            .selectAll(selectorString)\n            .filter(function () {\n              return select(this).classed(classes.regularMark);\n            })\n            .classed(classes.intermittentHighlight, true);\n          break;\n        case 'End':\n          select(`#${plot.id}`).selectAll('.marks').classed(classes.intermittentHighlight, false);\n          setFreeformSelection(plot, points);\n          break;\n      }\n    },\n    [plot, setFreeformSelection, classes],\n  );\n\n  const rectBrushHandler = useCallback(\n    (\n      selection: BrushSelections,\n      brushes: BrushCollection,\n      type: BrushAffectType,\n      affectedId: string,\n    ) => {\n      const brs: ExtendedBrushCollection = {};\n\n      Object.entries(brushes).forEach((entry) => {\n        const [id, val] = entry;\n\n        brs[id] = { ...val, points: selection[id] };\n      });\n\n      setBrushSelection(plot, brs, type, affectedId);\n    },\n    [plot, setBrushSelection],\n  );\n\n  let brushSize: BrushSize | null = null;\n\n  switch (brushType) {\n    case 'Freeform Small':\n      brushSize = 20;\n      break;\n    case 'Freeform Medium':\n      brushSize = 35;\n      break;\n    case 'Freeform Large':\n      brushSize = 50;\n      break;\n    default:\n      brushSize = null;\n  }\n\n  return (\n    <svg className={root} id={plot.id}>\n      <defs>\n        <clipPath id=\"clip\" width={sp_dimension}>\n          <rect fill=\"none\" height={sp_dimension} width={sp_dimension} />\n        </clipPath>\n      </defs>\n      <g transform={translate(margin)}>\n        <Axis columnName={x} scale={xScale} transform={translate(0, sp_dimension)} type=\"bottom\" />\n        <Axis columnName={y} scale={yScale} type=\"left\" />\n        {showMatchesLegend && <Legend offset={sp_dimension - 110} />}\n        {showSkylineLegend && <SkylineLegend transform={translate(sp_dimension - 150, 100)} />}\n        <BrushComponent\n          bottom={sp_dimension}\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          brushes={state.brushes[plot.id] || {}}\n          data={points}\n          disableBrush={brushType !== 'Rectangular' || !originalMarks}\n          left={0}\n          right={sp_dimension}\n          top={0}\n          xScale={xScale}\n          yScale={yScale}\n          onBrushHandler={rectBrushHandler}\n        />\n        {brushSize && originalMarks && (\n          <FreeFormBrush\n            bottom={sp_dimension}\n            brushSize={brushSize}\n            data={points}\n            left={0}\n            right={sp_dimension}\n            top={0}\n            xScale={xScale}\n            yScale={yScale}\n            onBrush={freeFormBrushHandler}\n          />\n        )}\n\n        {originalMarks ? (\n          <Marks points={points} selectedPoints={selectedPoints} xScale={xScale} yScale={yScale} />\n        ) : (\n          <ComparisonMarks\n            compPoints={compPoints}\n            dataDisplay={dataDisplay}\n            points={points}\n            selectedPoints={selectedPointsComparison}\n            xScale={xScale}\n            yScale={yScale}\n          />\n        )}\n        {hoveredPrediction && (\n          <Overlay prediction={hoveredPrediction} xScale={xScale} yScale={yScale} />\n        )}\n        {state.prediction && (\n          <Overlay prediction={state.prediction} xScale={xScale} yScale={yScale} />\n        )}\n      </g>\n    </svg>\n  );\n};\n\nexport default observer(Scatterplot);\n","import { observer } from 'mobx-react';\nimport React, { FC } from 'react';\n\nimport translate from '../../Utils/Translate';\nimport useScatterplotStyle from '../Scatterplot/styles';\n\nimport { createComet } from './ComparisonMarks';\n\ntype Props = {\n  offset?: number;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  setDataDisplay: any;\n  dataDisplay: string;\n  selectedPoints: boolean;\n};\n\nconst Legend: FC<Props> = ({ setDataDisplay, dataDisplay, selectedPoints = false }: Props) => {\n  const classes = useScatterplotStyle();\n\n  return (\n    <svg height={30} width={700}>\n      <g>\n        <g\n          transform={translate(0, 10)}\n          onMouseDown={() => {\n            if (dataDisplay === 'Original') {\n              setDataDisplay('All');\n            } else {\n              setDataDisplay('Original');\n            }\n          }}\n        >\n          <circle className={`marks ${classes.regularMark}`} cx={12.5} cy={5} opacity=\".5\" r=\"5\" />\n          {dataDisplay === 'Original' ? (\n            <rect height={25} opacity=\".2\" rx={20} transform={translate(0, -8)} width={100} />\n          ) : null}\n\n          <text\n            dominantBaseline=\"middle\"\n            dx=\"25\"\n            dy=\"5\"\n            font-weight={dataDisplay === 'Original' ? 'bold' : 'normal'}\n          >\n            v1\n          </text>\n        </g>\n        <g\n          transform={translate(100, 10)}\n          onMouseDown={() => {\n            if (dataDisplay === 'Comparison') {\n              setDataDisplay('All');\n            } else {\n              setDataDisplay('Comparison');\n            }\n          }}\n        >\n          <circle className={`marks ${classes.regularMark}`} cx={12.5} cy={5} opacity=\".5\" r=\"5\" />\n          {dataDisplay === 'Comparison' ? (\n            <rect height={25} opacity=\".2\" rx={20} transform={translate(0, -8)} width={100} />\n          ) : null}\n          <text dominantBaseline=\"middle\" dx=\"25\" dy=\"5\">\n            v2\n          </text>\n        </g>\n\n        <g\n          transform={translate(200, 10)}\n          onMouseDown={() => {\n            if (dataDisplay === 'RemovedOnly') {\n              setDataDisplay('All');\n            } else {\n              setDataDisplay('RemovedOnly');\n            }\n          }}\n        >\n          <g\n            className={`marks ${classes.removedMark} ${\n              !selectedPoints ? classes.removedColor : ''\n            }`}\n            opacity=\"0.5\"\n            transform={translate(10, 0)}\n          >\n            <line x2=\"6\" y2=\"6\" />\n            <line x1=\"6\" y2=\"6\" />\n          </g>\n          {dataDisplay === 'RemovedOnly' ? (\n            <rect height={25} opacity=\".2\" rx={20} transform={translate(0, -8)} width={100} />\n          ) : null}\n          <text dominantBaseline=\"middle\" dx=\"25\" dy=\"5\">\n            Removed\n          </text>\n        </g>\n        <g\n          transform={translate(300, 10)}\n          onMouseDown={() => {\n            if (dataDisplay === 'AddedOnly') {\n              setDataDisplay('All');\n            } else {\n              setDataDisplay('AddedOnly');\n            }\n          }}\n        >\n          <g\n            className={`marks ${classes.newMark} ${!selectedPoints ? classes.newColor : ''}`}\n            opacity=\"0.5\"\n            transform={translate(10, 0)}\n          >\n            {dataDisplay === 'AddedOnly' ? (\n              <rect height={25} opacity=\".2\" rx={20} transform={translate(-10, -8)} width={100} />\n            ) : null}\n            <polygon points=\"0 0, 5 10, 10 0\" />\n          </g>\n          <text dominantBaseline=\"middle\" dx=\"32\" dy=\"5\">\n            Added\n          </text>\n        </g>\n        <g\n          transform={translate(400, 10)}\n          onMouseDown={() => {\n            if (dataDisplay === 'ChangedOnly') {\n              setDataDisplay('All');\n            } else {\n              setDataDisplay('ChangedOnly');\n            }\n          }}\n        >\n          <path\n            className={`marks ${classes.movedLine}`}\n            d={createComet(5, 25, 5, 5)}\n            style={{ opacity: '0.4' }}\n          />\n          {dataDisplay === 'ChangedOnly' ? (\n            <rect height={25} opacity=\".2\" rx={20} transform={translate(-10, -8)} width={130} />\n          ) : null}\n          <circle className={`marks ${classes.movedPoint}`} cx={5} cy={5} opacity=\".2\" r=\"5\" />\n          <circle className={`marks ${classes.movedPoint}`} cx={25} cy={5} opacity=\"1\" r=\"5\" />\n          <text dominantBaseline=\"middle\" dx=\"32\" dy=\"5\">\n            Point Moved\n          </text>\n        </g>\n        <g\n          transform={translate(510, 10)}\n          onMouseDown={() => {\n            if (dataDisplay === 'Diff') {\n              setDataDisplay('All');\n            } else {\n              setDataDisplay('Diff');\n            }\n          }}\n        >\n          {dataDisplay === 'Diff' ? (\n            <rect height={25} opacity=\".2\" rx={20} transform={translate(14, -8)} width={130} />\n          ) : null}\n          <text dominantBaseline=\"middle\" dx=\"32\" dy=\"5\">\n            All Changed Data\n          </text>\n        </g>\n      </g>\n    </svg>\n  );\n};\n\nexport default observer(Legend);\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport {\n  CircularProgress,\n  createStyles,\n  Grid,\n  IconButton,\n  makeStyles,\n  Paper,\n  Theme,\n  useTheme,\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { observer } from 'mobx-react';\nimport React, { FC, useContext, useState } from 'react';\n\nimport Store from '../../Store/Store';\nimport Scatterplot from '../Scatterplot/Scatterplot';\n\nimport ComparisonLegend from './ComparisonLegend';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      flexGrow: 1,\n      padding: theme.spacing(2),\n      overflow: 'auto',\n    },\n    grid: {\n      height: '100%',\n    },\n    closeIcon: {\n      position: 'absolute',\n    },\n  }),\n);\n\nexport type DataDisplay =\n  | 'Original'\n  | 'Diff'\n  | 'Comparison'\n  | 'All'\n  | 'AddedOnly'\n  | 'RemovedOnly'\n  | 'ChangedOnly';\n\nconst CompVis: FC = () => {\n  const { plots, removePlot, isLoadingData, n_plots } = useContext(Store).exploreStore;\n  const { currentProject } = useContext(Store).projectStore;\n\n  const opts =\n    currentProject?.datasets.map((dataset) => ({\n      key: dataset.key,\n      desc: dataset.version,\n    })) || [];\n\n  const { selectedPoints } = useContext(Store).exploreStore;\n\n  // const spContainerDimension = height > width ? width : height;\n  const spContainerDimension = n_plots === 1 ? 800 : 500;\n\n  const [dataDisplay, setDataDisplay] = useState<DataDisplay>('All');\n  const classes = useStyles();\n  const theme = useTheme();\n  const xs = n_plots === 1 ? 'auto' : 6;\n\n  const loader = <CircularProgress />;\n\n  const scatterPlots = plots.map((plot) => (\n    <Grid key={plot.id} xs={xs} item>\n      <ComparisonLegend\n        dataDisplay={dataDisplay}\n        offset={spContainerDimension - 2 * theme.spacing(1) - 110}\n        selectedPoints={selectedPoints.length > 0}\n        setDataDisplay={setDataDisplay}\n      />\n\n      <Paper elevation={3}>\n        {n_plots > 1 && (\n          <IconButton className={classes.closeIcon} onClick={() => removePlot(plot)}>\n            <CloseIcon />\n          </IconButton>\n        )}\n        <div>\n          {/* <Button\n            color=\"primary\"\n            variant=\"outlined\"\n            onMouseOut={() => {\n              setDataDisplay('All');\n            }}\n            onMouseOver={() => {\n              setDataDisplay('Original');\n            }}\n          >\n            {opts[0].desc}\n          </Button>\n          <Button\n            color=\"primary\"\n            variant=\"outlined\"\n            onMouseOut={() => {\n              setDataDisplay('All');\n            }}\n            onMouseOver={() => {\n              setDataDisplay('Comparison');\n            }}\n          >\n            {opts[1].desc}\n          </Button>\n          <Button\n            color=\"primary\"\n            variant=\"outlined\"\n            onMouseOut={() => {\n              setDataDisplay('All');\n            }}\n            onMouseOver={() => {\n              setDataDisplay('Diff');\n            }}\n          >\n            Changed Data\n          </Button> */}\n        </div>\n        <Scatterplot\n          dataDisplay={dataDisplay}\n          originalMarks={false}\n          plot={plot}\n          size={spContainerDimension - 2 * theme.spacing(1)}\n        />\n      </Paper>\n    </Grid>\n  ));\n\n  // console.log(prov);\n\n  return (\n    <div className={classes.root}>\n      <Grid alignItems=\"center\" className={classes.grid} justify=\"center\" spacing={2} container>\n        {isLoadingData ? loader : scatterPlots}\n      </Grid>\n    </div>\n  );\n};\n\nexport default observer(CompVis);\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { CssBaseline, makeStyles } from '@material-ui/core';\nimport { isChildNode } from '@visdesignlab/trrack';\nimport { observer } from 'mobx-react';\nimport React, { FC, useContext, useEffect } from 'react';\nimport { Redirect, RouteComponentProps } from 'react-router-dom';\n\nimport { ProvVis } from '../../trrack-vis/index';\nimport Store from '../../Store/Store';\nimport { Plot } from '../../Store/Types/Plot';\nimport { getPlotId } from '../../Utils/IDGens';\nimport { eventConfig } from '../Explore/ExploreHome';\n\nimport ComparisonScatterplot from './ComparisonScatterplot';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    '.red': {\n      backgroundColor: '#ff8080',\n    },\n    '.green': {\n      backgroundColor: '#90EE90',\n    },\n    '.yellow': {\n      backgroundColor: '#ffff8b',\n    },\n    display: 'grid',\n    height: '100vh',\n    width: '100vw',\n    gridTemplateRows: 'min-content 1fr',\n    overflow: 'hidden',\n  },\n  layout: {\n    display: 'grid',\n    gridTemplateColumns: '5fr 2fr',\n    overflow: 'hidden',\n  },\n}));\n\nconst ComparisonHome: FC<RouteComponentProps> = ({ location }: RouteComponentProps) => {\n  const {\n    exploreStore: { n_plots, addPlot },\n    projectStore: { loadedDataset, comparisonDataset },\n    provenance,\n    setQueryParams,\n    loadedWorkflowId,\n    loadSavedProject\n  } = useContext(Store);\n\n  useEffect(() => {\n    setQueryParams(location.search);\n  }, [location.search, setQueryParams]);\n\n  useEffect(() => {\n    const current = provenance.current;\n\n    if (isChildNode(current)) {\n      if (current.children.length > 0) return;\n    }\n\n    if (n_plots > 0 || !loadedDataset || loadedWorkflowId || loadSavedProject) return;\n    const { numericColumns } = loadedDataset;\n    const plot: Plot = {\n      id: getPlotId(),\n      x: numericColumns[0],\n      y: numericColumns[1],\n    };\n    addPlot(plot);\n  });\n\n  const classes = useStyles();\n\n  if (!comparisonDataset)\n    return <Redirect to={{ pathname: '/project', search: location.search }} />;\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <div className={classes.layout}>\n        <ComparisonScatterplot />\n        {/* <ProvVis\n          approvedFunction={() => console.log('approved')}\n          brushCallback={brushedNodes}\n          bundleMap={bundle}\n          changeCurrent={(nodeID: string) => provenance.goToNode(nodeID)}\n          current={provenance.graph.current}\n          currentDataset={loadedDataset.key}\n          ephemeralUndo={false}\n          eventConfig={eventConfig}\n          nodeCreationMap={nodeCreationMap}\n          nodeMap={provenance.graph.nodes}\n          prov={provenance}\n          rejectedFunction={() => console.log('rejected')}\n          root={provenance.graph.root}\n          undoRedoButtons\n        /> */}\n      </div>\n    </div>\n  );\n};\n\nexport default observer(ComparisonHome);\n","import { BundleMap } from './BundleMap';\n\nexport default function findBundleParent(nodeId: string, bundleMap?: BundleMap): string[] {\n  const parentList = [];\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const bundle in bundleMap) {\n    if (bundleMap[bundle].bunchedNodes.includes(nodeId)) {\n      parentList.push(bundle);\n    }\n  }\n\n  return parentList;\n}\n","export default function translate(x: number, y: number) {\n  return `translate(${x}, ${y})`;\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { ProvenanceNode } from '@visdesignlab/trrack';\nimport { HierarchyNode } from 'd3';\n\nimport { StratifiedMap } from '../components/ProvVis';\n\nexport type TreeNode = HierarchyNode<unknown>;\n\nexport type ExtendedHierarchyNode<T, S, A> = {\n  column: number;\n} & HierarchyNode<ProvenanceNode<T, S, A>>;\n\nexport type ExtendedStratifiedMap<T, S, A> = {\n  [key: string]: ExtendedHierarchyNode<T, S, A>;\n};\n\nexport function treeLayout<T, S, A>(nodes: StratifiedMap<T, S, A>, current: string, root: string) {\n  const depthMap: { [key: string]: any } = {};\n\n  const currentPath = getPathTo(nodes, root, current);\n\n  DFS(nodes, root, depthMap, currentPath);\n\n  return currentPath;\n}\n\nfunction DFS<T, S, A>(\n  nodes: StratifiedMap<T, S, A>,\n  node: string,\n  depthMap: any,\n  currentPath: string[],\n) {\n  const explored = new Set();\n\n  const toExplore = [];\n\n  let currDepth = 0;\n\n  toExplore.push(nodes[node]);\n\n  while (toExplore.length > 0) {\n    const temp: any = toExplore.pop();\n\n    if (!explored.has(temp.id)) {\n      temp.width = currDepth;\n      depthMap[temp.id] = temp.width;\n      explored.add(temp.id);\n    } else {\n      temp.width = depthMap[temp.id];\n    }\n\n    if (temp.children) {\n      toExplore.push(\n        ...temp.children.sort((a: any, b: any) => {\n          const aIncludes = currentPath.includes(a.id) ? 1 : 0;\n          const bIncludes = currentPath.includes(b.id) ? 1 : 0;\n\n          return aIncludes - bIncludes;\n        }),\n      );\n    } else {\n      currDepth += 1;\n    }\n  }\n}\n\nexport function getPathTo<T, S, A>(\n  nodes: StratifiedMap<T, S, A>,\n  from: string,\n  to: string,\n): string[] {\n  const path: string[] = [];\n\n  search(nodes, from, to, path);\n\n  return [from, ...path.reverse()];\n}\n\nfunction search<T, S, A>(\n  nodes: StratifiedMap<T, S, A>,\n  node: string,\n  final: string,\n  path: string[],\n) {\n  if (!nodes[node]) return false;\n\n  if (node === final) {\n    path.push(node);\n\n    return true;\n  }\n\n  const children = nodes[node].children || [];\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const child of children) {\n    if (search(nodes, child.id!, final, path)) {\n      path.push(child.id!);\n\n      return true;\n    }\n  }\n\n  return false;\n}\n","import { style } from 'typestyle';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const treeColor = (current?: boolean) => style({\n  fill: current ? 'rgb(33, 133, 208)' : 'white',\n  stroke: 'rgb(33, 133, 208)',\n});\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/no-non-null-asserted-optional-chain */\n/* eslint-disable no-unused-vars */\nimport { NodeID, Provenance, ProvenanceNode, StateNode } from '@visdesignlab/trrack';\nimport React, { ReactChild, useState } from 'react';\nimport { Animate } from 'react-move';\nimport { Button, Icon, Popup } from 'semantic-ui-react';\n\nimport { BundleMap, OriginMap } from '../Utils/BundleMap';\nimport { EventConfig } from '../Utils/EventConfig';\nimport translate from '../Utils/translate';\n\nimport { treeColor } from './Styles';\n\ntype BackboneNodeProps<T, S extends string, A> = {\n  prov: Provenance<T, S, A>;\n  first: boolean;\n  iconOnly: boolean;\n  current: boolean;\n  duration: number;\n  node: StateNode<T, S, A>;\n  radius: number;\n  strokeWidth: number;\n  textSize: number;\n  setBookmark: any;\n  bookmark: any;\n  nodeMap: any;\n  currentDataset: string;\n  annotationOpen: number;\n  setAnnotationOpen: any;\n  exemptList: string[];\n  setExemptList: any;\n  bundleMap?: BundleMap;\n  clusterLabels: boolean;\n  editAnnotations: boolean;\n  eventConfig?: EventConfig<S>;\n  popupContent?: (nodeId: StateNode<T, S, A>) => ReactChild;\n  annotationContent?: (nodeId: StateNode<T, S, A>) => ReactChild;\n  approvedFunction: (id: NodeID) => void;\n  nodeCreationMap: OriginMap;\n  addToWorkflow: (id: string) => void;\n  rejectedFunction: (id: NodeID) => void;\n  expandedClusterList?: string[];\n};\n\nfunction BackboneNode<T, S extends string, A>({\n  prov,\n  first,\n  iconOnly,\n  current,\n  node,\n  duration,\n  radius,\n  strokeWidth,\n  addToWorkflow,\n  textSize,\n  nodeMap,\n  annotationOpen,\n  bookmark,\n  setAnnotationOpen,\n  exemptList,\n  setExemptList,\n  bundleMap,\n  eventConfig,\n  popupContent,\n  editAnnotations,\n  annotationContent,\n  approvedFunction,\n  rejectedFunction,\n  currentDataset,\n  nodeCreationMap,\n  expandedClusterList,\n}: BackboneNodeProps<T, S, A>) {\n  const padding = 25;\n\n  const cursorStyle = {\n    cursor: 'pointer',\n  } as React.CSSProperties;\n\n  const [annotateText, setAnnotateText] = useState(\n    node.artifacts && node.artifacts.annotations && \n    prov.getLatestAnnotation(node.id)?.annotation\n      ? prov.getLatestAnnotation(node.id)?.annotation!\n      : '',\n  );\n\n  const handleCheck = () => {\n    const lastAnnotation = prov.getLatestAnnotation(node.id);\n\n    if (lastAnnotation?.annotation !== annotateText.trim()) {\n      prov.addAnnotation(annotateText, node.id);\n      setAnnotationOpen(-1);\n    }\n  };\n\n  const handleClose = () => {\n    setAnnotateText(prov.getLatestAnnotation(node.id)?.annotation!);\n    setAnnotationOpen(-1);\n  };\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  const handleInputChange = () => {};\n\n  // console.log(JSON.parse(JSON.stringify(node)));\n  let glyph = (\n    <circle\n      className={treeColor(current)}\n      r={radius}\n      strokeWidth={strokeWidth}\n      style={cursorStyle}\n    />\n  );\n\n  // let backboneBundleNodes = findBackboneBundleNodes(nodeMap, bundleMap)\n\n  let dropDownAdded = false;\n\n  if (eventConfig) {\n    const { eventType } = node.metadata;\n\n    if (eventType && eventType in eventConfig && eventType !== 'Root') {\n      const { bundleGlyph, currentGlyph, backboneGlyph } = eventConfig[eventType];\n\n      if (bundleMap && Object.keys(bundleMap).includes(node.id)) {\n        dropDownAdded = true;\n        glyph = (\n          <g fontWeight=\"none\" style={cursorStyle}>\n            {bundleGlyph}\n          </g>\n        );\n      }\n\n      if (current) {\n        glyph = (\n          <g fontWeight=\"none\" style={cursorStyle}>\n            {currentGlyph}\n          </g>\n        );\n      } else if (!dropDownAdded) {\n        glyph = (\n          <g fontWeight=\"none\" style={cursorStyle}>\n            {backboneGlyph}\n          </g>\n        );\n      }\n    }\n  }\n\n  let label = '';\n  let annotate = '';\n\n  // console.log(bundleMap)\n  // console.log(nodeMap[node.id]);\n\n  if (\n    bundleMap &&\n    Object.keys(bundleMap).includes(node.id) &&\n    node.actionType === 'Ephemeral' &&\n    expandedClusterList &&\n    !expandedClusterList.includes(node.id)\n  ) {\n    if (node.metadata && node.metadata.eventType) {\n      label = `[${bundleMap[node.id].bunchedNodes.length}] ${node.metadata.eventType}`;\n    } else {\n      label = `[${bundleMap[node.id].bunchedNodes.length}]`;\n    }\n  } else {\n    label = node.label;\n  }\n\n  if (\n    node.artifacts &&\n    node.artifacts.annotations && \n    node.artifacts.annotations.length > 0 &&\n    annotationOpen !== nodeMap[node.id].depth\n  ) {\n    annotate = node.artifacts.annotations[0].annotation;\n  }\n\n  if (!nodeMap[node.id]) {\n    return null;\n  }\n\n  if (annotate.length > 20) annotate = `${annotate.substr(0, 20)}..`;\n\n  if (label.length > 20) label = `${label.substr(0, 20)}..`;\n\n  const labelG = (\n    <g style={{ opacity: 1 }} transform={translate(padding, 0)}>\n      {nodeCreationMap[node.id] ? (\n        <g>\n          <g transform={translate(-10, -10)}>\n            <circle fill=\"white\" opacity=\"1\" r=\"7\" />\n\n            <text\n              alignmentBaseline=\"middle\"\n              fill={\n                nodeCreationMap[node.id] && nodeCreationMap[node.id].createdIn === currentDataset\n                  ? 'green'\n                  : 'grey'\n              }\n              fontSize={10}\n              fontWeight=\"bold\"\n              style={cursorStyle}\n              textAnchor=\"middle\"\n              x={0}\n              y={0}\n            >\n              {nodeCreationMap[node.id] ? nodeCreationMap[node.id].createdIn : ''}\n            </text>\n          </g>\n\n          <g transform={translate(-10, 10)}>\n            <circle fill=\"white\" opacity=\"1\" r=\"7\" />\n\n            <text\n              alignmentBaseline=\"middle\"\n              fill={\n                nodeCreationMap[node.id] &&\n                nodeCreationMap[node.id].approvedIn.includes(currentDataset)\n                  ? 'green'\n                  : nodeCreationMap[node.id].rejectedIn.includes(currentDataset)\n                  ? 'red'\n                  : 'black'\n              }\n              fontFamily=\"Icons\"\n              fontSize={10}\n              style={cursorStyle}\n              textAnchor=\"middle\"\n              x={0}\n              y={0}\n            >\n              {nodeCreationMap[node.id] &&\n              nodeCreationMap[node.id].approvedIn.includes(currentDataset)\n                ? '\\uf00c'\n                : nodeCreationMap[node.id].rejectedIn.includes(currentDataset)\n                ? '\\uf00d'\n                : '\\uf128'}\n            </text>\n          </g>\n        </g>\n      ) : null}\n      {nodeCreationMap[node.id] &&\n      !nodeCreationMap[node.id].rejectedIn.includes(currentDataset) &&\n      !nodeCreationMap[node.id].approvedIn.includes(currentDataset) ? (\n        <g transform={translate(-10, 10)}>\n          <foreignObject height=\"100\" width=\"50\" x=\"-45\" y=\"-30\">\n            <div style={{ maxWidth: '20' }}>\n              <Button\n                style={{\n                  margin: '1px',\n                  padding: '1px',\n                  maxHeight: '15px',\n                  maxWidth: '15px',\n                }}\n                onClick={(event) => {\n                  event.stopPropagation();\n                  approvedFunction(node.id);\n                }}\n              >\n                <Icon color=\"green\" name=\"check\" size=\"small\" style={{ margin: '0px' }} />\n              </Button>\n            </div>\n            <div style={{ maxWidth: '20' }}>\n              <Button\n                style={{\n                  margin: '1px',\n                  padding: '1px',\n                  maxHeight: '15px',\n                  maxWidth: '15px',\n                }}\n                onClick={(event) => {\n                  event.stopPropagation();\n                  rejectedFunction(node.id);\n                }}\n              >\n                <Icon color=\"red\" name=\"close\" size=\"small\" style={{ margin: '0px' }} />\n              </Button>\n            </div>\n          </foreignObject>\n        </g>\n      ) : (\n        node.label !== 'Root' &&\n        !nodeCreationMap[node.id].rejectedIn.includes(currentDataset) && (\n          <g transform={translate(-10, 10)}>\n            <foreignObject height=\"100\" width=\"50\" x=\"-45\" y=\"-20\">\n              <div style={{ maxWidth: '20' }}>\n                <Button\n                  style={{\n                    margin: '1px',\n                    padding: '1px',\n                    maxHeight: '20px',\n                    maxWidth: '20px',\n                  }}\n                  onClick={(event) => {\n                    event.stopPropagation();\n                    addToWorkflow(node.id);\n                  }}\n                >\n                  <Icon color=\"green\" name=\"add\" size=\"small\" style={{ margin: '0px' }} />\n                </Button>\n              </div>\n            </foreignObject>\n          </g>\n        )\n      )}\n\n      {!iconOnly ? (\n        <g>\n          {dropDownAdded ? (\n            <text\n              alignmentBaseline=\"middle\"\n              fill=\"rgb(248, 191, 132)\"\n              fontFamily=\"Icons\"\n              fontSize={17}\n              style={cursorStyle}\n              textAnchor=\"middle\"\n              x={1}\n              y={0}\n              onClick={(e) => nodeClicked(node, e)}\n            >\n              {expandedClusterList && expandedClusterList.includes(node.id) ? '\\uf0d8' : '\\uf0d7'}\n            </text>\n          ) : (\n            <g />\n          )}\n          {editAnnotations ? (\n            <button>\n              <i className=\"fas fa-undo marginRight\" />\n              Undo\n            </button>\n          ) : (\n            <g />\n          )}\n          <text\n            dominantBaseline=\"middle\"\n            fill=\"black\"\n            fontSize={textSize}\n            fontWeight=\"bold\"\n            textAnchor=\"start\"\n            x={dropDownAdded ? 10 : 0}\n            y={annotate.length === 0 ? 0 : -7}\n            onClick={() => labelClicked(node)}\n          >\n            {label}\n          </text>\n          ,\n          <text\n            dominantBaseline=\"middle\"\n            fill=\"black\"\n            fontSize={textSize}\n            fontWeight=\"regular\"\n            textAnchor=\"start\"\n            x={dropDownAdded ? 10 : 0}\n            y={7}\n            onClick={() => labelClicked(node)}\n          >\n            {annotate}\n          </text>\n          ,\n          <text\n            alignmentBaseline=\"middle\"\n            className=\"fas fa\"\n            fill={prov.getBookmark(node.id) ? '#2185d0' : '#cccccc'}\n            fontFamily=\"Icons\"\n            fontSize={17}\n            opacity={bookmark === node.id || prov.getBookmark(node.id) ? 1 : 0}\n            style={cursorStyle}\n            textAnchor=\"middle\"\n            x={175}\n            y={0}\n            onClick={(e) => {\n              prov.setBookmark(node.id, !prov.getBookmark(node.id));\n\n              e.stopPropagation();\n            }}\n          >\n            {'\\uf02e'}\n          </text>\n          ,\n          <text\n            alignmentBaseline=\"middle\"\n            fill={annotationOpen === nodeMap[node.id].depth ? '#2185d0' : '#cccccc'}\n            fontFamily=\"Icons\"\n            fontSize={17}\n            opacity={bookmark === node.id || annotationOpen === nodeMap[node.id].depth ? 1 : 0}\n            style={cursorStyle}\n            textAnchor=\"middle\"\n            x={210}\n            y={0}\n            onClick={() => {\n              if (annotationOpen === -1 || nodeMap[node.id].depth !== annotationOpen) {\n                setAnnotationOpen(nodeMap[node.id].depth);\n              } else {\n                setAnnotationOpen(-1);\n              }\n            }}\n          >\n            {'\\uf044'}\n          </text>\n        </g>\n      ) : (\n        <g>\n          {dropDownAdded ? (\n            <text\n              alignmentBaseline=\"middle\"\n              fill=\"rgb(248, 191, 132)\"\n              fontFamily=\"Icons\"\n              fontSize={17}\n              style={cursorStyle}\n              textAnchor=\"middle\"\n              x={1}\n              y={0}\n              onClick={(e) => nodeClicked(node, e)}\n            >\n              {expandedClusterList && expandedClusterList.includes(node.id) ? '\\uf0d8' : '\\uf0d7'}\n            </text>\n          ) : (\n            <g />\n          )}\n        </g>\n      )}\n    </g>\n  );\n\n  return (\n    <Animate\n      enter={{\n        opacity: [1],\n        timing: { duration: 100, delay: first ? 0 : duration },\n      }}\n      start={{ opacity: 0 }}\n    >\n      {() => (\n        <>\n          {popupContent !== undefined && nodeMap[node.id].depth > 0 ? (\n            <Popup content={popupContent(node)} trigger={glyph} />\n          ) : (\n            glyph\n          )}\n          {/* {glyph} */}\n\n          {popupContent !== undefined && nodeMap[node.id].depth > 0 ? (\n            <Popup content={popupContent(node)} trigger={labelG} />\n          ) : (\n            labelG\n          )}\n\n          {annotationOpen !== -1 && nodeMap[node.id].depth === annotationOpen ? (\n            <g transform=\"translate(15, 25)\">\n              <foreignObject height=\"80\" width=\"175\" x=\"0\" y=\"0\">\n                <div>\n                  <textarea\n                    style={{ maxWidth: 130, resize: 'none' }}\n                    value={annotateText}\n                    onChange={handleInputChange}\n                  />\n                  <button onClick={handleCheck}>Annotate</button>\n\n                  <button onClick={handleClose}>Close</button>\n                </div>\n\n                {/* <Input size='massive' icon='close' onChange={handleInputChange}\n                  defaultValue={annotateText.current} placeholder=\"Edit Annotation\" action>\n                    <input />\n                    <Button color=\"green\" type=\"submit\" onClick={handleCheck}>\n                      <Icon name=\"world\"/>\n                    </Button>\n                    <Button color=\"red\" type=\"submit\" onClick={handleClose}>\n                      <Icon name=\"close\"/>\n                    </Button>\n                  </Input> */}\n              </foreignObject>\n            </g>\n          ) : (\n            <g />\n          )}\n        </>\n      )}\n    </Animate>\n  );\n\n  function labelClicked(innerNode: ProvenanceNode<T, S, A>) {\n    if (annotationOpen === nodeMap[innerNode.id].depth && annotationContent) {\n      setAnnotationOpen(-1);\n    } else if (annotationContent) {\n      setAnnotationOpen(nodeMap[innerNode.id].depth);\n    }\n  }\n\n  function nodeClicked(innerNode: ProvenanceNode<T, S, A>, event: any) {\n    if (bundleMap && Object.keys(bundleMap).includes(innerNode.id)) {\n      const exemptCopy: string[] = Array.from(exemptList);\n\n      if (exemptCopy.includes(innerNode.id)) {\n        exemptCopy.splice(\n          exemptCopy.findIndex((d) => d === innerNode.id),\n          1,\n        );\n      } else {\n        exemptCopy.push(innerNode.id);\n      }\n\n      setExemptList(exemptCopy);\n    }\n\n    event.stopPropagation();\n  }\n}\n\nexport default BackboneNode;\n\n// const Label: FC<{ label: string } & React.SVGProps<SVGTextElement>> = (props: {\n//   label: string;\n// }) => {\n//   return <text {...props}>{props.label}</text>;\n// };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/no-inferrable-types */\nimport { StateNode } from '@visdesignlab/trrack';\nimport React from 'react';\nimport { Animate } from 'react-move';\n\nimport { EventConfig } from '../Utils/EventConfig';\n\nimport { treeColor } from './Styles';\n\ntype BookmarkNodeProps<T, S extends string, A> = {\n  current: boolean;\n  node: StateNode<T, S, A>;\n  nodeMap: any;\n  editAnnotations: boolean;\n  eventConfig?: EventConfig<S>;\n};\n\nfunction BookmarkNode<T, S extends string, A>({\n  current,\n  node,\n  eventConfig,\n}: BookmarkNodeProps<T, S, A>) {\n  const radius = 5;\n  const strokeWidth = 2;\n  const textSize = 15;\n\n  const cursorStyle = {\n    cursor: 'pointer',\n  } as React.CSSProperties;\n\n  let glyph = (\n    <circle\n      className={treeColor(current)}\n      r={radius}\n      strokeWidth={strokeWidth}\n      style={cursorStyle}\n    />\n  );\n\n  const dropDownAdded = false;\n  const { eventType } = node.metadata;\n\n  if (eventConfig) {\n    const { currentGlyph, backboneGlyph } = eventConfig[eventType];\n\n    if (current) {\n      glyph = (\n        <g fontWeight=\"none\" style={cursorStyle}>\n          {currentGlyph}\n        </g>\n      );\n    } else {\n      glyph = (\n        <g fontWeight=\"none\" style={cursorStyle}>\n          {backboneGlyph}\n        </g>\n      );\n    }\n  }\n\n  let label: string = '';\n  let annotate: string = '';\n\n  if (\n    node.artifacts &&\n    node.artifacts.annotations.length > 0 &&\n    node.artifacts.annotations[0].annotation.length > 0\n  ) {\n    annotate = node.artifacts.annotations[0].annotation;\n  }\n\n  label = node.label;\n\n  if (annotate.length > 20) annotate = `${annotate.substr(0, 20)}..`;\n\n  if (label.length > 20) label = `${label.substr(0, 20)}..`;\n\n  return (\n    <Animate\n      enter={{\n        opacity: [1],\n      }}\n      start={{ opacity: 0 }}\n    >\n      {() => (\n        <>\n          <g style={{ opacity: 1 }}>\n            {glyph}\n\n            <text\n              dominantBaseline=\"middle\"\n              fontSize={textSize}\n              fontWeight=\"bold\"\n              textAnchor=\"start\"\n              x={20}\n              y={0}\n            >\n              {label}\n            </text>\n\n            <text\n              dominantBaseline=\"middle\"\n              fontSize={textSize}\n              fontWeight=\"regular\"\n              textAnchor=\"start\"\n              x={dropDownAdded ? 10 : 0}\n              y={20}\n            >\n              {annotate}\n            </text>\n          </g>\n        </>\n      )}\n    </Animate>\n  );\n}\n\nexport default BookmarkNode;\n","import { NodeID, ProvenanceGraph } from '@visdesignlab/trrack';\nimport React from 'react';\nimport { NodeGroup } from 'react-move';\n\nimport { EventConfig } from '../Utils/EventConfig';\nimport translate from '../Utils/translate';\n\nimport BookmarkNode from './BookmarkNode';\nimport BookmarkTransitions from './BookmarkTransitions';\n\nexport type BookmarkListViewConfig<T, S extends string, A> = {\n  graph?: ProvenanceGraph<T, S, A>;\n  eventConfig?: EventConfig<S>;\n  currentNode: NodeID;\n};\n\nfunction BookmarkListView<T, S extends string, A>({\n  graph,\n  eventConfig,\n  currentNode,\n}: BookmarkListViewConfig<T, S, A>) {\n  if (graph === undefined) {\n    return null;\n  }\n\n  const gutter = 15;\n  const verticalSpace = 50;\n\n  const bookmarks = [];\n\n  const xOffset = gutter;\n  const yOffset = verticalSpace;\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const j in graph.nodes) {\n    if (graph.nodes[j].bookmarked) {\n      bookmarks.push(graph.nodes[j]);\n    }\n  }\n\n  return (\n    <NodeGroup\n      data={bookmarks}\n      keyAccessor={(d) => d.label}\n      {...BookmarkTransitions(xOffset, yOffset, bookmarks)}\n    >\n      {(innerBookmarks) => (\n        <>\n          {innerBookmarks.map((bookmark) => {\n            const { data: d, key, state } = bookmark;\n\n            return (\n              <g key={key} transform={translate(state.x, state.y)}>\n                <BookmarkNode\n                  current={currentNode === d.id}\n                  editAnnotations={false}\n                  eventConfig={eventConfig}\n                  node={d}\n                  nodeMap={innerBookmarks}\n                />\n              </g>\n            );\n          })}\n        </>\n      )}\n    </NodeGroup>\n  );\n}\n\nexport default BookmarkListView;\n","/* eslint-disable no-param-reassign */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable no-plusplus */\nexport default function BookmarkTransitions(xOffset: number, yOffset: number, nodeList: any[]) {\n  xOffset = -xOffset;\n\n  const start = (data: any) => {\n    const index = nodeList.findIndex((d) => d.id === data.id);\n\n    const x = 0;\n    const y = 40 * index;\n\n    return { x, y: y - yOffset, opacity: 0 };\n  };\n\n  const enter = (data: any) => {\n    const index = nodeList.findIndex((d) => d.id === data.id);\n\n    const x = 0;\n    const y = 40 * index;\n\n    return {\n      x: [x],\n      y: [y],\n      opactiy: 1,\n    };\n  };\n\n  const update = (data: any) => {\n    const index = nodeList.findIndex((d) => d.id === data.id);\n\n    const x = 0;\n    const y = 40 * index;\n\n    return {\n      x: [x],\n      y: [y],\n      opactiy: 1,\n    };\n  };\n\n  return {\n    enter,\n    leave: start,\n    update,\n    start,\n  };\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable no-param-reassign */\n/* eslint-disable @typescript-eslint/no-inferrable-types */\nexport default function linkTransitions(\n  xOffset: number,\n  yOffset: number,\n  clusterOffset: number,\n  backboneOffset: number,\n  duration: number = 500,\n  annotationOpen: number,\n  annotationHeight: number,\n) {\n  xOffset = -xOffset;\n  backboneOffset = -backboneOffset;\n  const start = () => ({\n    x1: 0,\n    x2: 0,\n    y1: 0,\n    y2: 0,\n    opacity: 0,\n  });\n\n  const enter = (data: any) => {\n    let clusteredNodesInFront = 0;\n\n    // eslint-disable-next-line max-len\n    clusteredNodesInFront =\n      clusteredNodesInFront === 0 ? clusteredNodesInFront : clusteredNodesInFront - 1;\n\n    const { source, target } = data;\n    const x1 = getX(source.width, xOffset, backboneOffset);\n    const x2 = getX(target.width, xOffset, backboneOffset);\n\n    let y1 = yOffset * source.depth - (yOffset - clusterOffset) * clusteredNodesInFront;\n    let y2 = yOffset * target.depth - (yOffset - clusterOffset) * clusteredNodesInFront;\n\n    if (annotationOpen !== -1 && source.depth > annotationOpen && source.width === 0) {\n      y1 += annotationHeight;\n    }\n\n    if (annotationOpen !== -1 && target.depth > annotationOpen && target.width === 0) {\n      y2 += annotationHeight;\n    }\n\n    return {\n      x1,\n      x2,\n      y1,\n      y2,\n      opacity: 1,\n      timing: { duration },\n    };\n  };\n\n  const update = (data: any) => {\n    let clusteredNodesInFront = 0;\n\n    // eslint-disable-next-line max-len\n    clusteredNodesInFront =\n      clusteredNodesInFront === 0 ? clusteredNodesInFront : clusteredNodesInFront - 1;\n\n    const { source, target } = data;\n    const x1 = getX(source.width, xOffset, backboneOffset);\n    const x2 = getX(target.width, xOffset, backboneOffset);\n\n    let y1 = yOffset * source.depth - (yOffset - clusterOffset) * clusteredNodesInFront;\n    let y2 = yOffset * target.depth - (yOffset - clusterOffset) * clusteredNodesInFront;\n\n    if (annotationOpen !== -1 && source.depth > annotationOpen && source.width === 0) {\n      y1 += annotationHeight;\n    }\n\n    if (annotationOpen !== -1 && target.depth > annotationOpen && target.width === 0) {\n      y2 += annotationHeight;\n    }\n\n    return {\n      x1: [x1],\n      y1: [y1],\n      x2: [x2],\n      y2: [y2],\n      opacity: 1,\n      timing: { duration },\n    };\n  };\n\n  return {\n    enter,\n    leave: start,\n    update,\n    start,\n  };\n}\n\nexport function getX(width: number, xOffset: number, backboneOffset: number) {\n  return width > 1\n    ? (xOffset + backboneOffset) * width - backboneOffset\n    : (xOffset + backboneOffset) * width;\n}\n","/* eslint-disable no-param-reassign */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/no-inferrable-types */\n/* eslint-disable no-plusplus */\nimport { BundleMap } from '../Utils/BundleMap';\n\nimport { getX } from './LinkTransitions';\n\nexport default function bundleTransitions(\n  xOffset: number,\n  yOffset: number,\n  clusterOffset: number,\n  backboneOffset: number,\n  duration: number = 500,\n  expandedClusterList: string[],\n  stratifiedMap: any,\n  nodeList: any[],\n  annotationOpen: number,\n  annotationHeight: number,\n  bundleMap?: BundleMap,\n) {\n  xOffset = -xOffset;\n  backboneOffset = -backboneOffset;\n  const start = () => ({ x: 0, y: 0, opacity: 0 });\n\n  const enter = (data: any) => {\n    const validity = true;\n\n    const x = getX(stratifiedMap[data].width, xOffset, backboneOffset);\n\n    // let backboneBundleNodes = findBackboneBundleNodes(stratifiedMap, bundleMap)\n\n    let highestDepth = stratifiedMap[data].depth;\n    let lowestDepth = stratifiedMap[data].depth;\n\n    if (bundleMap && expandedClusterList.includes(data)) {\n      for (let i = 0; i < bundleMap[data].bunchedNodes.length; i++) {\n        // if(stratifiedMap[bundleMap[data].bunchedNodes[i]].width != 0)\n        // {\n        //   validity = false;\n        // }\n        if (\n          stratifiedMap[bundleMap[data].bunchedNodes[i]] &&\n          stratifiedMap[bundleMap[data].bunchedNodes[i]].depth < highestDepth\n        ) {\n          highestDepth = stratifiedMap[bundleMap[data].bunchedNodes[i]].depth;\n        }\n\n        if (\n          stratifiedMap[bundleMap[data].bunchedNodes[i]] &&\n          stratifiedMap[bundleMap[data].bunchedNodes[i]].depth > lowestDepth\n        ) {\n          lowestDepth = stratifiedMap[bundleMap[data].bunchedNodes[i]].depth;\n        }\n      }\n    }\n\n    let y = yOffset * highestDepth;\n\n    if (annotationOpen !== -1 && highestDepth > annotationOpen) {\n      y += annotationHeight;\n    }\n\n    let height = 0;\n\n    // eslint-disable-next-line no-restricted-syntax\n    for (const j in bundleMap![data].bunchedNodes) {\n      if (stratifiedMap[bundleMap![data].bunchedNodes[j]]) {\n        height++;\n      }\n    }\n\n    height *= clusterOffset;\n\n    if (!expandedClusterList.includes(data)) {\n      height = 10;\n    }\n\n    if (annotationOpen !== -1 && annotationOpen >= highestDepth && annotationOpen <= lowestDepth) {\n      height += annotationHeight;\n    }\n\n    return {\n      x: [x],\n      y: [y],\n      opacity: [!expandedClusterList.includes(data) ? 0 : 1],\n      timing: { duration },\n      validity,\n      height,\n    };\n  };\n\n  const update = (data: any) => {\n    const validity = true;\n\n    const x = getX(stratifiedMap[data].width, xOffset, backboneOffset);\n\n    // let backboneBundleNodes = findBackboneBundleNodes(stratifiedMap, bundleMap)\n\n    let highestDepth = stratifiedMap[data].depth;\n    let lowestDepth = stratifiedMap[data].depth;\n\n    if (bundleMap && expandedClusterList.includes(data)) {\n      for (let i = 0; i < bundleMap[data].bunchedNodes.length; i++) {\n        // if(stratifiedMap[bundleMap[data].bunchedNodes[i]].width != 0)\n        // {\n        //   validity = false;\n        // }\n        if (\n          stratifiedMap[bundleMap[data].bunchedNodes[i]] &&\n          stratifiedMap[bundleMap[data].bunchedNodes[i]].depth < highestDepth\n        ) {\n          highestDepth = stratifiedMap[bundleMap[data].bunchedNodes[i]].depth;\n        }\n\n        if (\n          stratifiedMap[bundleMap[data].bunchedNodes[i]] &&\n          stratifiedMap[bundleMap[data].bunchedNodes[i]].depth > lowestDepth\n        ) {\n          lowestDepth = stratifiedMap[bundleMap[data].bunchedNodes[i]].depth;\n        }\n      }\n    }\n\n    let y = yOffset * highestDepth;\n\n    if (annotationOpen !== -1 && highestDepth > annotationOpen) {\n      y += annotationHeight;\n    }\n\n    let height = 0;\n\n    // eslint-disable-next-line no-restricted-syntax\n    for (const j in bundleMap![data].bunchedNodes) {\n      if (stratifiedMap[bundleMap![data].bunchedNodes[j]]) {\n        height++;\n      }\n    }\n\n    height *= clusterOffset;\n\n    if (!expandedClusterList.includes(data)) {\n      height = 10;\n    }\n\n    if (annotationOpen !== -1 && annotationOpen >= highestDepth && annotationOpen <= lowestDepth) {\n      height += annotationHeight;\n    }\n\n    return {\n      x: [x],\n      y: [y],\n      opacity: [!expandedClusterList.includes(data) ? 0 : 1],\n      timing: { duration },\n      validity,\n      height: [height],\n    };\n  };\n\n  return {\n    enter,\n    leave: start,\n    update,\n    start,\n  };\n}\n","/* eslint-disable @typescript-eslint/ban-types */\nimport React, { FC } from 'react';\n\ntype LinkProps = {} & React.SVGProps<SVGLineElement>;\n\nconst Link: FC<LinkProps> = (props: LinkProps) => <line {...props} />;\n\nexport default Link;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable no-param-reassign */\nimport { getX } from './LinkTransitions';\n\nexport default function nodeTransitions(\n  xOffset: number,\n  yOffset: number,\n  clusterOffset: number,\n  backboneOffset: number,\n  // eslint-disable-next-line @typescript-eslint/no-inferrable-types\n  duration: number = 500,\n  annotationOpen: number,\n  annotationHeight: number,\n) {\n  xOffset = -xOffset;\n  backboneOffset = -backboneOffset;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const start = (data: any) => {\n    let clusteredNodesInFront = 0;\n\n    const x = getX(data.width, xOffset, backboneOffset);\n    // eslint-disable-next-line max-len\n    clusteredNodesInFront =\n      clusteredNodesInFront === 0 ? clusteredNodesInFront : clusteredNodesInFront - 1;\n\n    let y = yOffset * data.depth - (yOffset - clusterOffset) * clusteredNodesInFront;\n\n    if (annotationOpen !== -1 && data.depth > annotationOpen && data.width === 0) {\n      y += annotationHeight;\n    }\n\n    return { x, y: y - yOffset, opacity: 0 };\n  };\n\n  const enter = (data: any) => {\n    let clusteredNodesInFront = 0;\n\n    const x = getX(data.width, xOffset, backboneOffset);\n\n    // eslint-disable-next-line max-len\n    clusteredNodesInFront =\n      clusteredNodesInFront === 0 ? clusteredNodesInFront : clusteredNodesInFront - 1;\n\n    let y = yOffset * data.depth - (yOffset - clusterOffset) * clusteredNodesInFront;\n\n    if (annotationOpen !== -1 && data.depth > annotationOpen && data.width === 0) {\n      y += annotationHeight;\n    }\n\n    return {\n      x: [x],\n      y: [y],\n      opactiy: 1,\n      timing: { duration },\n    };\n  };\n\n  const update = (data: any) => {\n    let clusteredNodesInFront = 0;\n\n    const x = getX(data.width, xOffset, backboneOffset);\n\n    // eslint-disable-next-line max-len\n    clusteredNodesInFront =\n      clusteredNodesInFront === 0 ? clusteredNodesInFront : clusteredNodesInFront - 1;\n\n    let y = yOffset * data.depth - (yOffset - clusterOffset) * clusteredNodesInFront;\n\n    if (annotationOpen !== -1 && data.depth > annotationOpen && data.width === 0) {\n      y += annotationHeight;\n    }\n\n    return {\n      x: [x],\n      y: [y],\n      opactiy: 1,\n      timing: { duration },\n    };\n  };\n\n  return {\n    enter,\n    leave: start,\n    update,\n    start,\n  };\n}\n","import { ProvenanceGraph } from '@visdesignlab/trrack';\nimport React from 'react';\nimport { Button } from 'semantic-ui-react';\nimport { style } from 'typestyle';\n\nexport type UndoRedoConfig<T, S extends string, A> = {\n  undoCallback: () => void;\n  redoCallback: () => void;\n  graph?: ProvenanceGraph<T, S, A>;\n};\n\nconst undoButtonStyle = style({\n  marginTop: '2px',\n  borderRadius: '2px',\n  display: 'inline-block',\n  cursor: 'pointer',\n  fontFamily: 'Lato,Helvetica Neue,Arial,Helvetica,sans-serif',\n  fontSize: '14px',\n  marginRight: '1px',\n  $nest: {\n    '&:hover': {\n      backgroundColor: '#6c7c7c',\n    },\n    '&:active': {\n      backgroundColor: '#6c7c7c',\n    },\n  },\n});\n\nconst redoButtonStyle = style({\n  marginTop: '2px',\n  borderRadius: '2px',\n  display: 'inline-block',\n  cursor: 'pointer',\n  fontFamily: 'Lato,Helvetica Neue,Arial,Helvetica,sans-serif',\n  fontSize: '14px',\n\n  $nest: {\n    '&:hover': {\n      backgroundColor: '#6c7c7c',\n    },\n\n    '&:active': {\n      backgroundColor: '#6c7c7c',\n    },\n  },\n});\n\nfunction UndoRedoButton<T, S extends string, A>({\n  graph,\n  undoCallback,\n  redoCallback,\n}: UndoRedoConfig<T, S, A>) {\n  if (graph === undefined) {\n    return null;\n  }\n\n  const isAtRoot = graph.root === graph.current;\n  const isAtLatest = graph.nodes[graph.current].children.length === 0;\n\n  const margin = {\n    marginRight: '3px',\n  } as React.CSSProperties;\n\n  return (\n    <div>\n      <Button\n        className={undoButtonStyle}\n        disabled={isAtRoot}\n        variant=\"outlined\"\n        onClick={undoCallback}\n      >\n        <i className=\"fas fa-undo marginRight\" style={margin} />\n        Undo\n      </Button>\n\n      <Button\n        className={redoButtonStyle}\n        disabled={isAtLatest}\n        variant=\"outlined\"\n        onClick={redoCallback}\n      >\n        <i className=\"fas fa-redo marginRight\" style={margin} />\n        Redo\n      </Button>\n    </div>\n  );\n}\n\nexport default UndoRedoButton;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable no-param-reassign */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable no-plusplus */\n/* eslint-disable no-nested-ternary */\n/* eslint-disable no-restricted-syntax */\n/* eslint-disable guard-for-in */\n/* eslint-disable no-unused-vars */\nimport {\n  DiffNode,\n  isChildNode,\n  NodeID,\n  Nodes,\n  Provenance,\n  ProvenanceNode,\n  StateNode,\n} from '@visdesignlab/trrack';\nimport * as d3 from 'd3';\nimport { observer } from 'mobx-react';\nimport React, { ReactChild, useEffect, useState } from 'react';\nimport { NodeGroup } from 'react-move';\nimport { Popup, Tab } from 'semantic-ui-react';\nimport { style } from 'typestyle';\n\nimport { BundleMap, OriginMap } from '../Utils/BundleMap';\nimport { EventConfig } from '../Utils/EventConfig';\nimport findBundleParent from '../Utils/findBundleParent';\nimport translate from '../Utils/translate';\nimport { treeLayout } from '../Utils/TreeLayout';\n\nimport BackboneNode from './BackboneNode';\nimport BookmarkListView from './BookmarkListView';\nimport bundleTransitions from './BundleTransitions';\nimport Link from './Link';\nimport linkTransitions from './LinkTransitions';\nimport nodeTransitions from './NodeTransitions';\nimport { treeColor } from './Styles';\nimport UndoRedoButton from './UndoRedoButton';\n\nconst container = style({\n  alignItems: 'center',\n  justifyContent: 'center',\n  overflow: 'auto',\n});\n\ntype ProvVisProps<T, S extends string, A> = {\n  root: NodeID;\n  sideOffset?: number;\n  iconOnly?: boolean;\n  current: NodeID;\n  nodeMap: Nodes<T, S, A>;\n  approvedFunction: (id: NodeID) => void;\n  rejectedFunction: (id: NodeID) => void;\n  addToWorkflow: (id: NodeID) => void;\n  nodeCreationMap: OriginMap;\n  currentDataset: string;\n  backboneGutter?: number;\n  gutter?: number;\n  verticalSpace?: number;\n  annotationHeight?: number;\n  clusterVerticalSpace?: number;\n  regularCircleRadius?: number;\n  backboneCircleRadius?: number;\n  regularCircleStroke?: number;\n  backboneCircleStroke?: number;\n  topOffset?: number;\n  textSize?: number;\n  height?: number;\n  width?: number;\n  linkWidth?: number;\n  duration?: number;\n  clusterLabels?: boolean;\n  bundleMap?: BundleMap;\n  eventConfig?: EventConfig<S>;\n  changeCurrent?: (id: NodeID) => void;\n  brushCallback?: (selected: string[]) => void;\n  popupContent?: (nodeId: StateNode<T, S, A>) => ReactChild;\n  annotationContent?: (nodeId: StateNode<T, S, A>) => ReactChild;\n\n  undoRedoButtons?: boolean;\n  bookmarkToggle?: boolean;\n  bookmarkListView?: boolean;\n  editAnnotations?: boolean;\n  prov?: Provenance<T, S, A>;\n  ephemeralUndo?: boolean;\n};\n\nexport type StratifiedMap<T, S, A> = {\n  [key: string]: d3.HierarchyNode<ProvenanceNode<T, S, A>>;\n};\n\nexport type StratifiedList<T, S, A> = d3.HierarchyNode<ProvenanceNode<T, S, A>>[];\n\nfunction ProvVis<T, S extends string, A>({\n  nodeMap,\n  root,\n  current,\n  changeCurrent,\n  width = 400,\n  height = 800,\n  iconOnly = false,\n  gutter = 15,\n  backboneGutter = 20,\n  verticalSpace = 50,\n  annotationHeight = 100,\n  clusterVerticalSpace = 50,\n  regularCircleRadius = 4,\n  backboneCircleRadius = 5,\n  regularCircleStroke = 3,\n  backboneCircleStroke = 3,\n  sideOffset = 200,\n  topOffset = 30,\n  textSize = 15,\n  linkWidth = 4,\n  duration = 600,\n  clusterLabels = true,\n  bundleMap = {},\n  eventConfig,\n  brushCallback,\n  popupContent,\n  annotationContent,\n  approvedFunction,\n  rejectedFunction,\n  addToWorkflow,\n  currentDataset,\n  nodeCreationMap,\n  editAnnotations = false,\n  prov,\n  ephemeralUndo = false,\n}: ProvVisProps<T, S, A>) {\n  const [first, setFirst] = useState(true);\n  const [bookmark, setBookmark] = useState<any>(null);\n  const [annotationOpen, setAnnotationOpen] = useState(-1);\n\n  let list: string[] = [];\n  const eventTypes = new Set<string>();\n\n  for (const j in nodeMap) {\n    const child = nodeMap[j];\n\n    if (isChildNode(child)) {\n      if (child.metadata.eventType) {\n        eventTypes.add(child.metadata.eventType);\n      }\n\n      if (\n        child.actionType === 'Ephemeral' &&\n        child.children.length === 1 &&\n        (nodeMap[child.parent].actionType !== 'Ephemeral' ||\n          nodeMap[child.parent].children.length > 1)\n      ) {\n        const group: string[] = [];\n        let curr = child;\n\n        while (curr.actionType === 'Ephemeral') {\n          group.push(curr.id);\n\n          if (curr.children.length === 1 && nodeMap[curr.children[0]].actionType === 'Ephemeral') {\n            curr = nodeMap[curr.children[0]] as DiffNode<T, S, A>;\n          } else {\n            break;\n          }\n        }\n\n        bundleMap[child.id] = {\n          metadata: '',\n          bundleLabel: '',\n          bunchedNodes: group,\n        };\n      }\n    }\n  }\n\n  if (bundleMap) {\n    list = list.concat(Object.keys(bundleMap));\n  }\n\n  function setDefaultConfig<E extends string>(types: Set<string>): EventConfig<E> {\n    const symbols = [\n      d3.symbol().type(d3.symbolStar).size(50),\n      d3.symbol().type(d3.symbolDiamond),\n      d3.symbol().type(d3.symbolTriangle),\n      d3.symbol().type(d3.symbolCircle),\n      d3.symbol().type(d3.symbolCross),\n      d3.symbol().type(d3.symbolSquare),\n      d3.symbol().type(d3.symbolWye),\n    ];\n\n    // Find nodes in the clusters whose entire cluster is on the backbone.\n    const conf: EventConfig<E> = {};\n    let counter = 0;\n\n    for (const j of types) {\n      conf[j] = {};\n      conf[j].backboneGlyph = (\n        <path className={treeColor(false)} d={symbols[counter]()!} strokeWidth={2} />\n      );\n\n      conf[j].bundleGlyph = (\n        <path className={treeColor(false)} d={symbols[counter]()!} strokeWidth={2} />\n      );\n\n      conf[j].currentGlyph = (\n        <path className={treeColor(true)} d={symbols[counter]()!} strokeWidth={2} />\n      );\n\n      conf[j].regularGlyph = (\n        <path className={treeColor(false)} d={symbols[counter]()!} strokeWidth={2} />\n      );\n\n      counter += 1;\n    }\n\n    return conf;\n  }\n\n  const [expandedClusterList, setExpandedClusterList] = useState<string[]>(Object.keys(bundleMap));\n\n  if (!eventConfig && eventTypes.size > 0 && eventTypes.size < 8) {\n    eventConfig = setDefaultConfig<S>(eventTypes);\n  }\n\n  useEffect(() => {\n    setFirst(false);\n  }, []);\n\n  const nodeList = Object.values(nodeMap).filter(() => true);\n\n  const copyList = Array.from(nodeList);\n\n  const keys = bundleMap ? Object.keys(bundleMap) : [];\n\n  // Find a list of all nodes included in a bundle.\n  let bundledNodes: string[] = [];\n\n  if (bundleMap) {\n    for (const key of keys) {\n      bundledNodes = bundledNodes.concat(bundleMap[key].bunchedNodes);\n      bundledNodes.push(key);\n    }\n  }\n\n  const strat = d3\n    .stratify<ProvenanceNode<T, S, A>>()\n    .id((d) => d.id)\n    .parentId((d) => {\n      if (d.id === root) return null;\n\n      if (isChildNode(d)) {\n        // If you are a unexpanded bundle, find your parent by going straight up.\n        if (\n          bundleMap &&\n          Object.keys(bundleMap).includes(d.id) &&\n          !expandedClusterList.includes(d.id)\n        ) {\n          let curr = d;\n\n          // eslint-disable-next-line no-constant-condition\n          while (true) {\n            const localCurr = curr;\n\n            if (\n              !bundledNodes.includes(localCurr.parent) ||\n              Object.keys(bundleMap).includes(localCurr.parent)\n            ) {\n              return localCurr.parent;\n            }\n\n            const temp = copyList.filter((c) => c.id === localCurr.parent)[0];\n\n            if (isChildNode(temp)) {\n              curr = temp;\n            }\n          }\n        }\n\n        const bundleParents = findBundleParent(d.parent, bundleMap);\n        let collapsedParent;\n\n        let allExpanded = true;\n\n        for (const j in bundleParents) {\n          if (!expandedClusterList.includes(bundleParents[j])) {\n            allExpanded = false;\n            collapsedParent = bundleParents[j];\n            break;\n          }\n        }\n\n        if (\n          bundledNodes.includes(d.parent) &&\n          bundleMap &&\n          !Object.keys(bundleMap).includes(d.parent) &&\n          !allExpanded\n        ) {\n          return collapsedParent;\n        }\n\n        return d.parent;\n      }\n\n      return null;\n    });\n\n  for (let i = 0; i < nodeList.length; i++) {\n    const bundleParents = findBundleParent(nodeList[i].id, bundleMap);\n\n    let allExpanded = true;\n\n    for (const j in bundleParents) {\n      if (!expandedClusterList.includes(bundleParents[j])) {\n        allExpanded = false;\n        break;\n      }\n    }\n\n    if (\n      bundledNodes.includes(nodeList[i].id) &&\n      !allExpanded &&\n      bundleMap &&\n      !Object.keys(bundleMap).includes(nodeList[i].id)\n    ) {\n      nodeList.splice(i, 1);\n      i--;\n    }\n  }\n\n  const stratifiedTree = strat(nodeList);\n\n  // //console.log(JSON.parse(JSON.stringify(stratifiedTree)));\n\n  const stratifiedList: StratifiedList<T, S, A> = stratifiedTree.descendants();\n  const stratifiedMap: StratifiedMap<T, S, A> = {};\n\n  stratifiedList.forEach((c) => {\n    stratifiedMap[c.id!] = c;\n  });\n  treeLayout(stratifiedMap, current, root);\n\n  let maxHeight = 0;\n  let maxWidth = 0;\n\n  for (const j in stratifiedList) {\n    if (stratifiedList[j].depth > maxHeight) {\n      maxHeight = stratifiedList[j].depth;\n    }\n\n    if ((stratifiedList[j] as any).width > maxWidth) {\n      maxWidth = (stratifiedList[j] as any).width;\n    }\n  }\n\n  const links = stratifiedTree.links();\n\n  const xOffset = gutter;\n  const yOffset = verticalSpace;\n\n  function regularGlyph(node: ProvenanceNode<T, S, A>) {\n    if (eventConfig) {\n      const { eventType } = node.metadata;\n\n      if (\n        eventType &&\n        eventType in eventConfig &&\n        eventType !== 'Root' &&\n        eventConfig[eventType].regularGlyph\n      ) {\n        return eventConfig[eventType].regularGlyph;\n      }\n    }\n\n    return (\n      <circle\n        className={treeColor(false)}\n        r={regularCircleRadius}\n        strokeWidth={regularCircleStroke}\n      />\n    );\n  }\n\n  function getY(height: number) {\n    const y = yOffset * height + 25;\n\n    return y;\n  }\n\n  function bundleGlyph(node: ProvenanceNode<T, S, A>) {\n    if (eventConfig) {\n      const { eventType } = node.metadata;\n\n      if (eventType && eventType in eventConfig && eventType !== 'Root') {\n        return eventConfig[eventType].bundleGlyph;\n      }\n    }\n\n    return (\n      <circle\n        className={treeColor(false)}\n        r={regularCircleRadius}\n        strokeWidth={regularCircleStroke}\n      />\n    );\n  }\n\n  let shiftLeft = 0;\n\n  if (maxWidth === 0) {\n    shiftLeft = 30;\n  } else if (maxWidth === 1) {\n    shiftLeft = 52;\n  } else if (maxWidth > 1) {\n    shiftLeft = 74;\n  }\n\n  const svgWidth = width;\n\n  const overflowStyle = {\n    overflowX: 'auto',\n    overflowY: 'auto',\n  } as React.CSSProperties;\n\n  const tabsStyle = {\n    backgroundColor: 'lightgrey',\n    width: '270px',\n  } as React.CSSProperties;\n\n  const bookmarkTabView = (\n    <svg\n      height={maxHeight < height ? height : maxHeight}\n      id=\"bookmarkView\"\n      style={{ overflow: 'visible' }}\n      width={svgWidth}\n    >\n      <g id=\"globalG\" transform={translate(shiftLeft, topOffset)}>\n        <BookmarkListView\n          currentNode={current}\n          eventConfig={eventConfig}\n          graph={prov ? prov.graph : undefined}\n        />\n      </g>\n    </svg>\n  );\n\n  const graphTabView = (\n    <div>\n      <div id=\"undoRedoDiv\">\n        <UndoRedoButton\n          graph={prov ? prov.graph : undefined}\n          redoCallback={() => {\n            if (prov) {\n              if (ephemeralUndo) {\n                prov.goForwardToNonEphemeral();\n              } else {\n                prov.goForwardOneStep();\n              }\n            }\n          }}\n          undoCallback={() => {\n            if (prov) {\n              if (ephemeralUndo) {\n                prov.goBackToNonEphemeral();\n              } else {\n                prov.goBackOneStep();\n              }\n            }\n          }}\n        />\n      </div>\n\n      <svg\n        height={maxHeight < height ? height : maxHeight}\n        id=\"topSvg\"\n        style={{ overflow: 'visible' }}\n        width={svgWidth}\n      >\n        <rect fill=\"none\" height={height} stroke=\"none\" width={width} />\n        <g id=\"globalG\" transform={translate(shiftLeft, topOffset)}>\n          <NodeGroup\n            data={links}\n            keyAccessor={(link) => `${link.source.id}${link.target.id}`}\n            {...linkTransitions(\n              xOffset,\n              yOffset,\n              clusterVerticalSpace,\n              backboneGutter - gutter,\n              duration,\n              annotationOpen,\n              annotationHeight,\n            )}\n          >\n            {(linkArr) => (\n              <>\n                {linkArr.map((link) => {\n                  const { key, state } = link;\n\n                  return (\n                    <g key={key}>\n                      <Link {...state} fill=\"#ccc\" stroke=\"#ccc\" strokeWidth={linkWidth} />\n                    </g>\n                  );\n                })}\n              </>\n            )}\n          </NodeGroup>\n          <NodeGroup\n            data={stratifiedList}\n            keyAccessor={(d) => d.id}\n            {...nodeTransitions(\n              xOffset,\n              yOffset,\n              clusterVerticalSpace,\n              backboneGutter - gutter,\n              duration,\n              annotationOpen,\n              annotationHeight,\n            )}\n          >\n            {(nodes) => (\n              <>\n                {nodes.map((node) => {\n                  const { data: d, key, state } = node;\n                  const popupTrigger = (\n                    <g\n                      key={key}\n                      transform={\n                        d.width === 0 ? translate(state.x, state.y) : translate(state.x, state.y)\n                      }\n                      onClick={() => {\n                        if (changeCurrent) {\n                          changeCurrent(d.id);\n                        }\n                      }}\n                      onMouseOut={() => {\n                        setBookmark(null);\n                      }}\n                      onMouseOver={() => {\n                        setBookmark(d.id);\n                      }}\n                    >\n                      {d.width === 0 && prov ? (\n                        <g>\n                          <rect\n                            height=\"25\"\n                            opacity=\"0\"\n                            transform=\"translate(0, -12.5)\"\n                            width=\"200\"\n                          />\n                          ,\n                          <BackboneNode\n                            addToWorkflow={addToWorkflow}\n                            annotationContent={annotationContent}\n                            annotationOpen={annotationOpen}\n                            approvedFunction={approvedFunction}\n                            bookmark={bookmark}\n                            bundleMap={bundleMap}\n                            clusterLabels={clusterLabels}\n                            current={current === d.id}\n                            currentDataset={currentDataset}\n                            duration={duration}\n                            editAnnotations={editAnnotations}\n                            eventConfig={eventConfig}\n                            exemptList={expandedClusterList}\n                            expandedClusterList={expandedClusterList}\n                            first={first}\n                            iconOnly={iconOnly}\n                            node={d.data}\n                            nodeCreationMap={nodeCreationMap}\n                            nodeMap={stratifiedMap}\n                            popupContent={popupContent}\n                            prov={prov}\n                            radius={backboneCircleRadius}\n                            rejectedFunction={rejectedFunction}\n                            setAnnotationOpen={setAnnotationOpen}\n                            setBookmark={setBookmark}\n                            setExemptList={setExpandedClusterList}\n                            strokeWidth={backboneCircleStroke}\n                            textSize={textSize}\n                          />\n                        </g>\n                      ) : popupContent !== undefined ? (\n                        <Popup\n                          content={popupContent(d.data)}\n                          trigger={\n                            <g\n                              onClick={() => {\n                                setAnnotationOpen(-1);\n                              }}\n                            >\n                              {keys.includes(d.id) ? bundleGlyph(d.data) : regularGlyph(d.data)}\n                            </g>\n                          }\n                        />\n                      ) : (\n                        <g\n                          onClick={() => {\n                            setAnnotationOpen(-1);\n                          }}\n                        >\n                          {regularGlyph(d.data)}\n                        </g>\n                      )}\n                    </g>\n                  );\n\n                  return popupTrigger;\n                })}\n              </>\n            )}\n          </NodeGroup>\n          <NodeGroup\n            data={keys}\n            keyAccessor={(key) => `${key}`}\n            {...bundleTransitions(\n              xOffset,\n              verticalSpace,\n              clusterVerticalSpace,\n              backboneGutter - gutter,\n              duration,\n              expandedClusterList,\n              stratifiedMap,\n              stratifiedList,\n              annotationOpen,\n              annotationHeight,\n              bundleMap,\n            )}\n          >\n            {(bundle) => (\n              <>\n                {bundle.map((b) => {\n                  const { key, state } = b;\n\n                  if (\n                    bundleMap === undefined ||\n                    (stratifiedMap[b.key] as any).width !== 0 ||\n                    state.validity === false\n                  ) {\n                    return null;\n                  }\n\n                  return (\n                    <g\n                      key={key}\n                      transform={translate(\n                        state.x - gutter + 5,\n                        state.y - clusterVerticalSpace / 2,\n                      )}\n                    >\n                      <rect\n                        fill=\"none\"\n                        height={state.height}\n                        rx=\"10\"\n                        ry=\"10\"\n                        stroke=\"rgb(248, 191, 132)\"\n                        strokeWidth=\"2px\"\n                        style={{ opacity: state.opacity }}\n                        width={iconOnly ? 42 : sideOffset - 15}\n                      />\n                    </g>\n                  );\n                })}\n              </>\n            )}\n          </NodeGroup>\n        </g>\n      </svg>\n    </div>\n  );\n\n  const panes = [\n    {\n      menuItem: { key: 'Graph', icon: 'share alternate', content: 'Graph' },\n      render: () => <Tab.Pane attached={false}>{graphTabView}</Tab.Pane>,\n    },\n    {\n      menuItem: {\n        key: 'Bookmarks/Annotations',\n        icon: 'bookmark',\n        content: 'Bookmarks/Annotations',\n      },\n      render: () => <Tab.Pane attached={false}>{bookmarkTabView}</Tab.Pane>,\n    },\n  ];\n\n  // const brushedNodes: string[] = [];\n\n  // const brush = d3\n  //   .brushY()\n  //   .extent([\n  //     [15, 0],\n  //     [50, 800],\n  //   ])\n  //   .on('end', (e) => {\n  //     brushedNodes = [];\n\n  //     if (!e.selection) {\n  //       return;\n  //     }\n\n  //     for (const j of stratifiedList) {\n  //       const y = getY(j.depth);\n\n  //       if (j.id && y > e.selection[0] && y < e.selection[1]) {\n  //         brushedNodes.push(j.id);\n  //       }\n  //     }\n\n  //     if (brushCallback) {\n  //       brushCallback(brushedNodes);\n  //     }\n  //   });\n\n  // d3.select<any, any>('#topSvg').call(brush);\n\n  return (\n    <div className={container} id=\"prov-vis\" style={overflowStyle}>\n      <Tab menu={{ secondary: true, pointing: true }} panes={panes} />\n    </div>\n  );\n}\n\nexport default observer(ProvVis);\n","import React from 'react';\n\nimport translate from '../Utils/Translate';\n\n// import { symbol, symbols } from 'd3';\n\ntype AddTaskGlyphProps = {\n  size?: number;\n  fill?: string;\n  scale?: number;\n}\n\n//Occurs on selecting rectangular brush\nexport function ChangeBrushType({\n  size = 15,\n  fill = \"#ccc\",\n}: AddTaskGlyphProps) {\n  return (\n    <g>\n      <circle fill=\"white\" r={size - size / 4} />\n      <g transform={translate(-size / 2, -size / 2)}>\n        <svg height={size} viewBox=\"0 0 141.75 141.75\" width={size}>\n          <g id=\"Layer 1\">\n            <path\n              d=\"M0+141.75L141.069+0.305731\"\n              fill=\"none\"\n              opacity=\"1\"\n              stroke={fill}\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"8\"\n            />\n            <path\n              d=\"M76.2578+103.486L90.5601+114.114C90.5601+114.114+99.8156+137.498+74.2147+137.498C53.7829+137.498+48.8808+110.711+49.6965+109.863C49.6965+109.863+60.7858+122.325+61.9556+116.24C63.9988+105.611+76.2578+103.486+76.2578+103.486ZM127.585+49.613C127.308+49.6166+127.031+49.6388+126.751+49.6794C124.356+50.0268+121.717+51.7745+118.137+55.3776L84.3591+88.0407C84.3585+88.0411+84.3578+88.0402+84.3573+88.0407C82.4109+89.8348+81.776+93.0922+82.5535+96.6415C83.3425+100.243+85.4619+103.608+88.3851+105.635C91.2896+107.65+95.1882+108.221+99.2129+107.403C103.001+106.633+106.521+104.693+108.654+102.179C108.654+102.179+108.653+102.178+108.654+102.177C108.654+102.177+108.655+102.178+108.655+102.177L134.486+66.7279C134.487+66.7273+134.486+66.7266+134.486+66.726C136.375+63.9384+137.395+61.4407+137.462+59.166C137.537+56.6101+136.4+54.3632+133.911+52.4215C131.424+50.4808+129.522+49.5881+127.585+49.613Z\"\n              fill=\"none\"\n              opacity=\"1\"\n              stroke={fill}\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"8\"\n            />\n            <path\n              d=\"M17.5647+7.49443L61.7224+7.49443C66.5892+7.49443+70.5345+12.5807+70.5345+18.8549L70.5345+50.7774C70.5345+57.0516+66.5892+62.1379+61.7224+62.1379L17.5647+62.1379C12.6979+62.1379+8.75258+57.0516+8.75258+50.7774L8.75258+18.8549C8.75258+12.5807+12.6979+7.49443+17.5647+7.49443Z\"\n              fill=\"none\"\n              opacity=\"1\"\n              stroke={fill}\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"8\"\n            />\n          </g>\n        </svg>\n      </g>\n    </g>\n  );\n}\n\n//Occurs on clear all click ???\nexport function ClearAll({ size = 15, fill = \"#ccc\" }: AddTaskGlyphProps) {\n  return (\n    <g>\n      <circle fill=\"white\" r={size - size / 4} />\n      <g>\n        <text\n          dominantBaseline=\"middle\"\n          fill={fill}\n          fontFamily=\"FontAwesome\"\n          fontSize={size}\n\n\n          textAnchor=\"middle\"\n        >\n          &#xf2ed;\n        </text>\n      </g>\n    </g>\n  );\n}\n\n//Occurs on removing a brush\nexport function RemoveBrush({ size = 15, fill = \"#ccc\" }: AddTaskGlyphProps) {\n  return (\n    <g>\n      <circle fill=\"white\" r={size - size / 4} />\n      <g>\n        <text\n          dominantBaseline=\"middle\"\n          fill={fill}\n          fontFamily=\"FontAwesome\"\n          fontSize={size}\n\n\n          textAnchor=\"middle\"\n        >\n          &#xf057;\n        </text>\n      </g>\n    </g>\n  );\n}\n\n//Occurs on shifting a rectangle size, dragging it ???\nexport function ChangeBrush({ size = 15, fill = \"#ccc\" }: AddTaskGlyphProps) {\n  return (\n    <g>\n      <circle fill=\"white\" r={size - size / 4} />\n      <g>\n        <text\n          dominantBaseline=\"middle\"\n          fill={fill}\n          fontFamily=\"FontAwesome\"\n          fontSize={size}\n\n\n          textAnchor=\"middle\"\n        >\n          &#xf044;\n        </text>\n      </g>\n    </g>\n  );\n}\n\n//Occurs on invert\nexport function Invert({ size = 15, fill = \"#ccc\" }: AddTaskGlyphProps) {\n  return (\n    <g>\n      <circle fill=\"white\" r={size - size / 4} />\n      <g>\n        <text\n          dominantBaseline=\"middle\"\n          fill={fill}\n          fontFamily=\"FontAwesome\"\n          fontSize={size}\n\n\n          textAnchor=\"middle\"\n        >\n          &#xf042;\n        </text>\n      </g>\n    </g>\n  );\n}\n\nexport function TurnPrediction({\n  size = 15,\n  fill = \"#ccc\",\n}: AddTaskGlyphProps) {\n  return (\n    <g>\n      <circle fill=\"white\" r={size - size / 4} />\n      <g transform={translate(-size / 2, -size / 2)}>\n        <svg height={size} viewBox=\"0 0 141.75 141.75\" width={size}>\n          <g id=\"Layer 1\">\n            <path d=\"M11.34-11.34L11.6801+130.41L153.09+130.41\" fill=\"none\" opacity=\"1\" stroke={fill} strokeLinecap=\"round\" strokeLinejoin=\"miter\" strokeWidth=\"25\"/>\n            <path d=\"M41.0944+103.248C41.0944+96.3307+46.8061+90.7234+53.8519+90.7234C60.8977+90.7234+66.6094+96.4351+66.6094+103.481C66.6094+110.527+60.8977+116.238+53.8519+116.238C46.8061+116.238+41.0944+110.165+41.0944+103.248Z\" fill={fill} opacity=\"1\"/>\n            <path d=\"M28.3369+70.6417C28.3369+63.7248+34.0486+58.1175+41.0944+58.1175C48.1402+58.1175+53.8519+63.8292+53.8519+70.875C53.8519+77.9208+48.1402+83.6325+41.0944+83.6325C34.0486+83.6325+28.3369+77.5587+28.3369+70.6417Z\" fill={fill} opacity=\"1\"/>\n            <path d=\"M66.6094+83.3992C66.6094+76.4823+72.3211+70.875+79.3669+70.875C86.4127+70.875+92.1244+76.5867+92.1244+83.6325C92.1244+90.6783+86.4127+96.39+79.3669+96.39C72.3211+96.39+66.6094+90.3162+66.6094+83.3992Z\" fill={fill} opacity=\"1\"/>\n            <path d=\"M53.8519+57.8842C53.8519+50.9673+59.5636+45.36+66.6094+45.36C73.6552+45.36+79.3669+51.0717+79.3669+58.1175C79.3669+65.1633+73.6552+70.875+66.6094+70.875C59.5636+70.875+53.8519+64.8012+53.8519+57.8842Z\" fill={fill} opacity=\"1\"/>\n            <path d=\"M101.341+31.4476C101.341+24.5307+107.053+18.9234+114.098+18.9234C121.144+18.9234+126.856+24.6352+126.856+31.6809C126.856+38.7267+121.144+44.4384+114.098+44.4384C107.053+44.4384+101.341+38.3646+101.341+31.4476Z\" fill={fill} opacity=\"1\"/>\n            <path d=\"M90.001+31.2403C90.001+18.175+100.79+7.58342+114.098+7.58342C127.407+7.58342+138.196+18.3722+138.196+31.6809C138.196+44.9896+127.407+55.7784+114.098+55.7784C100.79+55.7784+90.001+44.3056+90.001+31.2403Z\" fill=\"none\" opacity=\"1\" stroke={fill} strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"8\"/>\n          </g>\n        </svg>\n      </g>\n    </g>\n  );\n}\n\n//When the check is clicked\nexport function LockPrediction({\n  size = 15,\n  fill = \"#ccc\",\n}: AddTaskGlyphProps) {\n  return (\n    <g>\n      <circle fill=\"white\" r={size - size / 4} />\n      <g>\n        <text\n          dominantBaseline=\"middle\"\n          fill={fill}\n          fontFamily=\"FontAwesome\"\n          fontSize={size}\n\n\n          textAnchor=\"middle\"\n        >\n          &#xf0eb;\n        </text>\n      </g>\n    </g>\n  );\n}\n\n//When a rectangular brush is added\nexport function AddBrush({ size = 15, fill = \"#ccc\" }: AddTaskGlyphProps) {\n  return (\n    <g>\n      <circle fill=\"white\" r={size - size / 4} />\n      <g>\n        <text\n          dominantBaseline=\"middle\"\n          fill={fill}\n          fontFamily=\"FontAwesome\"\n          fontSize={size}\n\n          textAnchor=\"middle\"\n        >\n          &#xf5cb;\n        </text>\n      </g>\n    </g>\n  );\n}\n\n//When a point is individually deselected\nexport function PointDeselection({\n  size = 15,\n  fill = \"#ccc\",\n}: AddTaskGlyphProps) {\n  return (\n    <g>\n      <circle fill=\"white\" r={size - size / 4} />\n      <g>\n        <text\n          dominantBaseline=\"middle\"\n          fill={fill}\n          fontFamily=\"FontAwesome\"\n          fontSize={size}\n\n\n          textAnchor=\"middle\"\n        >\n          &#xf12d;\n        </text>\n      </g>\n    </g>\n  );\n}\n\n//When a brush or individual selection is made\nexport function PointSelection({\n  size = 15,\n  fill = \"#ccc\",\n}: AddTaskGlyphProps) {\n  return (\n    <g>\n      <circle fill=\"white\" r={size - size / 4} />\n      <g>\n        <text\n          dominantBaseline=\"middle\"\n          fill={fill}\n          fontFamily=\"FontAwesome\"\n          fontSize={size}\n\n\n          textAnchor=\"middle\"\n        >\n          &#xf1fc;\n        </text>\n      </g>\n    </g>\n  );\n}\n\n//When add plot is clicked, or initial loading of data.\nexport function AddPlot({ size = 15, fill = \"#ccc\" }: AddTaskGlyphProps) {\n  return (\n    <g>\n      <circle fill=\"white\" r={size - size / 4} />\n      <g transform={translate(-size / 2, -size / 2)}>\n        <svg height={size} viewBox=\"0 0 141.75 141.75\" width={size}>\n          <g id=\"Layer 1\">\n            <path\n              d=\"M11.34-11.34L11.6801+130.41L153.09+130.41\"\n              fill=\"none\"\n              opacity=\"1\"\n              stroke={fill}\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"miter\"\n              strokeWidth=\"25\"\n            />\n            <path\n              d=\"M77.7957+28.35L77.7957+99.225\"\n              fill=\"none\"\n              opacity=\"1\"\n              stroke={fill}\n              strokeLinecap=\"butt\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"25\"\n            />\n            <path\n              d=\"M113.4+63.8289L42.525+63.7875\"\n              fill=\"none\"\n              opacity=\"1\"\n              stroke={fill}\n              strokeLinecap=\"butt\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"25\"\n            />\n          </g>\n        </svg>\n      </g>\n    </g>\n  );\n}\n\n//Whenever a new dataset is selected\nexport function LoadDataset({ size = 15, fill = \"#ccc\" }: AddTaskGlyphProps) {\n  return (\n    <g>\n      <circle fill=\"white\" r={size - size / 4} />\n      <g>\n        <text\n          dominantBaseline=\"middle\"\n          fill={fill}\n          fontFamily=\"FontAwesome\"\n          fontSize={size}\n\n\n          textAnchor=\"middle\"\n        >\n          &#xf0ce;\n        </text>\n      </g>\n    </g>\n  );\n}\n\nexport function MultiBrush({ size = 15, fill = \"#ccc\" }: AddTaskGlyphProps) {\n  return (\n    <g>\n      <circle fill=\"white\" r={size - size / 4} />\n      <g transform={translate(-size / 2, -size / 2)}>\n        <svg height={size} viewBox=\"0 0 141.75 141.75\" width={size}>\n          <g id=\"Layer 1\">\n            <path d=\"M70.875+133.084C94.2246+133.264+117.574+113.829+117.574+87.3323C117.574+60.8354+117.574+0+117.574+0\" fill=\"none\" opacity=\"1\" stroke={fill} strokeLinecap=\"butt\" strokeLinejoin=\"round\" strokeWidth=\"15\"/>\n            <path d=\"M70.875+133.084C47.5254+133.264+24.1758+113.829+24.1758+87.3323C24.1758+60.8354+24.1758+0+24.1758+0\" fill=\"none\" opacity=\"1\" stroke={fill} strokeLinecap=\"butt\" strokeLinejoin=\"round\" strokeWidth=\"15\"/>\n          </g>\n        </svg>\n      </g>\n    </g>\n  );\n}\n\nexport function SwitchCategoryVisibility({\n  size = 15,\n  fill = \"#ccc\",\n}: AddTaskGlyphProps) {\n  return (\n    <g>\n      <circle fill=\"white\" r={size - size / 4} />\n      <g>\n        <text\n          dominantBaseline=\"middle\"\n          fill={fill}\n          fontFamily=\"FontAwesome\"\n          fontSize={size}\n\n\n          textAnchor=\"middle\"\n        >\n          &#xf61f;\n        </text>\n      </g>\n    </g>\n  );\n}\n\nexport function ChangeBrushSize({\n  size = 15,\n  fill = \"#ccc\",\n}: AddTaskGlyphProps) {\n  return (\n    <g>\n      <circle fill=\"white\" r={size - size / 4} />\n      <g transform={translate(-size / 2, -size / 2)}>\n        <svg height={size} viewBox=\"0 0 141.75 141.75\" width={size}>\n          <g id=\"Layer 1\">\n            <path\n              d=\"M76.8252+103.165L90.6711+113.451C90.6711+113.451+99.6313+136.08+74.8472+136.08C55.0673+136.08+50.3216+110.158+51.1113+109.337C51.1113+109.337+61.8468+121.397+62.9792+115.508C64.9572+105.222+76.8252+103.165+76.8252+103.165ZM126.515+51.0305C126.247+51.0339+125.979+51.0555+125.708+51.0948C123.388+51.431+120.834+53.1223+117.368+56.6091L84.6679+88.2186C84.6674+88.219+84.6667+88.2181+84.6662+88.2186C82.7819+89.9548+82.1673+93.1071+82.92+96.5419C83.6838+100.027+85.7355+103.283+88.5655+105.246C91.3773+107.195+95.1515+107.748+99.0478+106.956C102.715+106.212+106.122+104.333+108.187+101.901C108.188+101.9+108.187+101.9+108.187+101.899C108.188+101.899+108.189+101.9+108.189+101.899L133.196+67.5932C133.196+67.5927+133.195+67.592+133.196+67.5915C135.024+64.8937+136.012+62.4766+136.077+60.2753C136.149+57.8019+135.048+55.6274+132.639+53.7484C130.231+51.8702+128.39+51.0064+126.515+51.0305Z\"\n              fill=\"none\"\n              opacity=\"1\"\n              stroke={fill}\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"8\"\n            />\n            <path\n              d=\"M7.0875+29.2572L49.6125+29.2572\"\n              fill=\"none\"\n              opacity=\"1\"\n              stroke={fill}\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"12.58\"\n            />\n            <path\n              d=\"M28.4705+8.505L28.35+51.03\"\n              fill=\"none\"\n              opacity=\"1\"\n              stroke={fill}\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"12.58\"\n            />\n            <path\n              d=\"M28.4705+72.2925L70.9955+29.7675\"\n              fill=\"none\"\n              opacity=\"1\"\n              stroke={fill}\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"5\"\n            />\n            <path\n              d=\"M58.1175+62.3878L58.1175+62.3878L70.0025+62.3878L93.555+62.3878\"\n              fill=\"none\"\n              opacity=\"1\"\n              stroke={fill}\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"12.58\"\n            />\n          </g>\n        </svg>\n      </g>\n    </g>\n  );\n}\n\nexport function ChangeCategory({\n  size = 15,\n  fill = \"#ccc\",\n}: AddTaskGlyphProps) {\n  return (\n    <g>\n      <circle fill=\"white\" r={size - size / 4} />\n      <g>\n        <text\n          dominantBaseline=\"middle\"\n          fill={fill}\n          fontFamily=\"FontAwesome\"\n          fontSize={size}\n\n\n          textAnchor=\"middle\"\n        >\n          &#xf61f;\n        </text>\n      </g>\n    </g>\n  );\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable no-unused-vars */\nimport { NodeID, Provenance, ProvenanceGraph } from '@visdesignlab/trrack';\nimport { configure } from 'mobx';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { BundleMap, OriginMap } from '../Utils/BundleMap';\nimport { EventConfig } from '../Utils/EventConfig';\n\nimport ProvVis from './ProvVis';\nimport UndoRedoButton from './UndoRedoButton';\n\nexport type ProvVisConfig = {\n  eventConfig: EventConfig<any>;\n  editAnnotations: boolean;\n  bundleMap: BundleMap;\n  iconOnly: boolean;\n  iconSize: number;\n  height: number;\n  width: number;\n  sideOffset: number;\n  backboneGutter: number;\n  gutter: number;\n  verticalSpace: number;\n  regularCircleRadius: number;\n  backboneCircleRadius: number;\n  regularCircleStroke: number;\n  backboneCircleStroke: number;\n  topOffset: number;\n  textSize: number;\n  linkWidth: number;\n  duration: number;\n};\nconfigure({ isolateGlobalState: true });\nexport function ProvVisCreator<T, S extends string, A>(\n  node: Element,\n  prov: Provenance<T, S, A>,\n  currentDataset: string,\n  approvedFunction: (id: NodeID) => void,\n  rejectedFunction: (id: NodeID) => void,\n  nodeCreationMap: OriginMap,\n  callback?: (id: NodeID) => void,\n  brushCallback?: (selected: string[]) => void,\n  ephemeralUndo = false,\n  fauxRoot: NodeID = prov.graph.root,\n\n  config: Partial<ProvVisConfig> = {},\n) {\n  prov.addGlobalObserver(() => {\n    ReactDOM.render(\n      <ProvVis\n        {...config}\n        // eslint-disable-next-line no-console\n        addToWorkflow={(id: string) => console.log(id)}\n        approvedFunction={approvedFunction}\n        brushCallback={brushCallback}\n        changeCurrent={callback}\n        current={prov.graph.current}\n        currentDataset={currentDataset}\n        ephemeralUndo={ephemeralUndo}\n        nodeCreationMap={nodeCreationMap}\n        nodeMap={prov.graph.nodes}\n        prov={prov}\n        rejectedFunction={rejectedFunction}\n        root={fauxRoot}\n        undoRedoButtons\n      />,\n      node,\n    );\n  });\n\n  ReactDOM.render(\n    <ProvVis\n      {...config}\n      // eslint-disable-next-line no-console\n      addToWorkflow={(id: string) => console.log(id)}\n      approvedFunction={approvedFunction}\n      brushCallback={brushCallback}\n      changeCurrent={callback}\n      current={prov.graph.current}\n      currentDataset={currentDataset}\n      ephemeralUndo={ephemeralUndo}\n      nodeCreationMap={nodeCreationMap}\n      nodeMap={prov.graph.nodes}\n      prov={prov}\n      rejectedFunction={rejectedFunction}\n      root={fauxRoot}\n      undoRedoButtons\n    />,\n    node,\n  );\n}\n\nexport function UndoRedoButtonCreator<T, S extends string, A>(\n  node: Element,\n  graph: ProvenanceGraph<T, S, A>,\n  undoCallback: () => void,\n  redoCallback: () => void,\n) {\n  ReactDOM.render(\n    <UndoRedoButton graph={graph} redoCallback={redoCallback} undoCallback={undoCallback} />,\n    node,\n  );\n}\n","import {\n  createStyles,\n  FormControl,\n  InputLabel,\n  makeStyles,\n  MenuItem,\n  Select,\n  Theme,\n} from '@material-ui/core';\nimport React, { useState } from 'react';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    formControl: {\n      margin: theme.spacing(1),\n      width: 200,\n    },\n  }),\n);\n\nfunction useDropdown(\n  id: string,\n  label: string,\n  defaultState: string,\n  opts: { key: string; desc: string }[],\n  val?: string,\n  setVal?: (val: string) => void,\n) {\n  const classes = useStyles();\n  const [selected, setSelected] = useState(defaultState);\n\n  const handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n    const val = event.target.value as string;\n\n    if (setVal) {\n      setVal(val);\n    } else {\n      setSelected(val);\n    }\n  };\n\n  const Dropdown = () => (\n    <FormControl className={classes.formControl} variant=\"outlined\">\n      <InputLabel id={id}>{label}</InputLabel>\n      <Select\n        id={`${id}-select`}\n        label={label}\n        labelId={id}\n        value={val ? val : selected}\n        onChange={handleChange}\n      >\n        {opts.map((opt) => (\n          <MenuItem key={opt.key} value={opt.key}>\n            {opt.desc}\n          </MenuItem>\n        ))}\n      </Select>\n    </FormControl>\n  );\n\n  return { selected, Dropdown, setSelected };\n}\n\nexport default useDropdown;\n","import {\n  Button,\n  ButtonGroup,\n  createStyles,\n  IconButton,\n  makeStyles,\n  Menu,\n  MenuItem,\n  Theme,\n} from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport CloseIcon from '@material-ui/icons/Close';\nimport DoneIcon from '@material-ui/icons/Done';\nimport { observer } from 'mobx-react';\nimport React, { FC, useCallback, useContext, useState } from 'react';\n\nimport Store from '../../Store/Store';\nimport { Plot } from '../../Store/Types/Plot';\nimport { getPlotId } from '../../Utils/IDGens';\nimport useDropdown from '../Dropdown';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    divSpacing: {\n      margin: theme.spacing(1),\n    },\n    center: {\n      justifyContent: 'center',\n    },\n  }),\n);\n\nconst AddPlot: FC = () => {\n  const classes = useStyles();\n  const [anchor, setAnchor] = useState<HTMLElement | null>(null);\n\n  const { loadedDataset: dataset, addPlot } = useContext(Store).exploreStore;\n\n  const columns =\n    dataset?.numericColumns.map((col) => ({\n      key: col,\n      desc: `${dataset?.columnInfo[col].fullname || ''} (${dataset?.columnInfo[col].unit || ''})`,\n    })) || [];\n\n  const { selected: xCol, Dropdown: XDropdown, setSelected: setX } = useDropdown(\n    'x-axis-dropdown',\n    'X Axis',\n    '',\n    columns,\n  );\n  const { selected: yCol, Dropdown: YDropdown, setSelected: setY } = useDropdown(\n    'y-axis-dropdown',\n    'Y Axis',\n    '',\n    columns,\n  );\n\n  const handleClose = useCallback(() => {\n    setAnchor(null);\n  }, []);\n\n  const handleSubmit = useCallback(() => {\n    const plot: Plot = {\n      id: getPlotId(),\n      x: xCol,\n      y: yCol,\n    };\n\n    addPlot(plot);\n    setX('');\n    setY('');\n    handleClose();\n  }, [setX, setY, xCol, yCol, addPlot, handleClose]);\n\n  return (\n    <>\n      <div className={classes.divSpacing}>\n        <Button\n          color=\"primary\"\n          startIcon={<AddIcon />}\n          variant=\"contained\"\n          onClick={(event: React.MouseEvent<HTMLButtonElement>) => {\n            setAnchor(event.currentTarget);\n          }}\n        >\n          Add Plot\n        </Button>\n      </div>\n      <Menu anchorEl={anchor} open={Boolean(anchor)} onClose={handleClose}>\n        <MenuItem button={false}>\n          <XDropdown />\n        </MenuItem>\n        <MenuItem button={false}>\n          <YDropdown />\n        </MenuItem>\n        <MenuItem button={false} selected={false} divider />\n        <MenuItem alignItems=\"center\" button={false}>\n          <ButtonGroup className={classes.center} fullWidth>\n            <IconButton color=\"primary\" disabled={!(xCol && yCol)} onClick={handleSubmit}>\n              <DoneIcon />\n            </IconButton>\n            <IconButton\n              color=\"secondary\"\n              onClick={() => {\n                setX('');\n                setY('');\n                setAnchor(null);\n              }}\n            >\n              <CloseIcon />\n            </IconButton>\n          </ButtonGroup>\n        </MenuItem>\n      </Menu>\n    </>\n  );\n};\n\nexport default observer(AddPlot);\n","/* eslint-disable no-console */\nimport {\n  AppBar,\n  Button,\n  Divider,\n  FormControl,\n  makeStyles,\n  Theme,\n  Toolbar,\n} from '@material-ui/core';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport { ToggleButton, ToggleButtonGroup } from '@material-ui/lab';\nimport { observer } from 'mobx-react';\nimport React, { FC, useContext } from 'react';\n\nimport Store from '../Store/Store';\nimport deepCopy from '../Utils/DeepCopy';\n\nimport AddPlot from './AddPlotComponent/AddPlot';\nimport { storeProvenance } from './Workflow/Firebase';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  formControlwoWidth: {\n    margin: theme.spacing(1),\n  },\n}));\n\nconst Navbar: FC = () => {\n  const classes = useStyles();\n  // const [open, setOpen] = useState(false);\n  const store = useContext(Store);\n  const { provenance, provDb } = store;\n  const { workflows } = store.exploreStore;\n  const { currentProject } = store.projectStore;\n\n  const {\n    exploreStore: { brushType, switchBrush, filter },\n  } = useContext(Store);\n\n  return (\n    <div>\n      <AppBar color=\"transparent\" position=\"static\">\n        <Toolbar>\n          <AddPlot />\n          <Divider orientation=\"vertical\" flexItem />\n          <FormControl className={classes.formControl}>\n            <ToggleButtonGroup\n              value={brushType}\n              exclusive\n              onChange={(_, bt) => {\n                switchBrush(bt);\n              }}\n            >\n              <ToggleButton value=\"Rectangular\">\n                <CheckBoxOutlineBlankIcon />\n              </ToggleButton>\n              <ToggleButton value=\"Freeform Small\">20</ToggleButton>\n              <ToggleButton value=\"Freeform Medium\">35</ToggleButton>\n              <ToggleButton value=\"Freeform Large\">50</ToggleButton>\n            </ToggleButtonGroup>\n          </FormControl>\n          <Divider />\n          <Button\n            color=\"primary\"\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            // to={{ pathname: '/compare', search } as any}\n            variant=\"outlined\"\n            onClick={() => console.log(deepCopy(provenance.graph))}\n          >\n            Apply\n          </Button>\n          {/* <ComparisonDropdown /> */}\n          <Button\n            color=\"primary\"\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            variant=\"outlined\"\n            onClick={() => {\n              filter('Out');\n            }}\n          >\n            Filter Out\n          </Button>\n\n          <Button\n            color=\"primary\"\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            variant=\"outlined\"\n            onClick={() => {\n              // loadComparisonFilter(\"demo\")\n              filter('In');\n            }}\n          >\n            Filter In\n          </Button>\n\n          <Button\n            color=\"primary\"\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            variant=\"outlined\"\n            onClick={() => {\n              // loadComparisonFilter(\"demo\")\n              storeProvenance(provenance.graph, workflows, provDb, currentProject?.key || 'Empty');\n            }}\n          >\n            Store prov\n          </Button>\n\n          {/* <Button\n            color=\"primary\"\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            variant=\"outlined\"\n            onClick={() => {\n              setOpen(true);\n            }}\n          >\n            Bundle\n          </Button> */}\n\n          {/* <Dialog aria-labelledby=\"form-dialog-title\" open={open} onClose={handleClose}>\n            <DialogContent>\n              <TextField\n                id=\"name\"\n                label=\"Bundle Name\"\n                margin=\"dense\"\n                type=\"email\"\n                autoFocus\n                fullWidth\n                onChange={(e) => console.log(e.target.value)}\n              />\n            </DialogContent>\n            <DialogActions>\n              <Button color=\"primary\" onClick={handleClose}>\n                Cancel\n              </Button>\n              <Button color=\"primary\" onClick={handleClose}>\n                Create Bundle\n              </Button>\n            </DialogActions>\n          </Dialog> */}\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(Navbar as any).whyDidYouRender = {\n  logOnDifferentValues: true,\n};\nexport default observer(Navbar);\n","import { createStyles, makeStyles, Typography } from '@material-ui/core';\nimport clsx from 'clsx';\nimport { scaleLinear } from 'd3';\nimport { observer } from 'mobx-react';\nimport React, { FC, useEffect, useMemo, useRef, useState } from 'react';\n\nimport translate from '../../Utils/Translate';\nimport { RANK_BAR_FOREGROUND } from '../ColorSpecs';\n\ntype Props = {\n  height?: number;\n  rank: number;\n  label?: string;\n};\n\nconst useStyles = makeStyles(() =>\n  createStyles({\n    common: {\n      fill: RANK_BAR_FOREGROUND,\n    },\n    foreground: {\n      opacity: 0.9,\n    },\n    background: {\n      opacity: 0.3,\n    },\n    label: {\n      fill: 'black',\n    },\n  }),\n);\n\nconst Bar: FC<Props> = ({ rank, height = 45, label = rank.toFixed(2) }: Props) => {\n  const classes = useStyles();\n  const ref = useRef<SVGSVGElement>(null);\n\n  const [width, setWidth] = useState(0);\n\n  useEffect(() => {\n    if (ref.current) {\n      const bounds = ref.current.getBoundingClientRect();\n\n      if (width !== bounds.width) setWidth(bounds.width);\n    }\n  }, [width]);\n\n  const scale = useMemo(() => {\n    return scaleLinear().domain([0, 1]).range([0, width]);\n  }, [width]);\n\n  return (\n    <svg ref={ref} height={height} width=\"100%\">\n      <rect className={clsx(classes.common, classes.background)} height={height} width={width} />\n      <rect\n        className={clsx(classes.common, classes.foreground)}\n        height={height}\n        width={scale(rank)}\n      />\n      <Typography\n        className={classes.label}\n        component=\"text\"\n        dominantBaseline=\"middle\"\n        textAnchor=\"start\"\n        transform={translate(width * 0.05, height / 2)}\n        variant=\"button\"\n      >\n        {label}\n      </Typography>\n    </svg>\n  );\n};\n\nexport default observer(Bar);\n","import {\n  CircularProgress,\n  createStyles,\n  IconButton,\n  makeStyles,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Tooltip,\n  Typography,\n} from '@material-ui/core';\nimport TouchAppIcon from '@material-ui/icons/TouchApp';\nimport debounce from 'debounce';\nimport { observer } from 'mobx-react';\nimport React, { useContext, useMemo } from 'react';\n\nimport Store from '../../Store/Store';\n\nimport Bar from './Bar';\n\nexport const useStyles = makeStyles(() =>\n  createStyles({\n    centerContainer: {\n      height: '100%',\n      width: '100%',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      flexDirection: 'column',\n    },\n    table: {\n      tableLayout: 'auto',\n    },\n  }),\n);\n\nconst PredictionTable = () => {\n  const classes = useStyles();\n\n  const {\n    exploreStore: {\n      predictions,\n      setPredictionSelection,\n      setHoveredPrediction,\n      isLoadingPredictions,\n    },\n  } = useContext(Store);\n\n  const debouncedSetHoveredPrediction = useMemo(() => {\n    return debounce(setHoveredPrediction, 500);\n  }, [setHoveredPrediction]);\n\n  if (isLoadingPredictions)\n    return (\n      <div className={classes.centerContainer}>\n        <CircularProgress />\n        <Typography variant=\"button\">Computing Predictions</Typography>\n      </div>\n    );\n\n  if (predictions.length === 0)\n    return (\n      <div className={classes.centerContainer}>\n        <Typography variant=\"button\">Please make a selection</Typography>\n      </div>\n    );\n\n  return (\n    <div style={{ overflow: 'scroll', padding: '1em' }}>\n      <TableContainer component={Paper}>\n        <Table className={classes.table}>\n          <TableHead>\n            <TableRow>\n              {/* <TableCell width=\"20%\">Intent</TableCell> */}\n              <TableCell width=\"90%\">Intent</TableCell>\n              <TableCell width=\"10%\" />\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {predictions.map((pred) => {\n              return (\n                <TableRow\n                  key={pred.hash}\n                  onMouseOut={() => {\n                    debouncedSetHoveredPrediction(null);\n                  }}\n                  onMouseOver={() => {\n                    debouncedSetHoveredPrediction(pred);\n                  }}\n                >\n                  <Tooltip title={pred.description}>\n                    {/* <TableCell width=\"30%\">\n                      <Typography variant=\"button\">{pred.intent}</Typography>\n                    </TableCell> */}\n                    <TableCell width=\"90%\">\n                      <Bar label={`${pred.intent} (${pred.rank.toFixed(2)})`} rank={pred.rank} />\n                    </TableCell>\n                  </Tooltip>\n                  <TableCell width=\"10%\">\n                    <IconButton onClick={() => setPredictionSelection(pred)}>\n                      <TouchAppIcon />\n                    </IconButton>\n                  </TableCell>\n                </TableRow>\n              );\n            })}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </div>\n  );\n};\n\nexport default observer(PredictionTable);\n","import {\n  Chip,\n  CircularProgress,\n  createStyles,\n  Grid,\n  IconButton,\n  makeStyles,\n  Paper,\n  Theme,\n  useTheme,\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { observer } from 'mobx-react';\nimport React, { FC, useContext } from 'react';\n\nimport Store from '../Store/Store';\n\nimport Scatterplot from './Scatterplot/Scatterplot';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      flexGrow: 1,\n      padding: theme.spacing(2),\n      overflow: 'auto',\n    },\n    chips: {\n      display: 'flex',\n      justifyContent: 'center',\n      flexWrap: 'wrap',\n      '& > *': {\n        margin: theme.spacing(0.5),\n      },\n    },\n    grid: {\n      height: '100%',\n    },\n    closeIcon: {\n      position: 'absolute',\n    },\n  }),\n);\n\nconst Visualization: FC = () => {\n  const {\n    exploreStore: { plots, removePlot, isLoadingData, n_plots },\n    projectStore: { currentProject, currentDatasetKey, loadDatasetWithReapply, isReapplying },\n  } = useContext(Store);\n\n  // const spContainerDimension = height > width ? width : height;\n  const spContainerDimension = n_plots === 1 ? 800 : 500;\n  const classes = useStyles();\n  const theme = useTheme();\n  const xs = n_plots === 1 ? 'auto' : 6;\n\n  const loader = <CircularProgress />;\n\n  const scatterPlots = plots.map((plot) => (\n    <Grid key={plot.id} xs={xs} item>\n      <Paper elevation={3}>\n        {n_plots > 1 && (\n          <IconButton className={classes.closeIcon} onClick={() => removePlot(plot)}>\n            <CloseIcon />\n          </IconButton>\n        )}\n        <Scatterplot plot={plot} size={spContainerDimension - 2 * theme.spacing(1)} />\n      </Paper>\n    </Grid>\n  ));\n\n  if (!currentProject || !currentDatasetKey) return <div />;\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.chips}>\n        {currentProject.datasets.map((d) => (\n          <Chip\n            key={d.key}\n            color={currentDatasetKey === d.key ? 'primary' : 'default'}\n            disabled={currentDatasetKey === d.key}\n            label={d.version}\n            onClick={() => loadDatasetWithReapply(d.key)}\n          />\n        ))}\n      </div>\n      <Grid alignItems=\"center\" className={classes.grid} justify=\"center\" spacing={2} container>\n        {isLoadingData || isReapplying ? loader : scatterPlots}\n      </Grid>\n    </div>\n  );\n};\n\nexport default observer(Visualization);\n","import { Input, Tooltip, Typography } from '@material-ui/core';\nimport { observer } from 'mobx-react';\nimport React, { useState } from 'react';\n\ntype Props = {\n  text: string;\n  handleType: (text: string) => void;\n  color: string;\n};\n\nconst Editable = ({ text, handleType, color }: Props) => {\n  const [isEditing, setIsEditing] = useState(false);\n\n  return isEditing ? (\n    <Input\n      value={text}\n      onBlur={() => setIsEditing(false)}\n      onChange={(event) => {\n        event.stopPropagation();\n        handleType(event.target.value);\n      }}\n    />\n  ) : (\n    <Tooltip title={text}>\n      <Typography\n        align=\"center\"\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        color={color as any}\n        style={{ width: '100px' }}\n        variant=\"button\"\n        noWrap\n        onClick={() => setIsEditing(true)}\n      >\n        {text}\n      </Typography>\n    </Tooltip>\n  );\n};\n\nexport default observer(Editable);\n","import {\n  Card,\n  CardActions,\n  CardContent,\n  IconButton,\n  makeStyles,\n  Theme,\n  Typography,\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { observer } from 'mobx-react';\nimport React, { useContext } from 'react';\n\nimport Store from '../../Store/Store';\n\ntype Props = {\n  id: string;\n};\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  card: {\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n  },\n  close: {\n    marginLeft: 'auto',\n  },\n}));\n\nconst Action = ({ id }: Props) => {\n  const classes = useStyles();\n  const {\n    provenance,\n    provenance: {\n      graph: { nodes },\n    },\n    exploreStore: { removeFromWorkflow, currentDatasetKey },\n  } = useContext(Store);\n\n  const node = nodes[id];\n\n  let isRejected = false;\n\n  const artifact = provenance.getLatestArtifact(id);\n\n  if (artifact) {\n    if (!currentDatasetKey) {\n      isRejected = false;\n    } else {\n      isRejected = artifact.artifact.status_record[currentDatasetKey] === 'Rejected';\n    }\n  }\n\n  return (\n    <Card className={classes.card} variant=\"outlined\">\n      <CardContent>\n        <CardActions disableSpacing>\n          <Typography color={isRejected ? 'textSecondary' : 'textPrimary'} variant=\"button\">\n            {node.label}\n          </Typography>\n          <IconButton\n            className={classes.close}\n            color=\"secondary\"\n            disabled={isRejected}\n            size=\"small\"\n            onClick={() => removeFromWorkflow(id)}\n          >\n            <CloseIcon />\n          </IconButton>\n        </CardActions>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default observer(Action);\n","/* eslint-disable no-constant-condition */\nimport {\n  Badge,\n  Card,\n  CardActions,\n  CardContent,\n  Divider,\n  IconButton,\n  makeStyles,\n  Snackbar,\n  Theme,\n} from '@material-ui/core';\nimport { green, red } from '@material-ui/core/colors';\nimport CloseIcon from '@material-ui/icons/Close';\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport ShareIcon from '@material-ui/icons/Share';\nimport { Alert } from '@material-ui/lab';\nimport { observer } from 'mobx-react';\nimport React, { useCallback, useContext, useState } from 'react';\n\nimport { WorkflowType } from '../../Store/ExploreStore';\nimport Store from '../../Store/Store';\nimport Editable from '../Editable';\n\nimport Action from './Action';\nimport { storeToFirebase } from './Firebase';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  card: {\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n  },\n  close: {\n    marginLeft: 'auto',\n  },\n  badge_sync: {\n    backgroundColor: green[500],\n  },\n  badge_unsync: {\n    backgroundColor: red[500],\n  },\n}));\n\ntype Props = {\n  workflow: WorkflowType;\n};\n\nconst Workflow = ({ workflow }: Props) => {\n  const classes = useStyles();\n  const {\n    exploreStore: {\n      workflows,\n      renameWorkflow,\n      currentWorkflow,\n      setCurrentWorkflow,\n      removeWorkflow,\n      workflowSyncStatus,\n      setSyncStatus,\n    },\n    provenance,\n    db,\n  } = useContext(Store);\n\n  const [openCopyMessage, setOpenCopyMessage] = useState(true);\n\n  const { id } = workflow;\n\n  const isSync = workflowSyncStatus[id]\n    ? workflowSyncStatus[id] === JSON.stringify(workflow)\n    : false;\n\n  const isCurrent = id === currentWorkflow;\n\n  const handleType = useCallback((text) => renameWorkflow(id, text), [id, renameWorkflow]);\n\n  const copyId = useCallback(() => {\n    const el = document.createElement('textarea');\n    el.setAttribute('readonly', '');\n    el.style.position = 'absolute';\n    el.style.left = '-99999px';\n    el.value = id;\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n    setOpenCopyMessage(true);\n  }, [id]);\n\n  return (\n    <>\n      <Card className={classes.card} variant=\"outlined\" onClick={() => setCurrentWorkflow(id)}>\n        <CardContent>\n          <CardActions disableSpacing>\n            <Badge\n              classes={{ badge: isSync ? classes.badge_sync : classes.badge_unsync }}\n              color=\"primary\"\n              variant=\"dot\"\n            >\n              <Editable\n                color={isCurrent ? 'textPrimary' : 'textSecondary'}\n                handleType={handleType}\n                text={workflow.name}\n              />\n            </Badge>\n            {!isSync ? (\n              <IconButton\n                className={classes.close}\n                disabled={workflow.graph.length === 0}\n                size=\"small\"\n                onClick={() =>\n                  storeToFirebase(id, provenance.graph, workflows[id], db, setSyncStatus)\n                }\n              >\n                <ShareIcon />\n              </IconButton>\n            ) : (\n              <IconButton\n                className={classes.close}\n                disabled={workflow.graph.length === 0}\n                size=\"small\"\n                onClick={copyId}\n              >\n                <FileCopyIcon />\n              </IconButton>\n            )}\n            <IconButton size=\"small\" onClick={() => removeWorkflow(id)}>\n              <CloseIcon />\n            </IconButton>\n          </CardActions>\n          <Divider />\n          {Object.values(workflow.graph).map((id) => (\n            <Action key={id} id={id} />\n          ))}\n        </CardContent>\n      </Card>\n      <Snackbar\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'right',\n        }}\n        autoHideDuration={1000}\n        open={openCopyMessage}\n        onClose={() => setOpenCopyMessage(false)}\n      >\n        <Alert>{`Copied workflow id: ${id}`}</Alert>\n      </Snackbar>\n    </>\n  );\n};\n\nexport default observer(Workflow);\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  Divider,\n  makeStyles,\n  Paper,\n  Theme,\n  Typography,\n} from '@material-ui/core';\nimport { observer } from 'mobx-react';\nimport React, { useContext } from 'react';\n\nimport Store from '../../Store/Store';\n\nimport Workflow from './Workflow';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  root: {\n    margin: theme.spacing(2),\n    padding: theme.spacing(1),\n  },\n  card: {\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n  },\n}));\n\n// type Props = {\n//   test?: string;\n// };\n\nconst Workflows = () => {\n  const classes = useStyles();\n  const {\n    exploreStore: { workflows, addWorkflow },\n  } = useContext(Store);\n\n  return (\n    <Paper className={classes.root}>\n      <Typography align=\"center\" variant=\"h4\">\n        Workflow\n      </Typography>\n      <Divider />\n      <Card variant=\"outlined\">\n        <CardActions>\n          <Button color=\"primary\" onClick={() => addWorkflow()}>\n            Add Workflow\n          </Button>\n        </CardActions>\n        <CardContent>\n          {Object.values(workflows).map((d) => {\n            return <Workflow key={d.id} workflow={d} />;\n          })}\n        </CardContent>\n      </Card>\n    </Paper>\n  );\n};\n\nexport default observer(Workflows);\n","import { CssBaseline, makeStyles } from '@material-ui/core';\nimport { isChildNode } from '@visdesignlab/trrack';\nimport { observer } from 'mobx-react';\nimport React, { useContext, useEffect } from 'react';\n\nimport Store from '../../Store/Store';\nimport { IntentEvents } from '../../Store/Types/IntentEvents';\nimport { Plot } from '../../Store/Types/Plot';\nimport { ProvVis } from '../../trrack-vis/index';\nimport { EventConfig } from '../../trrack-vis/Utils/EventConfig';\nimport { getPlotId } from '../../Utils/IDGens';\nimport {\n  AddBrush,\n  AddPlot,\n  ChangeBrush,\n  ChangeBrushSize,\n  ChangeBrushType,\n  ChangeCategory,\n  ClearAll,\n  Invert,\n  LoadDataset,\n  LockPrediction,\n  MultiBrush,\n  PointDeselection,\n  PointSelection,\n  RemoveBrush,\n  SwitchCategoryVisibility,\n  TurnPrediction,\n} from '../Icons';\nimport Navbar from '../Navbar';\nimport PredictionTable from '../Predictions/PredictionTable';\nimport Visualization from '../Visualization';\nimport Workflows from '../Workflow/Workflows';\n\nexport type Bundle = {\n  metadata: unknown;\n  bundleLabel: string;\n  bunchedNodes: string[];\n};\n\nexport type BundleMap = { [key: string]: Bundle };\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    '.red': {\n      backgroundColor: '#ff8080',\n    },\n    '.green': {\n      backgroundColor: '#90EE90',\n    },\n    '.yellow': {\n      backgroundColor: '#ffff8b',\n    },\n    display: 'grid',\n    height: '100vh',\n    width: '100vw',\n    gridTemplateRows: 'min-content 1fr',\n    overflow: 'hidden',\n  },\n  layout: {\n    display: 'grid',\n    gridTemplateColumns: '5fr 1.5fr 1.3fr 1.5fr',\n    overflow: 'hidden',\n  },\n}));\n\nexport const eventConfig: EventConfig<IntentEvents> = {\n  'Load Dataset': {\n    backboneGlyph: <LoadDataset size={22} />,\n    currentGlyph: <LoadDataset fill=\"#2185d0\" size={22} />,\n    regularGlyph: <LoadDataset size={16} />,\n    bundleGlyph: <LoadDataset fill=\"#2185d0\" size={22} />,\n  },\n  MultiBrush: {\n    backboneGlyph: <MultiBrush size={22} />,\n    currentGlyph: <MultiBrush fill=\"#2185d0\" size={22} />,\n    regularGlyph: <MultiBrush size={16} />,\n    bundleGlyph: <MultiBrush fill=\"#2185d0\" size={22} />,\n  },\n  'Switch Category Visibility': {\n    backboneGlyph: <SwitchCategoryVisibility size={22} />,\n    currentGlyph: <SwitchCategoryVisibility fill=\"#2185d0\" size={22} />,\n    regularGlyph: <SwitchCategoryVisibility size={16} />,\n    bundleGlyph: <SwitchCategoryVisibility fill=\"#2185d0\" size={22} />,\n  },\n  'Change Category': {\n    backboneGlyph: <ChangeCategory size={22} />,\n    currentGlyph: <ChangeCategory fill=\"#2185d0\" size={22} />,\n    regularGlyph: <ChangeCategory size={16} />,\n    bundleGlyph: <ChangeCategory fill=\"#2185d0\" size={22} />,\n  },\n  'Add Plot': {\n    backboneGlyph: <AddPlot size={22} />,\n    currentGlyph: <AddPlot fill=\"#2185d0\" size={22} />,\n    regularGlyph: <AddPlot size={16} />,\n    bundleGlyph: <AddPlot fill=\"#2185d0\" size={22} />,\n  },\n  'Point Selection': {\n    backboneGlyph: <PointSelection size={22} />,\n    currentGlyph: <PointSelection fill=\"#2185d0\" size={22} />,\n    regularGlyph: <PointSelection size={16} />,\n    bundleGlyph: <PointSelection fill=\"#2185d0\" size={22} />,\n  },\n  'Point Deselection': {\n    backboneGlyph: <PointDeselection size={22} />,\n    currentGlyph: <PointDeselection fill=\"#2185d0\" size={22} />,\n    regularGlyph: <PointDeselection size={16} />,\n    bundleGlyph: <PointDeselection fill=\"#2185d0\" size={22} />,\n  },\n  'Add Brush': {\n    backboneGlyph: <AddBrush size={22} />,\n    currentGlyph: <AddBrush fill=\"#2185d0\" size={22} />,\n    regularGlyph: <AddBrush size={16} />,\n    bundleGlyph: <AddBrush fill=\"#2185d0\" size={22} />,\n  },\n  'Lock Prediction': {\n    backboneGlyph: <LockPrediction size={22} />,\n    currentGlyph: <LockPrediction fill=\"#2185d0\" size={22} />,\n    regularGlyph: <LockPrediction size={16} />,\n    bundleGlyph: <LockPrediction fill=\"rgb(248, 191, 132)\" size={22} />,\n  },\n  'Prediction Selection': {\n    backboneGlyph: <TurnPrediction size={22} />,\n    currentGlyph: <TurnPrediction fill=\"#2185d0\" size={22} />,\n    regularGlyph: <TurnPrediction size={16} />,\n    bundleGlyph: <TurnPrediction fill=\"#2185d0\" size={22} />,\n  },\n  Invert: {\n    backboneGlyph: <Invert size={22} />,\n    currentGlyph: <Invert fill=\"#2185d0\" size={22} />,\n    regularGlyph: <Invert size={16} />,\n    bundleGlyph: <Invert fill=\"#2185d0\" size={22} />,\n  },\n  'Update Brush': {\n    backboneGlyph: <ChangeBrush size={22} />,\n    currentGlyph: <ChangeBrush fill=\"#2185d0\" size={22} />,\n    regularGlyph: <ChangeBrush size={16} />,\n    bundleGlyph: <ChangeBrush fill=\"#2185d0\" size={22} />,\n  },\n  'Remove Brush': {\n    backboneGlyph: <RemoveBrush size={22} />,\n    currentGlyph: <RemoveBrush fill=\"#2185d0\" size={22} />,\n    regularGlyph: <RemoveBrush size={16} />,\n    bundleGlyph: <RemoveBrush fill=\"#2185d0\" size={22} />,\n  },\n  Filter: {\n    backboneGlyph: <ClearAll size={22} />,\n    currentGlyph: <ClearAll fill=\"#2185d0\" size={22} />,\n    regularGlyph: <ClearAll size={16} />,\n    bundleGlyph: <ClearAll fill=\"#ccc\" size={22} />,\n  },\n  'Change Brush Type': {\n    backboneGlyph: <ChangeBrushType size={22} />,\n    currentGlyph: <ChangeBrushType fill=\"#2185d0\" size={22} />,\n    regularGlyph: <ChangeBrushType size={16} />,\n    bundleGlyph: <ChangeBrushType fill=\"#2185d0\" size={22} />,\n  },\n  'Change Brush Size': {\n    backboneGlyph: <ChangeBrushSize size={22} />,\n    currentGlyph: <ChangeBrushSize fill=\"#2185d0\" size={22} />,\n    regularGlyph: <ChangeBrushSize size={16} />,\n    bundleGlyph: <ChangeBrushSize fill=\"#2185d0\" size={22} />,\n  },\n};\n\nconst ExploreHome = () => {\n  const classes = useStyles();\n\n  const {\n    exploreStore,\n    projectStore: { loadedDataset, nodeCreationMap, approveNode, rejectNode },\n    provenance,\n    bundledNodes,\n    loadedWorkflowId,\n    loadSavedProject,\n  } = useContext(Store);\n\n  const { addToWorkflow } = exploreStore;\n\n  useEffect(() => {\n    const current = provenance.current;\n\n    if (isChildNode(current)) {\n      if (current.children.length > 0) return;\n    }\n\n    if (!loadedDataset || exploreStore.n_plots > 0 || loadedWorkflowId || loadSavedProject) return;\n\n    const { numericColumns } = loadedDataset;\n\n    const plot: Plot = {\n      id: getPlotId(),\n      x: numericColumns[0],\n      y: numericColumns[1],\n    };\n    exploreStore.addPlot(plot);\n  });\n\n  const bundle: BundleMap = {};\n\n  for (const j of bundledNodes) {\n    if (j.length === 0) {\n      continue;\n    }\n    bundle[j[0]] = {\n      metadata: '',\n      bundleLabel: '',\n      bunchedNodes: j,\n    };\n  }\n\n  // function brushedNodes(selected: string[])\n  // {\n  //   //TODO:: do this in smarter, value based way\n  //   // updateBrushed(selected)\n  // }\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <Navbar />\n      <div className={classes.layout}>\n        <Visualization />\n        <PredictionTable />\n        <ProvVis\n          key={provenance.graph.root}\n          addToWorkflow={addToWorkflow}\n          approvedFunction={(node: string) => approveNode(node)}\n          backboneGutter={40}\n          changeCurrent={(nodeID: string) => provenance.goToNode(nodeID)}\n          current={provenance.graph.current}\n          currentDataset={loadedDataset?.version || ''}\n          ephemeralUndo={false}\n          eventConfig={eventConfig}\n          nodeCreationMap={nodeCreationMap}\n          nodeMap={provenance.graph.nodes}\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          prov={provenance as any}\n          rejectedFunction={(node) => rejectNode(node)}\n          root={provenance.graph.root}\n          undoRedoButtons\n        />\n        <Workflows />\n      </div>\n    </div>\n  );\n};\n\nexport default observer(ExploreHome);\n","import { observer } from 'mobx-react';\nimport React, { FC, useContext, useEffect } from 'react';\nimport { Redirect, RouteComponentProps } from 'react-router-dom';\n\nimport Store from '../../Store/Store';\n\nimport ExploreHome from './ExploreHome';\n\nconst Explore: FC<RouteComponentProps> = ({ location }: RouteComponentProps) => {\n  const {\n    setQueryParams,\n    projectStore: { loadedDataset },\n  } = useContext(Store);\n\n  useEffect(() => {\n    setQueryParams(location.search);\n  }, [location.search, setQueryParams]);\n\n  if (!loadedDataset) return <Redirect to={{ pathname: '/project', search: location.search }} />;\n\n  return <ExploreHome />;\n};\n\nexport default observer(Explore);\n","import { observer } from 'mobx-react';\nimport React, { FC } from 'react';\n\nimport { CategoricalDistribution, Column } from '../../Store/Types/Dataset';\n\ntype CategoricalHeaderProps = {\n  info: CategoricalDistribution;\n  width: number;\n  height: number;\n};\n\nconst CategoricalHeader: FC<CategoricalHeaderProps> = ({\n  info,\n  width,\n  height,\n}: CategoricalHeaderProps) => {\n  return (\n    <div>\n      {Object.keys(info).length} {width} {height}\n    </div>\n  );\n};\n\ntype Props = {\n  width: number;\n  height: number;\n  column: Column;\n};\n\nconst HeaderDistribution: FC<Props> = ({ column, width, height }: Props) => {\n  const { dataType, fullname } = column;\n\n  if (dataType === 'id' || dataType === 'label') return <>{fullname}</>;\n\n  if (column.dataType === 'categorical')\n    return <CategoricalHeader height={height} info={column.info} width={width} />;\n\n  return <div>Custom</div>;\n};\n\nexport default observer(HeaderDistribution);\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { makeStyles, Typography } from '@material-ui/core';\nimport { DataGrid } from '@material-ui/data-grid';\nimport { ValueFormatterParams } from '@material-ui/x-grid';\nimport { observer } from 'mobx-react';\nimport React, { useCallback, useContext, useMemo, useRef } from 'react';\n\nimport Store from '../../Store/Store';\nimport { Dataset } from '../../Store/Types/Dataset';\n\nimport HeaderDistribution from './HeaderDistribution';\n\nfunction useDataGridFormat(\n  data: Dataset | null,\n  comparisonDataset: Dataset | null,\n  headerHeight = 56,\n  firstTable: boolean,\n) {\n  const st = useCallback((background) => {\n    return {\n      padding: 0,\n      width: '100%',\n      background,\n    };\n  }, []);\n\n  const { rows = [], columns = [] } = useMemo(() => {\n    if (!data) return { rows: [], columns: [] };\n    // console.log(toJS(data));\n    const { columnInfo, columns, values } = data;\n\n    const cols: any[] = columns\n      .filter((col) => col !== 'id' && col !== 'iid')\n      .map((col) => ({\n        field: col,\n        headerName: columnInfo[col].fullname,\n        description: columnInfo[col].unit || '',\n        flex: 1,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        renderHeader: (params: any) => {\n          const { width } = params.colDef;\n\n          if (headerHeight) return <div>{params.field}</div>;\n\n          return (\n            <div>\n              <HeaderDistribution column={columnInfo[col]} height={headerHeight} width={width} />\n            </div>\n          );\n        },\n\n        renderCell: (params: ValueFormatterParams) => {\n          if (comparisonDataset === null) {\n            return <div>{params.value}</div>;\n          }\n\n          const label = params.row.Label;\n\n          const row = comparisonDataset.values.filter((d) => d.Label === label);\n\n          let color = 'none';\n\n          if (row.length === 0) {\n            color = firstTable ? '#ff8080' : '#90EE90';\n          } else if (!firstTable) {\n            const valueChange = params.getValue(params.field) !== row[0][params.field];\n\n            // console.log(params.getValue(params.field));\n            // console.log(row[0][params.field]);\n\n            if (valueChange) color = '#ffff8b';\n          }\n\n          return <div style={st(color)}>{params.value}</div>;\n        },\n        cellClassName: (params: any) => {\n          if (comparisonDataset === null) return 'none';\n          const label = params.row.Label;\n\n          const row = comparisonDataset.values.filter((d) => d.Label === label);\n\n          let color = 'none';\n\n          if (row.length === 0) {\n            color = firstTable ? 'red' : 'green';\n          } else if (!firstTable) {\n            const valueChange = params.getValue(params.field) !== row[0][params.field];\n\n            // console.log(params.getValue(params.field));\n            // console.log(row[0][params.field]);\n\n            if (valueChange) color = 'yellow';\n          }\n\n          return color;\n        },\n      }));\n\n    return { rows: values, columns: cols };\n  }, [data, comparisonDataset, headerHeight, firstTable, st]);\n\n  return { rows, columns };\n}\n\ntype paramType = {\n  columnNum: number;\n};\n\nconst useStyles = makeStyles(() => ({\n  centerText: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n}));\n\nexport const DatasetTable = observer((p: paramType) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const classes = useStyles();\n  const headerHeight = 56;\n  const { loadedDataset, comparisonDataset } = useContext(Store).projectStore;\n  const { rows, columns } = useDataGridFormat(loadedDataset, comparisonDataset, headerHeight, true);\n\n  return (\n    <div\n      className={classes.centerText}\n      style={{ gridColumnStart: 1, gridColumnEnd: 1 + p.columnNum }}\n    >\n      {rows.length > 0 ? (\n        <DataGrid\n          ref={ref}\n          columns={columns}\n          headerHeight={headerHeight}\n          rows={rows}\n          autoPageSize\n          pagination\n        />\n      ) : (\n        <Typography variant=\"button\">Please select a dataset</Typography>\n      )}\n    </div>\n  );\n});\n\nexport const ComparisonTable = observer(() => {\n  const ref = useRef<HTMLDivElement>(null);\n  const headerHeight = 56;\n  const { loadedDataset, comparisonDataset } = useContext(Store).projectStore;\n  const { rows, columns } = useDataGridFormat(\n    comparisonDataset,\n    loadedDataset,\n    headerHeight,\n    false,\n  );\n\n  return (\n    <div style={{ gridColumnStart: 2, gridColumnEnd: 3 }}>\n      <DataGrid\n        ref={ref}\n        columns={columns}\n        headerHeight={headerHeight}\n        rows={rows}\n        autoPageSize\n        pagination\n      />\n    </div>\n  );\n});\n","import { LinearProgress, List, ListItem, ListItemText } from '@material-ui/core';\nimport Axios from 'axios';\nimport { observer } from 'mobx-react';\nimport React, { FC, useEffect, useState } from 'react';\n\nimport { SERVER } from '../../consts';\n\nimport { ID } from './UploadDatasetDialog';\n\ntype Props = {\n  trackers: ID[];\n  updateWhenDone: () => void;\n};\n\ntype Status = {\n  type: string;\n  status: string;\n  info: {\n    processed: number;\n    to_process: number;\n  };\n};\n\nconst StatusBars: FC<Props> = ({ trackers, updateWhenDone }: Props) => {\n  const [statuses, setStatuses] = useState<Status[]>([]);\n  const [complete, setComplete] = useState(false);\n\n  useEffect(() => {\n    if (trackers.length === 0) return;\n\n    if (complete) {\n      setStatuses([]);\n      updateWhenDone();\n    }\n\n    const intervalId = setInterval(() => {\n      Axios.post(`${SERVER}/dataset/status`, { trackers }).then((response) => {\n        const stats: Status[] = response.data;\n        const isAllDone = stats.map((s) => s.status).filter((s) => s !== 'SUCCESS').length === 0;\n\n        if (isAllDone) setComplete(true);\n        setStatuses(stats);\n      });\n    }, 500);\n\n    return () => clearInterval(intervalId);\n  }, [trackers, statuses, complete, updateWhenDone]);\n\n  return (\n    <List>\n      {statuses.map(({ type, info: { processed, to_process } }) => (\n        <ListItem key={type}>\n          <ListItemText>\n            {type} ({processed}/{to_process})\n          </ListItemText>\n          <ListItemText>\n            <LinearProgress value={(processed / to_process) * 100} variant=\"determinate\" />\n          </ListItemText>\n        </ListItem>\n      ))}\n    </List>\n  );\n};\n\nexport default observer(StatusBars);\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Input,\n  InputLabel,\n  TextField,\n} from '@material-ui/core';\nimport Axios, { AxiosResponse } from 'axios';\nimport { useFormik } from 'formik';\nimport { observer } from 'mobx-react';\nimport React, { ChangeEvent, FC, useCallback, useContext, useState } from 'react';\nimport { QueryClient, QueryClientProvider } from 'react-query';\n\nimport { SERVER } from '../../consts';\nimport Store from '../../Store/Store';\nimport { Project } from '../../Store/Types/Project';\n\nimport StatusBars from './StatusBars';\n\ntype Props = {\n  open: boolean;\n  handleClose: () => void;\n};\n\ntype DatasetFormFields = {\n  version: string;\n  description: string;\n  dataset: File;\n  metadata: File;\n};\n\nexport type ID = {\n  type: string;\n  id: string;\n};\n\ntype DatasetResponse = {\n  datasetKey: string;\n  message: string;\n  trackers: ID[];\n};\n\nconst queryClient = new QueryClient();\n\nfunction useDatasetFormManagement(project: Project | null) {\n  const [showStatus, setShowStatus] = useState(false);\n  const [processingComplete, setProcessingComplete] = useState(false);\n  const [trackers, setTrackers] = useState<ID[]>([]);\n\n  const updateWhenDone = useCallback(() => {\n    setShowStatus(false);\n    setProcessingComplete(true);\n  }, []);\n\n  const handleSubmit = useCallback(\n    (fields: DatasetFormFields) => {\n      if (!project) return;\n\n      const formData = new FormData();\n\n      Object.entries(fields).forEach((entry) => {\n        formData.append(entry[0], entry[1]);\n      });\n      formData.append('reset', 'True');\n\n      Axios.post(`${SERVER}/${project.key}/dataset/`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      }).then((response: AxiosResponse<DatasetResponse>) => {\n        setTrackers(response.data.trackers);\n        setShowStatus(true);\n      });\n    },\n    [project],\n  );\n  const initialValues: DatasetFormFields = {\n    version: '',\n    description: '',\n    dataset: null as never,\n    metadata: null as never,\n  };\n\n  return { handleSubmit, initialValues, showStatus, trackers, updateWhenDone, processingComplete };\n}\n\nconst UploadDatasetDialog: FC<Props> = ({ open, handleClose }: Props) => {\n  const { currentProject } = useContext(Store).projectStore;\n  const {\n    initialValues,\n    handleSubmit,\n    showStatus,\n    trackers,\n    updateWhenDone,\n    processingComplete,\n  } = useDatasetFormManagement(currentProject);\n  const formik = useFormik({\n    initialValues,\n    onSubmit: handleSubmit,\n  });\n\n  return (\n    <>\n      <Dialog open={open} onClose={handleClose}>\n        <DialogTitle>Upload a new dataset</DialogTitle>\n        <DialogContent>\n          <form id=\"dataset-form\" onSubmit={formik.handleSubmit}>\n            <TextField\n              id=\"version\"\n              label=\"Version\"\n              margin=\"dense\"\n              type=\"text\"\n              value={formik.values.version}\n              fullWidth\n              required\n              onChange={formik.handleChange}\n            />\n            <TextField\n              id=\"description\"\n              label=\"Description\"\n              margin=\"dense\"\n              type=\"text\"\n              value={formik.values.description}\n              fullWidth\n              multiline\n              onChange={formik.handleChange}\n            />\n            <InputLabel>\n              <Input\n                id=\"csv\"\n                type=\"file\"\n                hidden\n                required\n                onChange={(event: ChangeEvent<HTMLInputElement>) => {\n                  const { files } = event.target;\n\n                  if (files && files.length > 0) formik.setFieldValue('dataset', files[0]);\n                }}\n              />\n              Dataset*\n            </InputLabel>\n            <InputLabel>\n              <Input\n                id=\"yaml\"\n                type=\"file\"\n                hidden\n                onChange={(event: ChangeEvent<HTMLInputElement>) => {\n                  const { files } = event.target;\n\n                  if (files && files.length > 0) formik.setFieldValue('metadata', files[0]);\n                }}\n              />\n              Metadata\n            </InputLabel>\n          </form>\n          {showStatus && (\n            <QueryClientProvider client={queryClient}>\n              <StatusBars trackers={trackers} updateWhenDone={updateWhenDone} />\n            </QueryClientProvider>\n          )}\n        </DialogContent>\n        <DialogActions>\n          {processingComplete ? (\n            <Button onClick={() => handleClose()}>Close</Button>\n          ) : (\n            <>\n              <Button onClick={() => handleClose()}>Cancel</Button>\n              <Button disabled={formik.isSubmitting} form=\"dataset-form\" type=\"submit\">\n                Add\n              </Button>\n            </>\n          )}\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n};\n\nexport default observer(UploadDatasetDialog);\n","import {\n  AppBar,\n  Button,\n  createStyles,\n  makeStyles,\n  Switch,\n  Toolbar,\n  Typography,\n} from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport { observer } from 'mobx-react';\nimport React, { useContext, useMemo, useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport Store from '../../Store/Store';\nimport useDropdown from '../Dropdown';\n\nimport { ComparisonTable, DatasetTable } from './DatasetTable';\nimport UploadDatasetDialog from './UploadDatasetDialog';\n\nconst useStyles = makeStyles(() =>\n  createStyles({\n    colorClass: {},\n    root: {\n      '& .red': {\n        background: '#ff8080',\n      },\n      '& .green': {\n        backgroundColor: '#90EE90',\n      },\n      '& .yellow': {\n        backgroundColor: '#ffff8b',\n      },\n      flexGrow: 1,\n      display: 'grid',\n      height: '100vh',\n      gridTemplateRows: 'min-content 1fr',\n      gridTemplateColumns: '2fr 2fr',\n    },\n  }),\n);\n\nconst ProjectView = () => {\n  const classes = useStyles();\n  const {\n    projectStore: {\n      currentProject,\n      comparisonDatasetKey,\n      loadedDatasetKey: datasetKey,\n      loadDataset,\n      loadComparisonDataset,\n    },\n    search,\n  } = useContext(Store);\n\n  const [openUploadDatasetDialog, setOpenUploadDatasetDialog] = useState(false);\n  const [comparisonView, setComparisonView] = useState(false);\n\n  const datasetOptions = useMemo(() => {\n    const opts =\n      currentProject?.datasets.map((dataset) => ({\n        key: dataset.key,\n        desc: dataset.version,\n      })) || [];\n\n    return opts;\n  }, [currentProject]);\n\n  const { Dropdown: DatasetDropdown } = useDropdown(\n    'dataset-dropdown',\n    'Dataset',\n    '',\n    datasetOptions,\n    datasetOptions.map((d) => d.key).includes(datasetKey) ? datasetKey : '',\n    loadDataset,\n  );\n\n  const { Dropdown: ComparisonDropdown } = useDropdown(\n    'dataset-dropdown',\n    'Comparison Dataset',\n    '',\n    datasetOptions,\n    comparisonDatasetKey && datasetOptions.map((d) => d.key).includes(comparisonDatasetKey)\n      ? comparisonDatasetKey\n      : '',\n    loadComparisonDataset,\n  );\n\n  if (!currentProject) return <div>Unloaded</div>;\n\n  return (\n    <div className={classes.root}>\n      <AppBar\n        color=\"transparent\"\n        position=\"static\"\n        style={{ gridColumnStart: 1, gridColumnEnd: 3 }}\n      >\n        <Toolbar>\n          <Typography variant=\"h6\" noWrap>\n            {currentProject.name}\n          </Typography>\n          <DatasetDropdown />\n          {comparisonView ? <ComparisonDropdown /> : null}\n          <Button\n            color=\"primary\"\n            startIcon={<AddIcon />}\n            variant=\"outlined\"\n            onClick={() => setOpenUploadDatasetDialog(true)}\n          >\n            Upload Dataset\n          </Button>\n          <Button\n            color=\"primary\"\n            component={Link}\n            startIcon={<LaunchIcon />}\n            to={\n              {\n                pathname: '/explore',\n                search,\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              } as any\n            }\n            variant=\"outlined\"\n          >\n            Load Dataset\n          </Button>\n          <Switch\n            checked={comparisonView}\n            color=\"primary\"\n            inputProps={{ 'aria-label': 'secondary checkbox' }}\n            name=\"checkedA\"\n            onChange={() => {\n              setComparisonView(!comparisonView);\n            }}\n          />\n          {comparisonView ? (\n            <Button\n              color=\"primary\"\n              component={Link}\n              startIcon={<LaunchIcon />}\n              to=\"/compare\"\n              variant=\"outlined\"\n            >\n              Comparison View\n            </Button>\n          ) : null}\n        </Toolbar>\n      </AppBar>\n      <DatasetTable columnNum={comparisonView ? 1 : 2} />\n      {comparisonView && <ComparisonTable />}\n      <UploadDatasetDialog\n        handleClose={() => setOpenUploadDatasetDialog(false)}\n        open={openUploadDatasetDialog}\n      />\n    </div>\n  );\n};\n\nexport default observer(ProjectView);\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Snackbar,\n  TextField,\n} from '@material-ui/core';\nimport Axios from 'axios';\nimport { observer } from 'mobx-react';\nimport React, { FC, useCallback, useContext, useState } from 'react';\n\nimport { SERVER } from '../../consts';\nimport Store from '../../Store/Store';\n\ntype Props = {\n  open: boolean;\n  handleClose: () => void;\n};\n\nconst AddProjectDialog: FC<Props> = ({ open, handleClose }: Props) => {\n  const { loadProjects } = useContext(Store).projectStore;\n  const [id, setId] = useState('');\n  const [name, setName] = useState('');\n  const [message, setMessage] = useState('');\n  const [openSnackbar, setOpenSnackbar] = useState(false);\n\n  const createProject = useCallback(() => {\n    const formData = new FormData();\n    formData.append('name', name);\n    formData.append('reset', 'True');\n    Axios.post(`${SERVER}/project/${id}`, formData)\n      .then((response) => {\n        const { message } = response.data;\n        setMessage(message);\n      })\n      .catch(() => {\n        setMessage('Something went wrong!');\n      })\n      .finally(() => {\n        setId('');\n        setName('');\n        setOpenSnackbar(true);\n        loadProjects(id);\n      });\n  }, [id, name, loadProjects]);\n\n  return (\n    <>\n      <Dialog open={open} onClose={handleClose}>\n        <DialogTitle>Create new project</DialogTitle>\n        <DialogContent>\n          <DialogContentText>Please enter name and an unique id for the project.</DialogContentText>\n          <TextField\n            id=\"project-id\"\n            label=\"Project ID\"\n            margin=\"dense\"\n            type=\"text\"\n            value={id}\n            required\n            onChange={(event) => setId(event.target.value)}\n          />\n          <br />\n          <TextField\n            id=\"project-name\"\n            label=\"Project Name\"\n            margin=\"dense\"\n            type=\"text\"\n            value={name}\n            required\n            onChange={(event) => setName(event.target.value)}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => handleClose()}>Cancel</Button>\n          <Button\n            disabled={id === '' || name === ''}\n            onClick={() => {\n              createProject();\n              handleClose();\n            }}\n          >\n            Add\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Snackbar\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center',\n        }}\n        autoHideDuration={2000}\n        message={message}\n        open={openSnackbar}\n        onClose={() => setOpenSnackbar(false)}\n      />\n    </>\n  );\n};\n\nexport default observer(AddProjectDialog);\n","import {\n  createStyles,\n  Divider,\n  Drawer,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  makeStyles,\n  Theme,\n  Typography,\n} from '@material-ui/core';\nimport AddBoxIcon from '@material-ui/icons/AddBox';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport { observer } from 'mobx-react';\nimport React, { useContext, useState } from 'react';\n\nimport Store from '../../Store/Store';\n\nimport AddProjectDialog from './AddProjectDialog';\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n    },\n    appBar: {\n      width: `calc(100% - ${drawerWidth}px)`,\n      marginLeft: drawerWidth,\n    },\n    drawer: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n    drawerPaper: {\n      width: drawerWidth,\n    },\n    // necessary for content to be below app bar\n    toolbar: {\n      ...theme.mixins.toolbar,\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n  }),\n);\n\nconst Sidebar = () => {\n  const classes = useStyles();\n  const { projects, currentProject, loadProjectByKey: selectProject } = useContext(\n    Store,\n  ).projectStore;\n\n  const [open, setOpen] = useState(false);\n\n  return (\n    <Drawer\n      className={classes.drawer}\n      classes={{\n        paper: classes.drawerPaper,\n      }}\n      variant=\"permanent\"\n    >\n      <div className={classes.toolbar}>\n        <Typography variant=\"h6\">Projects</Typography>\n      </div>\n      <Divider />\n      <List>\n        <ListItem button onClick={() => setOpen(true)}>\n          <ListItemIcon>\n            <AddBoxIcon />\n          </ListItemIcon>\n          <ListItemText primary=\"Add Project\"> </ListItemText>\n        </ListItem>\n      </List>\n      <Divider />\n      <List>\n        {projects.map((proj) => (\n          <ListItem\n            key={proj.key}\n            selected={proj.key === currentProject?.key}\n            button\n            onClick={() => selectProject(proj.key)}\n          >\n            <ListItemIcon>\n              <FolderIcon />\n            </ListItemIcon>\n            <ListItemText primary={proj.name} />\n          </ListItem>\n        ))}\n      </List>\n      <AddProjectDialog handleClose={() => setOpen(false)} open={open} />\n    </Drawer>\n  );\n};\n\nexport default observer(Sidebar);\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { createStyles, CssBaseline, makeStyles } from '@material-ui/core';\nimport { observer } from 'mobx-react';\nimport React, { FC, useContext, useEffect } from 'react';\nimport { Redirect, RouteComponentProps } from 'react-router-dom';\n\nimport Store from '../../Store/Store';\n\nimport ProjectView from './ProjectView';\nimport Sidebar from './Sidebar';\n\nconst useStyles = makeStyles(() =>\n  createStyles({\n    root: {\n      display: 'flex',\n    },\n  }),\n);\n\nconst ProjectHome: FC<RouteComponentProps> = ({ location }: RouteComponentProps) => {\n  const classes = useStyles();\n  const {\n    projectStore: { currentProject, loadedDataset },\n    setQueryParams,\n    debug,\n    redirectPath,\n    search,\n    loadedWorkflowId,\n  } = useContext(Store);\n\n  useEffect(() => {\n    setQueryParams(location.search);\n  }, [location.search, setQueryParams]);\n\n  const instructions = 'Please select a project';\n\n  if (debug && redirectPath === 'explore' && loadedDataset)\n    return <Redirect to={{ pathname: '/explore', search }} />;\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <Sidebar />\n      {currentProject ? <ProjectView /> : instructions}\n    </div>\n  );\n};\n\nexport default observer(ProjectHome);\n","import whyDidYouRender from '@welldone-software/why-did-you-render';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter, Redirect, Route, Switch } from 'react-router-dom';\n\nimport ComparisonHome from './components/Comparison/ComparisonHome';\nimport Explore from './components/Explore/Explore';\nimport ProjectHome from './components/Project/ProjectHome';\nimport './index.css';\n\nwhyDidYouRender(React, {\n  trackAllPureComponents: true,\n  exclude: [/XGrid|RowCells|GridCell/],\n});\n\nconst search = window.location.search;\n\nconst app = (\n  <HashRouter>\n    <Switch>\n      <Redirect from=\"/\" to={{ pathname: '/project', search }} exact />\n      <Route component={Explore} path=\"/explore\" exact />\n      <Route component={ProjectHome} path=\"/project\" exact />\n      <Route component={ComparisonHome} path=\"/compare\" exact />\n    </Switch>\n  </HashRouter>\n);\n\nReactDOM.render(app, document.getElementById('root'));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// TODO: Uncomment\n// reportWebVitals();\n"],"sourceRoot":""}